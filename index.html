<!-- Branch: experiment/vm-2766-30sec-video-timeout --><!-- Revision: 2c413cf04731166a2491edcfe2f74158ba28bf47 --><!-- Created at: 13 of August 2025 09:46:30 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){overflow-wrap:break-word;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;max-width:100vw;margin:0;padding:0;overflow:hidden}@media screen and (max-height:251px){body{background-color:transparent}}button{padding:0}#dynamic{height:100vh;overflow:hidden}.fadeOut{opacity:0;pointer-events:none;transition:opacity .5s}.fadeIn{opacity:1;pointer-events:auto;transition:opacity .5s}a,button,div,span{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}</style><style>.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29m4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7m-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29m47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}._0LRN8a_container{text-align:center;flex-direction:column;justify-content:center;width:100%;height:145px;display:flex;position:relative;overflow:hidden}._0LRN8a_completeContainer{justify-content:center;align-items:center}._0LRN8a_popup{background-color:#fff;flex-direction:column;justify-content:center;height:100%;padding:0;display:flex;position:absolute;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){._0LRN8a_popup{color:#fff;background:#121212}}._0LRN8a_complete{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2272%22%20height%3D%2272%22%20fill%3D%22none%22%20viewBox%3D%220%200%2072%2072%22%3E%3Crect%20width%3D%2271%22%20height%3D%2271%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill%3D%22%2300aeff%22%20rx%3D%2235.5%22%2F%3E%3Cpath%20stroke%3D%22%23fff%22%20stroke-linecap%3D%22round%22%20stroke-width%3D%226%22%20d%3D%22M20.743%2036.375%2031.5%2047.132M31.5%2047.132%2053.882%2024.75%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:71px;height:71px;margin-top:5px;display:inline-block}@media (max-width:335px){._0LRN8a_complete{width:60px;height:60px;margin-top:3px}}._0LRN8a_title{color:#000;margin-top:15px;margin-bottom:18px;padding:0 30px;font-weight:700}@media (prefers-color-scheme:dark){._0LRN8a_title{color:#fff}}._0LRN8a_title._0LRN8a_question{font-size:17px}@media (max-width:335px){._0LRN8a_title._0LRN8a_question{margin-top:3px;font-size:15px}}._0LRN8a_title._0LRN8a_thanks{font-size:22px}@media (max-width:335px){._0LRN8a_title._0LRN8a_thanks{margin-top:8px;margin-bottom:8px;font-size:18px}}._0LRN8a_options{justify-content:center;gap:15px;max-width:303px;margin-bottom:0;margin-left:auto;margin-right:auto;padding:0 16px;display:flex}@media (max-width:335px){._0LRN8a_options{gap:10px;max-width:245px;padding:0 12px 12px}}._0LRN8a_option{cursor:pointer;background-color:#fff;border:1px solid #e0e0e0;border-radius:10px;flex-direction:column;flex:none;justify-content:center;align-items:center;width:91px;height:88px;padding-top:10px;transition:background-color .2s ease-in-out;display:flex;box-shadow:0 1px 3px rgba(0,0,0,.1)}@media (prefers-color-scheme:dark){._0LRN8a_option{color:#fff;background:#121212}}@media (max-width:335px){._0LRN8a_option{border-radius:10px;width:75px;height:75px}}._0LRN8a_option:hover{background-color:#f8f8f8}._0LRN8a_emoji{margin-bottom:4px;font-size:40px}@media (max-width:335px){._0LRN8a_emoji{margin-bottom:2px;font-size:32px}}._0LRN8a_optionText{color:#000;padding-bottom:5px;font-size:14px;font-weight:500}@media (prefers-color-scheme:dark){._0LRN8a_optionText{color:#fff}}@media (max-width:335px){._0LRN8a_optionText{padding-bottom:3px;font-size:12px}}.rM5gmW_adInfoRow{margin-bottom:3px;line-height:1.4;display:flex}.rM5gmW_adInfoLabel{color:#000;min-width:80px;font-weight:400}@media (prefers-color-scheme:dark){.rM5gmW_adInfoLabel{color:#fff}}@media (max-width:335px){.rM5gmW_adInfoLabel{min-width:70px}}.rM5gmW_adInfoValue{color:#9f9f9f;letter-spacing:0;text-align:left;white-space:nowrap;text-overflow:ellipsis;flex:auto;overflow:hidden}@media (prefers-color-scheme:dark){.rM5gmW_adInfoValue{color:silver}}@media (max-width:335px){.rM5gmW_adInfoValue{font-size:10px}}.rM5gmW_adInfoValue.rM5gmW_expanded{white-space:normal;word-break:break-word}.closeIcon.privacy{filter:invert();width:11px;height:11px}@media (max-width:335px){.closeIcon.privacy{width:9px;height:9px}}@media (prefers-color-scheme:dark){.closeIcon.privacy{filter:none}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:9px 9px 0 0;padding-top:12px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_privacyPopup{color:#fff;background:#121212}}@media (max-width:335px){.FbTWOG_privacyPopup{border-radius:7px 7px 0 0;padding-top:10px}}.FbTWOG_popupHeader{justify-content:space-between;height:24px;margin-bottom:-30px;display:flex;position:relative}.FbTWOG_popupHeader button{z-index:1;cursor:pointer;background:0 0;border:none;position:absolute;top:-3px;right:3.44%}.FbTWOG_readMore{color:#0376d9;padding:16px 0;font-size:16px;font-weight:400}@media (prefers-color-scheme:dark){.FbTWOG_readMore{color:#4a9eff}}@media (max-width:335px){.FbTWOG_readMore{padding:12px 0;font-size:12px}}.FbTWOG_privacyPolicy{text-align:center}.FbTWOG_popupFooter{color:#000;background-color:#f1f1f1;width:100%;margin-top:5px;padding:15px;font-size:12px}@media (prefers-color-scheme:dark){.FbTWOG_popupFooter{color:#fff;background-color:#1e1e1e}}@media (max-width:335px){.FbTWOG_popupFooter{margin-top:3px;padding:12px 10px;font-size:10px}}.FbTWOG_popupFooter .FbTWOG_adInfoTitle{margin-bottom:3px;font-weight:700;line-height:1.4}.FbTWOG_popupBody{padding-top:0;font-size:14px}@media (max-width:335px){.FbTWOG_popupBody{padding-top:0;font-size:13px}}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}@media (prefers-color-scheme:dark){.FbTWOG_show{box-shadow:0 -10px 20px -5px rgba(0,0,0,.75)}}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_mask{background:rgba(0,0,0,.5)}}.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.NQnIja_countdownInvisible{width:18px;height:18px}.mqB7Ka_skipIcon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='94.7' height='94.9'%3E%3Cg fill='%23FFF' stroke='%23000' stroke-width='3.417' stroke-miterlimit='10'%3E%3Cpath d='m37 75.5 22.4-22.4H1.9V41.7h57.5L37 19.3l8.1-8.1 36.2 36.2-36.2 36.2z'/%3E%3Cpath d='M92.733 11.138v72.4h-11.5v-72.4z'/%3E%3C/g%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px;display:inline-block}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}._7pzQ5q_overlayCta{content:"";z-index:2147483347;touch-action:manipulation;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;width:100%;position:absolute;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);width:100%;height:100%}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74m9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.closeIcon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='525.4px' height='525.5px'%3E%3Cpolygon fill='%23ffffff' stroke='%23000000' stroke-width='26' stroke-miterlimit='10' points='452.6,8.9 262.9,198.6 73.1,8.9 9,73 198.8,262.7 9,452 73.1,516.1 262.9,326.8 452.6,516.1 516.7,452 326.9,262.7 516.7,73'%3E%3C/polygon%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px;display:inline-block}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .8s ease-in-out;display:flex;position:absolute;bottom:8px;right:0;transform:translate(100vw)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:absolute;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:absolute;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px 15px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.tikWIq_primaryButton{color:#fff;background-color:#555fff;padding:0}.tikWIq_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.tikWIq_primaryButton{flex:1}}.tikWIq_secondaryButton{color:#555fff;background-color:#fff;padding:0}.tikWIq_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.tikWIq_secondaryButton{flex:1}}.tikWIq_primaryButton button{justify-content:center;align-items:center;display:flex}.tikWIq_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3AgeometricPrecision%3Btext-rendering%3AgeometricPrecision%3Bimage-rendering%3AoptimizeQuality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7q-5.098%2016.59-23%2015.5%204.538%203.446%202%208.5h-5Q5%2040-.5%2035.5v-5a133%20133%200%200%200%2010-9.5q7.75-2.25%205.5%205.5L12.5%2029q12.955%202.295%2016-10.5Q26.88%207.195%2015.5%207q-3.152-2.6-1-6%2016.18-2.067%2021%2013.5%22%20style%3D%22opacity%3A.849%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;width:100vw;height:100vh;position:relative}._37VDnG_composite{width:100vw;height:100vh}._37VDnG_component{width:100%;height:100%;position:relative}._37VDnG_compositeImage{background-position:50%;background-repeat:no-repeat;background-size:contain;justify-content:center;align-items:center;width:100%;height:100%;display:flex}._37VDnG_compositeImage img{display:none}._37VDnG_compositeHtml{width:100%;height:100%}@keyframes i0Mp0G_shrinkToTopLeft{0%{transform:translate(0)scale(1)}to{transform-origin:0 0;transform:translate(10px,10px)scale(.3)}}.i0Mp0G_pictureInPictureContainer{z-index:2147483548;box-sizing:border-box;width:100%;height:100%;margin:0;padding:0;display:block;position:fixed;top:0;left:0}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animationEnded{transform-origin:0 0;transition:transform 1s ease-in-out;transform:translate(10px,10px)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animatingVideo{animation:.5s ease-in-out forwards i0Mp0G_shrinkToTopLeft}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideUp{transform:translateY(-100%)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideLeft{transform:translate(-100%)scale(.3)}._6ix-Eq_storyProgress{width:100%;height:100%;padding-top:10px;display:flex;position:absolute}._6ix-Eq_segmentContainer{z-index:2147483347;gap:4px;width:100%;display:flex}._6ix-Eq_segment{background:rgba(255,255,255,.3);border-radius:2px;flex:1;height:4px;position:relative;overflow:hidden}._6ix-Eq_segment:first-child{margin-left:8px}._6ix-Eq_segment:last-child{margin-right:8px}._6ix-Eq_fill{will-change:width;background:#fff;height:100%}._6ix-Eq_animating{transition:width .25s ease-out}._6ix-Eq_prev,._6ix-Eq_next{pointer-events:auto;z-index:2147483348;width:25%;height:85%;position:absolute;bottom:0}._6ix-Eq_prev{left:0}._6ix-Eq_next{right:0}._6ix-Eq_gradient{z-index:1;background:linear-gradient(rgba(0,0,0,.2) 0,transparent 160px);position:absolute;top:0;bottom:0;left:0;right:0}.SUBbvW_modular{width:100vw;height:100vh}#gRz7DW_ad{width:100%;height:100%}</style><script type="module">window.appVersion="6.8.5-vm2766-8274";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{},abrController:class{}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var t=p();return(n=function(r,e){return t[r-=143]})(r,e)}for(var r=n,t=p,e=n,s=t();;)try{if(parseInt(e(154))/1*(parseInt(e(158))/2)+-parseInt(e(159))/3*(-parseInt(e(150))/4)+parseInt(e(147))/5+parseInt(e(157))/6*(-parseInt(e(155))/7)+parseInt(e(160))/8+parseInt(e(146))/9*(-parseInt(e(149))/10)+parseInt(e(145))/11*(-parseInt(e(152))/12)==159889)break;s.push(s.shift())}catch(n){s.push(s.shift())}function p(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(p=function(){return r})()}("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">for(var e=r,n=s,t=r,o=n();;)try{if(parseInt(t(239))/1*(parseInt(t(234))/2)+parseInt(t(250))/3+parseInt(t(246))/4+parseInt(t(249))/5+-parseInt(t(255))/6+-parseInt(t(251))/7+parseInt(t(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}function s(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(s=function(){return e})()}function r(e,n){var t=s();return(r=function(e,n){return t[e-=234]})(e,n)}if("function"==typeof getVungleReplacementTokens){var i,T={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},a=getVungleReplacementTokens(),c=(i={},Object[e(245)](a).forEach((function(e){i[vungleTokenMap[e]]=a[e]})),i);window[e(254)][e(237)][e(235)](c);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:c[e(253)]("INCENTIVIZED")&&"true"===c[e(236)].toLowerCase()};Object[e(245)](T)[e(244)]((function(t){c[e(253)](t)&&(n[T[t]]=c[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">let e,t,n;var i,r,a,s,o,l,c,d,u,h,v,p,g,m=class extends Error{};class f{static getInstance(e){return this.instance||(this.instance=new f(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new m(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var S=f,C=class{},E=class extends C{get(e){return this.replacementTokens[e]}has(...e){return e.every((e=>e in this.replacementTokens))}some(...e){return e.some((e=>e in this.replacementTokens))}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){return this.getSeriesTokens(e).map((e=>{var t;return null!=(t=this.replacementTokens[e])?t:""}))}getSeriesTokens(e){let t=[],n=[];return Object.keys(this.replacementTokens).filter((t=>t.startsWith(e))).forEach((i=>{let r=i.replace(e,"");/^\d+$/.test(r)?n.push(parseInt(r,10)):t.push(i)})),0===n.length||(n.sort(((e,t)=>e-t)),n.forEach((n=>t.push(`${e}${n}`)))),t}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},y=class extends C{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=((e,t="default")=>{let n=e=>e.filter((e=>void 0!==e)).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.save({activity:{type:"log",event:"info",data:{prefix:t,message:i,optionalParams:r}}}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.save({activity:{type:"log",event:"warn",data:{prefix:t,message:i,optionalParams:r}}}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.save({activity:{type:"log",event:"error",data:{prefix:t,message:i,optionalParams:r}}}),console.error(...a)}}})(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.save({activity:e}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach((t=>t(this,e)))}save(e){this.activity.push({activity:e.activity,timestamp:Date.now()})}findAll(e){if(e&&"where"in e&&"object"==typeof e.where&&null!==e.where){let t=e.where;return this.activity.filter((e=>this.matchesQuery(e.activity,t)))}return this.activity}matchesQuery(e,t){for(let[n,i]of Object.entries(t)){let t=e[n];if("object"!=typeof i||null===i||Array.isArray(i)){if(t!==i)return!1}else if(!this.matchesQuery(t,i))return!1}return!0}findAllActivityEventPairs(e,t,n){let i=this.findAll({where:{type:e}}),r=[],a=null;return i.forEach((e=>{let i=e.activity;i.event===t?a=e:i.event===n&&a&&(r.push([a,e]),a=null)})),r}clear(){this.activity=[]}reset(){this.clear(),this.eventHandlers={},this.loggers={}}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter((e=>e!==t)))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some((t=>t.activity.type===e.type&&t.activity.event===e.event))}};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){_(e,t,n[t])}))}return e}const I={type:"xstate.init"},w="xstate.assign";function b(e){return void 0===e?[]:[].concat(e)}function A(e){return function(t){return e===t}}function O(e){return"string"==typeof e?{type:e}:e}function k(e,t){if("string"==typeof e){let n=null==t?void 0:t[e];return n?k(n,t):{type:e}}return"function"==typeof e?{type:e.name||"anonymous",exec:e}:e}function D(e,t,n){let i=t,r=!1;return[e.filter((e=>{if(e.type===w){r=!0;let t=T({},i),a=e.assignment;return"function"==typeof a?t=T({},i,a(i,n)):Object.keys(a).forEach((e=>{let r=a[e];t[e]="function"==typeof r?r(i,n):r})),i=t,!1}return!0})),i,r]}const N=(e,t)=>e.actions.forEach((({exec:n})=>null==n?void 0:n(e.context,t)));function V(e){return{type:w,assignment:e}}var L=class extends C{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){var n;let i=null!=(n=e.context)?n:{},[r,a]=D(b(e.states[e.initial].entry).map((e=>k(e,t.actions))),i,I);return{config:e,initialState:{value:e.initial,actions:r,context:a,matches:A(e.initial)},transition:(n,r)=>{let{value:a,context:s}="string"==typeof n?{value:n,context:i}:n,o=O(r),l=e.states[a];if(null==l?void 0:l.on)for(let n of b(l.on[o.type])){if(void 0===n)break;let{target:i,actions:r=[],cond:c=()=>!0}="string"==typeof n?{target:n}:n,d=void 0===i,u=null!=i?i:a,h=e.states[u];if(c(s,o)){let[e,n,c]=D((d?b(r):[].concat(l.exit||[],r,(null==h?void 0:h.entry)||[]).filter((e=>e))).map((e=>k(e,t.actions))),s,o),u=null!=i?i:a;return{value:u,context:n,actions:e,changed:i!==a||e.length>0||c,matches:A(u)}}}return{value:a,context:s,actions:[],changed:!1,matches:A(a)}}}}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e||null==(t=e.config)?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n="NotStarted",i=new Set,r={send:r=>{"Running"===n&&(N(t=e.transition(t,r),O(r)),i.forEach((e=>e(t))))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){var a;let n="object"==typeof i?i:{context:null!=(a=e.config.context)?a:{},value:i};t={value:n.value,actions:[],context:n.context,matches:A(n.value)}}else t=e.initialState;return n="Running",N(t,I),r},stop:()=>(n="Stopped",i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}},P=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map((e=>parseInt(e,10)));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},M=()=>{let e=S.getInstance(),t=E.getServiceIdentifier();return e.get(t)};const R=(e,t,n)=>{e.emit({type:"storekit-mraid",event:t,data:n})};function x(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var B=(e,t)=>{let n=`context_${t}`;return S.getInstance().has(n)||S.getInstance().bind(n,e),{getValue:()=>S.getInstance().get(n),setValue:e=>{S.getInstance().bind(n,e)}}};const U={advertiser:{appStoreId:void 0,creative:{format:"",formatVersion:"",id:"",type:"",is:{freeForm:!1,adPodding:!1}},domain:"",dsp:"others",headerBidding:!1,mediation:"",disableEndcardCache:!1},device:{ado:!1,countryCode:"",model:"",os:{name:"unknown",version:"0.0.0",is:{iOS:!1,android:!1,amazon:!1,unknown:!0}},skpv:{hasMaskIssue:!1,hasSwipeIssue:!1},type:""},gdpr:{accept:"",body:"",deny:"",requiresConsent:!1,title:""},incentivized:{body:"",close:"",continue:"",title:""},placement:{type:"unknown",id:"",is:{banner:!1,fullscreen:!0,inLine:!1,mrec:!1,rewarded:!1}},platform:{accTests:void 0,nautilusVersion:"0.0.0",observability:!1,observedExperiments:"",sessionId:""},publisher:{id:""},sdk:{version:"0.0.0",is:{version70x:!1,version740:!1,version71xOrAbove:!1,version741OrAbove:!1,version744OrAbove:!1,versionBelow721:!1,versionBelow7:!1,versionBelow71x:!1},supports:{hlsCustomPlayer:!1,omSdk:!1,openPrivacy:!1,orientationProperties:!1,pingUrl:!1,rewardGranted:!1,silent:!1,sko:!1,skpv:!1,videoLength:!1}}};var F,H,W,K,G,j,Y,z,q,$,X,Q=B(U,"AdContext"),Z=e=>{var t,n,i,r,a;let s=Q.getValue();Q.setValue(x(T({},s),{gdpr:{requiresConsent:null!=(t=e.consentRequired)&&t,title:null!=(n=e.consentTitleText)?n:"Ad-Interaction Data Collection",body:null!=(i=e.consentBodyText)?i:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?",accept:null!=(r=e.consentAcceptButtonText)?r:"I consent",deny:null!=(a=e.consentDenyButtonText)?a:"I do not consent"}}))},J=()=>{let e=S.getInstance(),t=y.getServiceIdentifier();return e.get(t)},ee=()=>J(),et=class extends C{isViewable(){return this._isWebViewable&&this._isInternalViewable}setWebViewable(e){this._isWebViewable=e}setInternalViewable(e){this._isInternalViewable=e}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(...e){super(...e),this._isWebViewable=!1,this._isInternalViewable=!0}},en=()=>{let e=S.getInstance(),t=et.getServiceIdentifier();return e.get(t)},ei=()=>J(),er={},ea=[],es=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,eo=Array.isArray;function el(e,t){for(var n in t)e[n]=t[n];return e}function ec(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ed(e,t,n){var i,r,a,s={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?F.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return eu(e,s,i,r,null)}function eu(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++W:r,__i:-1,__u:0};return null==r&&null!=H.vnode&&H.vnode(a),a}function eh(e){return e.children}function ev(e,t){this.props=e,this.context=t}function ep(e,t){if(null==t)return e.__?ep(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?ep(e):null}function eg(e){(!e.__d&&(e.__d=!0)&&K.push(e)&&!em.__r++||G!=H.debounceRendering)&&((G=H.debounceRendering)||j)(em)}function em(){for(var e,t,n,i,r,a,s=1;K.length;)K.length>s&&K.sort(Y),e=K.shift(),s=K.length,e.__d&&(t=void 0,i=(n=e.__v).__e,r=[],a=[],e.__P&&((t=el({},n)).__v=n.__v+1,H.vnode&&H.vnode(t),ey(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?ep(n):i,!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,eT(r,t,a),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));em.__r=0}function ef(e,t,n,i,r,a,s,o,l,c,d){var u,h,v,p,g,m,f=i&&i.__k||ea,S=t.length;for(l=function(e,t,n,i,r){var a,s,o,l,c,d=n.length,u=d,h=0;for(e.__k=Array(r),a=0;a<r;a++)null!=(s=t[a])&&"boolean"!=typeof s&&"function"!=typeof s?(l=a+h,(s=e.__k[a]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?eu(null,s,null,null,null):eo(s)?eu(eh,{children:s},null,null,null):null==s.constructor&&s.__b>0?eu(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,-1!=(c=s.__i=function(e,t,n,i){var r,a,s,o=e.key,l=e.type,c=t[n],d=null!=c&&!(2&c.__u);if(null===c&&null==e.key||d&&o==c.key&&l==c.type)return n;if(i>+!!d)for(r=n-1,a=n+1;r>=0||a<t.length;)if(null!=(c=t[s=r>=0?r--:a++])&&!(2&c.__u)&&o==c.key&&l==c.type)return s;return-1}(s,n,l,u))&&(u--,(o=n[c])&&(o.__u|=2)),null==o||null==o.__v?(-1==c&&(r>d?h--:r<d&&h++),"function"!=typeof s.type&&(s.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,s.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<d;a++)null!=(o=n[a])&&!(2&o.__u)&&(o.__e==i&&(i=ep(o)),function e(t,n,i){var r,a;if(H.unmount&&H.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||eI(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){H.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||ec(t.__e),t.__c=t.__=t.__e=void 0}(o,o));return i}(n,t,f,l,S),u=0;u<S;u++)null!=(v=n.__k[u])&&(h=-1==v.__i?er:f[v.__i]||er,v.__i=u,m=ey(e,v,h,r,a,s,o,l,c,d),p=v.__e,v.ref&&h.ref!=v.ref&&(h.ref&&eI(h.ref,null,v),d.push(v.ref,v.__c||p,v)),null==g&&null!=p&&(g=p),4&v.__u||h.__k===v.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=ep(t)),i.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}(v,l,e):"function"==typeof v.type&&void 0!==m?l=m:p&&(l=p.nextSibling),v.__u&=-7);return n.__e=g,l}function eS(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||es.test(t)?n:n+"px"}function eC(e,t,n,i,r){var a,s;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||eS(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||eS(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(z,"$1")),t=(s=t.toLowerCase())in e||"onFocusOut"==t||"onFocusIn"==t?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=q,e.addEventListener(t,a?X:$,a)):e.removeEventListener(t,a?X:$,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function eE(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=q++;else if(t.t<n.u)return;return n(H.event?H.event(t):t)}}}function ey(e,t,n,i,r,a,s,o,l,c){var d,u,h,v,p,g,m,f,S,C,y,E,_,T,I,w,b,A=t.type;if(null!=t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[o=t.__e=n.__e]),(d=H.__b)&&d(t);e:if("function"==typeof A)try{if(f=t.props,S="prototype"in A&&A.prototype.render,C=(d=A.contextType)&&i[d.__c],y=d?C?C.props.value:d.__:i,n.__c?m=(u=t.__c=n.__c).__=u.__E:(S?t.__c=u=new A(f,y):(t.__c=u=new ev(f,y),u.constructor=A,u.render=ew),C&&C.sub(u),u.props=f,u.state||(u.state={}),u.context=y,u.__n=i,h=u.__d=!0,u.__h=[],u._sb=[]),S&&null==u.__s&&(u.__s=u.state),S&&null!=A.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=el({},u.__s)),el(u.__s,A.getDerivedStateFromProps(f,u.__s))),v=u.props,p=u.state,u.__v=t,h)S&&null==A.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),S&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(S&&null==A.getDerivedStateFromProps&&f!==v&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(f,y),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(f,u.__s,y)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=f,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),E=0;E<u._sb.length;E++)u.__h.push(u._sb[E]);u._sb=[],u.__h.length&&s.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(f,u.__s,y),S&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(v,p,g)}))}if(u.context=y,u.props=f,u.__P=e,u.__e=!1,_=H.__r,T=0,S){for(u.state=u.__s,u.__d=!1,_&&_(t),d=u.render(u.props,u.state,u.context),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[]}else do{u.__d=!1,_&&_(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++T<25);u.state=u.__s,null!=u.getChildContext&&(i=el(el({},i),u.getChildContext())),S&&!h&&null!=u.getSnapshotBeforeUpdate&&(g=u.getSnapshotBeforeUpdate(v,p)),w=d,null!=d&&d.type===eh&&null==d.key&&(w=function e(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:eo(t)?t.map(e):el({},t)}(d.props.children)),o=ef(e,eo(w)?w:[w],t,n,i,r,a,s,o,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&s.push(u),m&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;o&&8==o.nodeType&&o.nextSibling;)o=o.nextSibling;a[a.indexOf(o)]=null,t.__e=o}else{for(b=a.length;b--;)ec(a[b]);e_(t)}else t.__e=n.__e,t.__k=n.__k,e.then||e_(t);H.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=function(e,t,n,i,r,a,s,o,l){var c,d,u,h,v,p,g,m=n.props,f=t.props,S=t.type;if("svg"==S?r="http://www.w3.org/2000/svg":"math"==S?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((v=a[c])&&"setAttribute"in v==!!S&&(S?v.localName==S:3==v.nodeType)){e=v,a[c]=null;break}if(null==e){if(null==S)return document.createTextNode(f);e=document.createElementNS(r,S,f.is&&f),o&&(H.__m&&H.__m(t,a),o=!1),a=null}if(null==S)m===f||o&&e.data==f||(e.data=f);else{if(a=a&&F.call(e.childNodes),m=n.props||er,!o&&null!=a)for(m={},c=0;c<e.attributes.length;c++)m[(v=e.attributes[c]).name]=v.value;for(c in m)if(v=m[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=v;else if(!(c in f)){if("value"==c&&"defaultValue"in f||"checked"==c&&"defaultChecked"in f)continue;eC(e,c,null,v,r)}for(c in f)v=f[c],"children"==c?h=v:"dangerouslySetInnerHTML"==c?d=v:"value"==c?p=v:"checked"==c?g=v:o&&"function"!=typeof v||m[c]===v||eC(e,c,v,m[c],r);if(d)o||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),ef("template"==t.type?e.content:e,eo(h)?h:[h],t,n,i,"foreignObject"==S?"http://www.w3.org/1999/xhtml":r,a,s,a?a[0]:n.__k&&ep(n,0),o,l),null!=a)for(c=a.length;c--;)ec(a[c]);o||(c="value","progress"==S&&null==p?e.removeAttribute("value"):null==p||p===e[c]&&("progress"!=S||p)&&("option"!=S||p==m[c])||eC(e,c,p,m[c],r),c="checked",null!=g&&g!=e[c]&&eC(e,c,g,m[c],r))}return e}(n.__e,t,n,i,r,a,s,l,c);return(d=H.diffed)&&d(t),128&t.__u?void 0:o}function e_(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(e_)}function eT(e,t,n){for(var i=0;i<n.length;i++)eI(n[i],n[++i],n[++i]);H.__c&&H.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){H.__e(e,t.__v)}}))}function eI(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){H.__e(e,n)}}function ew(e,t,n){return this.constructor(e,n)}F=ea.slice,H={__e:function(e,t,n,i){for(var r,a,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},W=0,ev.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=el({},this.state),"function"==typeof e&&(e=e(el({},n),this.props)),e&&el(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),eg(this))},ev.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),eg(this))},ev.prototype.render=eh,K=[],j="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Y=function(e,t){return e.__v.__b-t.__v.__b},em.__r=0,z=/(PointerCapture)$|Capture$/i,q=0,$=eE(!1),X=eE(!0);var eb,eA,eO,ek,eD=0,eN=[],eV=H,eL=eV.__b,eP=eV.__r,eM=eV.diffed,eR=eV.__c,ex=eV.unmount,eB=eV.__;function eU(e,t){eV.__h&&eV.__h(eA,e,eD||t),eD=0;var n=eA.__H||(eA.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function eF(e,t,n){var i=eU(eb++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):eX(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=eA,!eA.__f)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var s=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),a&&a.call(this,e,t,n)||s};eA.__f=!0;var a=eA.shouldComponentUpdate,s=eA.componentWillUpdate;eA.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}s&&s.call(this,e,t,n)},eA.shouldComponentUpdate=r}return i.__N||i.__}function eH(e,t){var n=eU(eb++,3);!eV.__s&&e$(n.__H,t)&&(n.__=e,n.u=t,eA.__H.__h.push(n))}function eW(e){return eD=5,eK((function(){return{current:e}}),[])}function eK(e,t){var n=eU(eb++,7);return e$(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function eG(e,t){return eD=8,eK((function(){return e}),t)}function ej(){for(var e;e=eN.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ez),e.__H.__h.forEach(eq),e.__H.__h=[]}catch(t){e.__H.__h=[],eV.__e(t,e.__v)}}eV.__b=function(e){eA=null,eL&&eL(e)},eV.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),eB&&eB(e,t)},eV.__r=function(e){eP&&eP(e),eb=0;var t=(eA=e.__c).__H;t&&(eO===eA?(t.__h=[],eA.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(ez),t.__h.forEach(eq),t.__h=[],eb=0)),eO=eA},eV.diffed=function(e){eM&&eM(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==eN.push(t)&&ek===eV.requestAnimationFrame||((ek=eV.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),eY&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);eY&&(t=requestAnimationFrame(n))})(ej)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),eO=eA=null},eV.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ez),e.__h=e.__h.filter((function(e){return!e.__||eq(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],eV.__e(n,e.__v)}})),eR&&eR(e,t)},eV.unmount=function(e){ex&&ex(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{ez(e)}catch(e){t=e}})),n.__H=void 0,t&&eV.__e(t,n.__v))};var eY="function"==typeof requestAnimationFrame;function ez(e){var t=eA,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),eA=t}function eq(e){var t=eA;e.__c=e.__(),eA=t}function e$(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function eX(e,t){return"function"==typeof t?t(e):t}var eQ=Symbol.for("preact-signals");function eZ(){if(e3>1)e3--;else{for(var e,t=!1;void 0!==e2;){var n=e2;for(e2=void 0,e4++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&e9(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(e4=0,e3--,t)throw e}}function eJ(e){if(e3>0)return e();e3++;try{return e()}finally{eZ()}}var e0=void 0;function e1(e){var t=e0;e0=void 0;try{return e()}finally{e0=t}}var e2=void 0,e3=0,e4=0,e6=0;function e5(e){if(void 0!==e0){var t=e.n;if(void 0===t||t.t!==e0)return t={i:0,S:e,p:e0.s,n:void 0,t:e0,e:void 0,x:void 0,r:t},void 0!==e0.s&&(e0.s.n=t),e0.s=t,e.n=t,32&e0.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=e0.s,t.n=void 0,e0.s.n=t,e0.s=t),t}}function e7(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched}function e8(e,t){return new e7(e,t)}function e9(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function te(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function tt(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function tn(e,t){e7.call(this,void 0),this.x=e,this.s=void 0,this.g=e6-1,this.f=4,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched}function ti(e){var t=e.u;if(e.u=void 0,"function"==typeof t){e3++;var n=e0;e0=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,tr(e),t}finally{e0=n,eZ()}}}function tr(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,ti(e)}function ta(e){if(e0!==this)throw Error("Out-of-order effect");tt(this),e0=e,this.f&=-2,8&this.f&&tr(this),eZ()}function ts(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function to(e){var t=new ts(e);try{t.c()}catch(e){throw t.d(),e}var n=t.d.bind(t);return n[Symbol.dispose]=n,n}e7.prototype.brand=eQ,e7.prototype.h=function(){return!0},e7.prototype.S=function(e){var t=this,n=this.t;n!==e&&void 0===e.e&&(e.x=n,this.t=e,void 0!==n?n.e=e:e1((function(){var e;null==(e=t.W)||e.call(t)})))},e7.prototype.U=function(e){var t=this;if(void 0!==this.t){var n=e.e,i=e.x;void 0!==n&&(n.x=i,e.e=void 0),void 0!==i&&(i.e=n,e.x=void 0),e===this.t&&(this.t=i,void 0===i&&e1((function(){var e;null==(e=t.Z)||e.call(t)})))}},e7.prototype.subscribe=function(e){var t=this;return to((function(){var n=t.value,i=e0;e0=void 0;try{e(n)}finally{e0=i}}))},e7.prototype.valueOf=function(){return this.value},e7.prototype.toString=function(){return this.value+""},e7.prototype.toJSON=function(){return this.value},e7.prototype.peek=function(){var e=e0;e0=void 0;try{return this.value}finally{e0=e}},Object.defineProperty(e7.prototype,"value",{get:function(){var e=e5(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(e4>100)throw Error("Cycle detected");this.v=e,this.i++,e6++,e3++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{eZ()}}}}),tn.prototype=new e7,tn.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===e6))return!0;if(this.g=e6,this.f|=1,this.i>0&&!e9(this))return this.f&=-2,!0;var e=e0;try{te(this),e0=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return e0=e,tt(this),this.f&=-2,!0},tn.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}e7.prototype.S.call(this,e)},tn.prototype.U=function(e){if(void 0!==this.t&&(e7.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},tn.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(tn.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=e5(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),ts.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},ts.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,ti(this),te(this),e3++;var e=e0;return e0=this,ta.bind(this,e)},ts.prototype.N=function(){2&this.f||(this.f|=2,this.o=e2,e2=this)},ts.prototype.d=function(){this.f|=8,1&this.f||tr(this)},ts.prototype.dispose=function(){this.d()};var tl,tc,td=[],tu=[];function th(e,t){H[e]=t.bind(null,H[e]||function(){})}function tv(e){tc&&tc(),tc=e&&e.S()}function tp(e){var t=this,n=e.data,i=tg(n);i.value=n;var r=eK((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}var n=new tn((function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""}),void 0),r=new tn((function(){var e;return!Array.isArray(n.value)&&(null==(e=n.value)||null!=e.constructor)}),void 0),a=to((function(){if(this.N=ty,r.value){var e=n.value;t.__v&&t.__v.__e&&3===t.__v.__e.nodeType&&(t.__v.__e.data=e)}})),s=t.__$u.d;return t.__$u.d=function(){a(),s.call(this)},[r,n]}),[]),a=r[0],s=r[1];return a.value?s.peek():s.value}function tg(e,t){return eK((function(){return e8(e,t)}),[])}to((function(){tl=this.N}))(),tp.displayName="_st",Object.defineProperties(e7.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:tp},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),th("__b",(function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof e7&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)})),th("__r",(function(e,t){if(t.type!==eh){tv();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u)&&(to((function(){n=this})),n.c=function(){r.__$f|=1,r.setState({})},r.__$u=i=n)),tv(i)}e(t)})),th("__e",(function(e,t,n,i){tv(),e(t,n,i)})),th("diffed",(function(e,t){if(tv(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var s in a){var o=a[s];void 0===o||s in i||(o.d(),a[s]=void 0)}else a={},n.U=a;for(var l in i){var c=a[l],d=i[l];void 0===c?(c=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=e8(n);return{o:function(e,t){a.value=e,i=t},d:to((function(){this.N=ty;var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}(n,l,d,r),a[l]=c):c.o(d,r)}}}e(t)})),th("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var s=t.__c;if(s){var o=s.__$u;o&&(s.__$u=void 0,o.d())}}e(t)})),th("__h",(function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)})),ev.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&void 0!==n.s;for(var r in t)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var a=2&this.__$f;if(!(i||a||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var s in e)if("__source"!==s&&e[s]!==this.props[s])return!0;for(var o in this.props)if(!(o in e))return!0;return!1};var tm="undefined"==typeof requestAnimationFrame?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(i),e()},n=setTimeout(t,35),i=requestAnimationFrame(t)},tf=function(e){queueMicrotask((function(){queueMicrotask(e)}))};function tS(){eJ((function(){for(var e;e=td.shift();)tl.call(e)}))}function tC(){1===td.push(this)&&(H.requestAnimationFrame||tm)(tS)}function tE(){eJ((function(){for(var e;e=tu.shift();)tl.call(e)}))}function ty(){1===tu.push(this)&&(H.requestAnimationFrame||tf)(tE)}function t_(e){var t=eW(e);t.current=e,eH((function(){return to((function(){return this.N=tC,t.current()}))}),[])}var tT=class extends C{setMutedSignal(e){this.mutedSignal.value=e}setInitialMutedValue(e){this.initialMutedValue=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}isSilent(){return this.silent}setSilent(e,t){this.silent=e,t&&this.initialMutedValue||this.setMutedSignal(e)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=e8(!1),this.silent=void 0,this.initialMutedValue=void 0}},tI=()=>{let e=S.getInstance(),t=tT.getServiceIdentifier();return e.get(t)},tw=(e,t,n=en(),i=ei(),r=tI(),a=Q.getValue())=>{switch(t.event){case"viewableChange":{let{isViewable:e}=t.data;n.setWebViewable(e),i.emit({type:"viewability",event:e?"maximized":"minimized"});break}case"silentChange":{let{isSilent:e}=t.data;if(e===r.isSilent())return;r.setSilent(e,a.device.os.is.iOS)}}},tb=class extends C{open(e){this.executeSDKCommand("open",{url:e})}close(){this.executeSDKCommand("close")}setOrientationProperties(e){this.executeSDKCommand("setOrientationProperties",T({},e))}prepareStoreOverlayView(e,t){this.executeSDKCommand("prepareStoreOverlayView",T({appStoreId:e},t))}presentStoreOverlayView(e,t){this.executeSDKCommand("presentStoreOverlayView",T({appStoreId:e},t))}dismissStoreOverlayView(e){let t={};e&&(t.appStoreId=e),this.executeSDKCommand("dismissStoreOverlayView",t)}presentStoreView(e){this.executeSDKCommand("presentStoreView",{appStoreId:e})}prepareStoreView(e){this.executeSDKCommand("prepareStoreView",{appStoreId:e})}openAppStore(e,t){this.executeSDKCommand("openAppStore",T({mode:e},t))}notifySDK(e){window.location.href=e}executeSDKCommand(e,t={}){if(!this.sdkReadyForCommand)return;let n=`mraid://${e}`,i=Object.entries(t);for(let e=0;e<i.length;e++){let[t,r]=i[e];n+=(0===e?"?":"&")+encodeURIComponent(t)+`=${encodeURIComponent(r)}`}this.sdkCommandInProgress?this.sdkCommandQueue.push(n):(this.sdkCommandInProgress=!0,this.notifySDK(n))}notifyError(e,t="",n=!1){this.executeSDKCommand("error",{code:e,errorMessage:t,fatal:n})}notifyTPAT(e){this.executeSDKCommand("tpat",{event:e})}consentAction(e){this.executeSDKCommand("consentAction",{event:e})}notifyEventValuePairEvent(e,t){this.executeSDKCommand("actionWithValue",{event:e,value:(t||"null").toString()})}openPrivacy(e){Q.getValue().sdk.supports.openPrivacy?this.executeSDKCommand("openPrivacy",{url:e}):this.open(e)}notifySuccessfulViewAd(){this.executeSDKCommand("successfulView")}getAvailableDiskSpace(){this.executeSDKCommand("getAvailableDiskSpace")}closeSilentModeMonitor(){this.executeSDKCommand("closeSilentModeMonitor")}pingUrl(e,t,n=!1,i,r){let a={requestType:e,url:t,retry:n};i&&(a.requestData=i),r&&(a.headers=r),this.executeSDKCommand("pingUrl",a)}setSdkReadyForCommand(e){this.sdkReadyForCommand=e}setSdkCommandInProgress(e){this.sdkCommandInProgress=e}getSdkCommandQueue(){return this.sdkCommandQueue}notifyReadyEventForSdk6(){if(this.sdk6Tokens&&this.sdk6Properties){let e=window.vungle.mraidBridge;e.notifyReadyEvent(this.sdk6Tokens),e.notifyPropertiesChange(this.sdk6Properties)}}initSdk6(){var e,t,n,i,r,a,s,o,l,c;this.sdk6Tokens=null==(n=window.vungle)||null==(t=n.mraidBridgeExt)||null==(e=t.getReplacementTokens)?void 0:e.call(t);let d=null==(i=this.sdk6Tokens)?void 0:i.SDK_VERSION;if(d&&new P(d).isLessThan(new P("7.0.0"))){let e=window.vungle.mraidExt,t=window.vungle.mraid,n=e.getConsentRequired?e:t;this.sdk6Properties={consentRequired:null==(r=n.getConsentRequired)?void 0:r.call(n),consentTitleText:null==(a=n.getConsentTitleText)?void 0:a.call(n),consentBodyText:null==(s=n.getConsentBodyText)?void 0:s.call(n),consentAcceptButtonText:null==(o=n.getConsentAcceptButtonText)?void 0:o.call(n),consentDenyButtonText:null==(l=n.getConsentDenyButtonText)?void 0:l.call(n),isViewable:null==(c=t.isViewable)?void 0:c.call(t)},Z(this.sdk6Properties)}}exposeMraidBridges(){var e,t;let n,i,r,a,s;window.vungle={mraidBridge:(e=this.tokenService,t=this.mraidEventReportingService,{notifyPropertiesChange:(n=this,(e,i)=>{void 0!==e.isViewable&&t.emit({type:"mraid-event",event:"viewableChange",data:{isViewable:e.isViewable}}),((e,t,n,i=Q.getValue())=>{if(void 0===t.isSilent)return;let r="iOS"===t.os||i.device.os.is.iOS;r&&e||n.emit({type:"mraid-event",event:"silentChange",fireOnlyOnce:r,data:{isSilent:t.isSilent}})})(i,e,t),!0===i&&(e.os&&e.sdkVersion&&((e,t)=>{let n=e.toLowerCase(),i=new P(t);return"ios"===n&&i.isGreaterThanOrEqualTo(new P("7.0.0"))&&i.isLessThan(new P("7.3.0"))})(e.os,e.sdkVersion)&&n.setSdkCommandInProgress(!0),Z(e),n.notifySDK("mraid://propertiesChangeCompleted"))}),notifyReadyEvent:(i=this,n=>{i.setSdkReadyForCommand(!0),n?e.replacementTokens=n:i.notifySuccessfulViewAd(),t.emit({type:"mraid-event",event:"ready"})}),notifyCommandComplete:(r=this,()=>{let e=r.getSdkCommandQueue();if(e.length){let t=e.shift();r.notifySDK(t)}else r.setSdkCommandInProgress(!1)})}),mraidBridgeExt:(a=this.storeKitMraidReportingService,s=this.mraidEventReportingService,{notifyPresentStoreKitViewFinished:e=>{R(a,"finished",{mode:e})},notifyPresentStoreKitViewSuccess:e=>{R(a,"visible",{mode:e})},notifyPresentStoreKitViewFailed:e=>{R(a,"failed",{mode:e})},notifyPrepareStoreViewSuccess:()=>{R(a,"skpv6-success")},notifyPresentStoreViewFinished:()=>{R(a,"skpv6-finished")},notifyPrepareStoreOverlayViewSuccess:()=>{R(a,"sko6-success")},notifyPresentStoreOverlayViewFinished:()=>{R(a,"sko6-finished")},notifyPresentStoreOverlayViewFailed:()=>{R(a,"sko6-failed")},notifyPresentStoreOverlayViewVisible:()=>{R(a,"sko6-visible")},requestMRAIDClose:()=>{s.emit({type:"mraid-event",event:"custom-close"})}})}}addMraidEventHandler(){this.mraidEventReportingService.addEventHandler("mraid-event",tw)}static getServiceIdentifier(){return"MraidServiceInterface"}constructor(e=M(),t=ee(),n=J()){super(),this.tokenService=e,this.mraidEventReportingService=t,this.storeKitMraidReportingService=n,this.sdkReadyForCommand=!1,this.sdkCommandInProgress=!1,this.sdkCommandQueue=[],this.initSdk6(),this.exposeMraidBridges(),this.addMraidEventHandler()}},tA=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval((()=>{this.callable()}),this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},tO=class extends C{getNewInterval(e,t){let n=new tA(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach((e=>{e.pause()}))}startAll(){this.paused=!1,this.intervals.forEach((e=>{e.start()}))}destroyAll(){this.intervals.forEach((e=>{e.destroy()})),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},tk=class{getId(){return this.id}start(){return!this.timerService.isPaused()&&!this.isDestroyed&&void 0===this.id&&(this.startTime=Date.now(),this.id=window.setTimeout((()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()}),this.remainingTime),!0)}pause(){if(void 0!==this.id&&void 0!==this.startTime){clearTimeout(this.id);let e=Date.now()-this.startTime;this.elapsed+=e,this.remainingTime-=e}this.startTime=void 0,this.id=void 0}destroy(){if(void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),void 0!==this.startTime){let e=Date.now();this.elapsed+=e-this.startTime,this.startTime=void 0}this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)}asPromise(){return new Promise(((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()}))}elapsedTime(){return void 0!==this.startTime?this.elapsed+(Date.now()-this.startTime):this.elapsed}restartTimer(){return this.pause(),this.elapsed=0,this.remainingTime=this.delay,this.start()}constructor(e,t,n){this.delay=e,this.timerService=t,this.callable=n,this.remainingTime=e,this.elapsed=0,this.isDestroyed=!1}},tD=class extends C{destroyAll(){this.timers.forEach((e=>{e.destroy()})),this.timers=[]}getNewTimer(e,t){let n=null==t?new tk(e,this):new tk(e,this,t);return this.timers.push(n),n}pauseAll(){this.paused=!0,this.timers.forEach((e=>{e.pause()}))}standby(){0===this.stash.length&&this.timers.forEach((e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))}))}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.paused=!1,this.timers.forEach((e=>{e.start()}))}isPaused(){return this.paused}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(e=!1){super(),this.paused=e,this.timers=[],this.stash=[]}};const tN="Unable to load img resource",tV="video load fail after retry",tL="notify fatal error after video load fail",tP="video load fail with no retry",tM="video does not play after 10s",tR="video failed to play",tx=[tV,tL,tP,tM,"video play fail after 30s",tR,tN];var tB=B({scene:void 0},"SceneContext"),tU=()=>{var e;return null==(e=tB.getValue())?void 0:e.scene},tF=()=>J(),tH=(e,t=tF())=>{let n=t.findAllActivityEventPairs("viewability","minimized","maximized"),i=0;n.forEach((e=>{i+=e[1].timestamp-e[0].timestamp}));let r=t.findAllActivityEventPairs("store-kit-product-view","appStoreOpen","appStoreClose"),a=0;return r.forEach((e=>{a+=e[1].timestamp-e[0].timestamp})),Date.now()-e-i+a},tW=class extends C{static getServiceIdentifier(){return"NetworkRequestServiceInterface"}},tK=()=>S.getInstance().get(tW.getServiceIdentifier()),tG=class extends C{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(this.tokenService,this.networkRequestService(),this.adContext.getValue(),this.reportingService,this.injectedGetCurrentScene,this.injectedGetAdDuration),this.isObserved=this.observability.isObserved()}pushEvent(e){var t,n;if(this.isObserved){if(Array.isArray(e)){let n=e.filter((e=>e.name&&this.singleEventsToAccept.includes(e.name)));return void(n.length>0&&(null==(t=this.observability)||t.pushManyEvents(n)))}if(e.name&&this.singleEventsToAccept.includes(e.name)){let t=e.name;null==(n=this.observability)||n.pushEvent(t,e)}}}pushError(e,t){var n;this.isObserved&&(null==(n=this.observability)||n.pushError(e,x(T({},t),{error_source:this.getErrorSource(e,t)})))}getErrorSource(e,t){var n,i;let r=null!=(n=null==e?void 0:e.message)?n:e,a=null!=(i=null==e?void 0:e.error_source)?i:"template";return(null==t?void 0:t.error_source)&&(a=t.error_source),(tx.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a="resource"),a}constructor(e=M(),t=tK,n=Q,i=tF(),r=tU,a=tH,s=["ad-close","ad-feedback","ad-load","ad-load-complete","ad-start","app-store-duration","click-metrics","cta","engagement-is-used","frustration-clicks","fsc","grant-reward","hls-level-switched","hls-not-supported","hls-video-stalled","impression","inactivity-observed","privacy-cta","scene-end","scene-start","template-error","unknown-mraid-command","video-skip-to-endcard","video-start","web-vitals-first-contentful-paint","web-vitals-interaction-to-next-paint","web-vitals-largest-contentful-paint","web-vitals-time-to-first-byte"]){super(),this.tokenService=e,this.networkRequestService=t,this.adContext=n,this.reportingService=i,this.injectedGetCurrentScene=r,this.injectedGetAdDuration=a,this.singleEventsToAccept=s,this.isObserved=!1}},tj=()=>{let e=S.getInstance(),t=tb.getServiceIdentifier();return e.get(t)},tY=()=>J(),tz=class{getLogger(e){return this.wrappedService.getLogger(e)}emit(e){this.wrappedService.emit(e)}addEventHandler(e,t){this.wrappedService.addEventHandler(e,t)}removeEventHandler(e,t){this.wrappedService.removeEventHandler(e,t)}getEventHandlers(e){return this.wrappedService.getEventHandlers(e)}hasExistingEvent(e){return this.wrappedService.hasExistingEvent(e)}save(e){this.wrappedService.save(e)}clear(){this.wrappedService.clear()}reset(){this.wrappedService.reset()}findAll(e){return this.wrappedService.findAll(e)}findAllActivityEventPairs(e,t,n){return this.wrappedService.findAllActivityEventPairs(e,t,n)}constructor(e){this.wrappedService=e}},tq=class extends tz{emit(e,t){let n=this.getReportableEvent(e,t);this.wrappedService.emit(n)}getEventCount(e,t=["name"]){let n=this.getReportableEvent(e);return this.wrappedService.findAll({where:{type:"observability"}}).filter((e=>{let{activity:i}=e;return!!i.data&&t.every((e=>this.isEventMatch(i.data,n.data,e)))})).length}getReportableEvent(e,t){return"observability"===e.type&&null!=e.event?e:{type:"observability",event:"event",data:"string"==typeof e?{name:e,metric:t}:e}}isEventMatch(e,t,n){return Array.isArray(e)?e.some((e=>Array.isArray(t)?t.some((t=>e[n]===t[n])):e[n]===t[n])):Array.isArray(t)?t.some((t=>(null==e?void 0:e[n])===t[n])):(null==e?void 0:e[n])===t[n]}},t$=e=>new tq(null!=e?e:J()),tX=class extends C{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null==(t=e.error)?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some((e=>-1!==t.indexOf(e)))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.is_fatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null==(t=this.currentScene())?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,s=null!=(i=null==(n=e.data)||null==(t=n.content)?void 0:t.message)?i:"";a&&!this.isIgnoredError(s)&&(e.data.content.error_source="playable",this.send({type:"error-logging",event:"playable",data:{error:e.data.content,scene_id:null==(r=tU())?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:"unhandledRejection",data:{error:{message:null!=(n=null==(t=e.reason)?void 0:t.toString())?n:"Unhandled rejection error",error_source:"template"}}}),this.observabilityEventReportingService.emit("template-error","template-error")}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);return void this.sendImageError(e,n)}let n={type:"error-logging",event:"exception",data:{error:{message:this.getMessageFromErrorEvent(e),error_source:"template",resource_url:null==e?void 0:e.filename}}};this.send(n),this.observabilityEventReportingService.emit("template-error","template-error")}getErrorCode(e){var t;let n=null==(t=e.data)?void 0:t.resource_type;return"image"===n?1e4:"video"===n?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:"resource",data:{resource_type:"image",error:{resource_url:t,error_source:"resource",message:tN}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n;let i=this.getErrorCode(e),r=null!=(n=null==(t=e.data.error)?void 0:t.message)?n:"Unknown error";e.data.resource_url&&(r=`${r}, resource URL: ${e.data.resource_url}`),this.mraidService.notifyError(i,r,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=tj(),t=tY(),n=t$(),i=tU){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.observabilityEventReportingService=n,this.currentScene=i}},tQ={};function tZ(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(tQ=tZ).default=tZ;class tJ extends Error{}var t0=(e,t=1e4,n=new tJ("Timed out waiting!"))=>new Promise(((i,r)=>{let a=t=>{var s;let o=e();((s=tQ)&&s.__esModule?s.default:s)(o)?o.then((e=>{e?i(e):t<0?r(n):setTimeout((()=>a(t-100)),100)})):o?i(o):t<0?r(n):setTimeout((()=>a(t-100)),100)};setTimeout((()=>a(t-100)),100)})),t1=class extends tz{emit(e){let t=this.getReportableEvent(e);t&&this.wrappedService.emit(t)}getEventCount(e){let t=this.getReportableEvent(e);return t?this.wrappedService.findAll({where:{type:"scene-event",event:t.event,data:{scene_type:t.data.scene_type}}}).filter((e=>""===t.data.scene_id||e.activity.data.scene_id===t.data.scene_id)).length:0}getReportableEvent(e){if("scene-event"===e.type&&null!=e.event)return e;let t=this.injectedGetCurrentScene();return t?{type:"scene-event",event:e,data:{scene_id:t.getId(),scene_type:t.getSceneType()}}:void 0}constructor(e,t=tU){super(e),this.injectedGetCurrentScene=t}},t2=(e,t=tU)=>new t1(null!=e?e:J(),t);class t3 extends C{addEventStreams(e){var t;let n=e.getId();if((null==(t=this.sceneEventStreams[n])?void 0:t.hasCompleted)&&!e.isChild())throw Error("Cannot add more event streams after completion");let i=e.getEventStreams(),r={eventStreams:i,results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=r,0!==Object.keys(i).length?Object.keys(r.eventStreams).forEach((e=>{r.eventStreams[e].subscribe({next:t=>{r.results[e]=t},error:t=>{r.errors[e]=t},complete:()=>{r.completed[e]=!0}})})):r.hasCompleted=!0}end(e){this.reportingService.emit({type:"scene-event",event:"sceneEnd",data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:"sceneStart",data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}subscribeAll(e){let t=e.getId(),n=this.sceneEventStreams[t];return n.hasCompleted?Promise.resolve({}):new Promise((e=>{t0((()=>Object.keys(n.eventStreams).every((e=>!!n.errors[e]||n.completed[e]))),t3.MAX_WAIT_TIME,Error(`Event streams for scene ${t} have not completed successfully`)).then((()=>{n.hasCompleted=!0,e(n.results)}))}))}haveAllCompleted(){return 0===Object.keys(this.sceneEventStreams).length||Object.keys(this.sceneEventStreams).every((e=>this.sceneEventStreams[e].hasCompleted))}reset(){this.sceneEventStreams={}}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=t2()){super(),this.reportingService=e,this.sceneEventStreams={}}}t3.MAX_WAIT_TIME=2e3;var t4=class extends C{async addRecord(){}async get(){return Promise.resolve(void 0)}async getAllRecords(){return Promise.resolve([])}async clearStore(){}async deleteExpiredRecords(){}},t6=class extends t4{static getServiceIdentifier(){return"UrlCacheServiceInterface"}};class t5{static async hasSufficientSpace(){var e;if(!(null==(e=window.navigator.storage)?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>=5e6}static async shouldInitIndexedDB(){return!!window.indexedDB&&t5.hasSufficientSpace()}static handleUpgrade(e,t){let n=e.target.result,{name:i,keyPath:r,index:a}=t;if(!n.objectStoreNames.contains(i)){let e=n.createObjectStore(i,{keyPath:r});a&&e.createIndex(a.name,a.keyPath,a.options)}}static convertToError(e){var t;return Error(null!=(t=null==e?void 0:e.message)?t:"Unknown error from IndexedDB")}static async open(e){if(await t5.shouldInitIndexedDB())return new Promise(((t,n)=>{let{dbName:i,objectStore:r,dbVersion:a}=e,s=window.indexedDB.open(i,a);s.onupgradeneeded=e=>t5.handleUpgrade(e,r),s.onsuccess=e=>t(e.target.result),s.onerror=e=>n(t5.convertToError(e.target.error))})).catch((()=>{}))}reportError(e){let t=e instanceof Error?e.message:String(e);this.errorLoggingReportingService.emit({type:"error-logging",event:"exception",data:{error:{message:t}}})}async withTransaction(e,t,n){if(!this.db.objectStoreNames.contains(this.storeName))return n;try{let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);return await new Promise(((e,r)=>{n.onerror=()=>r(t5.convertToError(n.error)),t(i).then((t=>e(t))).catch((e=>r(t5.convertToError(e))))}))}catch(e){return this.reportError(e),n}}handleCursor(e,t,n,i){let r=e.target.result;if(r)if(r.value.createDate<t){let e=r.delete();e.onsuccess=()=>r.continue(),e.onerror=()=>i(t5.convertToError(e.error))}else r.continue();else n()}async deleteExpiredRecords(){let e=Date.now()-864e5*this.expiry;return this.withTransaction("readwrite",(t=>new Promise(((n,i)=>{let r=t.openCursor();r.onsuccess=t=>this.handleCursor(t,e,n,i),r.onerror=()=>i(t5.convertToError(r.error))}))),void 0)}async addRecord(e){return e.createDate||(e.createDate=Date.now()),this.withTransaction("readwrite",(async t=>{let n=t.put(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=()=>t(t5.convertToError(n.error))}))}),void 0)}async get(e){return this.withTransaction("readonly",(async t=>{let n=t.get(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(t5.convertToError(n.error))}))}),void 0)}async getAllRecords(){return this.withTransaction("readonly",(async e=>new Promise(((t,n)=>{let i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(t5.convertToError(i.error))}))),[])}async clearStore(){return this.withTransaction("readwrite",(async e=>{let t=e.clear();return new Promise(((e,n)=>{t.onsuccess=()=>e(),t.onerror=()=>n(t5.convertToError(t.error))}))}),void 0)}constructor(e,t,n=tY()){this.db=e;let{objectStore:i}=t;this.storeName=i.name,this.keyPath=i.keyPath,this.expiry=i.expiry,this.errorLoggingReportingService=n}}var t7=class{async getIndexedDatabaseService(){return this.indexedDatabaseService}constructor(e,t,n){this.indexedDatabaseService=t5.open(e).then((i=>i?new t5(i,e,t):new n)).then((e=>e.deleteExpiredRecords().then((()=>e))))}},t8=class extends C{async addRecord(e){return(await this.indexedDatabaseService).addRecord(e)}async get(e){return(await this.indexedDatabaseService).get(e)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async clearStore(){let e=await this.indexedDatabaseService;await e.clearStore()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UrlCacheServiceInterface"}constructor(e={dbName:"viewMaster_indexed_db_urlCache",dbVersion:1,objectStore:{name:"urlCache",keyPath:"url",expiry:30}},t=tY()){super(),this.indexedDatabaseService=new t7(e,t,t6).getIndexedDatabaseService()}},t9=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")),ne=class extends C{decode(e){try{let t=(e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e})(t9(e));return(e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;\n]+?)(\n|;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,((e,t,n)=>`mraid.open(${t})${n}`)):e})(t).replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)")}catch(e){return this.errorLoggingService.emit({type:"error-logging",event:"exception",data:{error:{message:"Failed to decode endcard"}}}),""}}static getServiceIdentifier(){return"HTMLDecoderServiceInterface"}constructor(e=tY()){super(),this.errorLoggingService=e}},nt=()=>S.getInstance().get(t8.getServiceIdentifier()),nn=class extends C{add(e,t,n){var i;(null==(i=this.currentItem)?void 0:i.url)===e||this.queue.some((t=>t.url===e))||this.queue.push({url:e,sceneID:t,callback:n}),this.processQueue()}async processQueue(){var e,t,n,i,r,a,s,o,l;if(!this.isPaused&&void 0===this.currentItem&&(this.currentItem=this.queue.shift(),this.currentItem)){if(void 0!==await this.urlCacheService.get(this.currentItem.url))return this.currentItem=void 0,void this.processQueue();try{this.currentItem.filePromise=new Promise((e=>{this.currentItem&&(this.currentItem.resolveFile=e)})),this.currentItem.fetch=fetch(this.currentItem.url);let s=await this.currentItem.fetch,o=await s.arrayBuffer(),l={url:this.currentItem.url,data:new Uint8Array(o),mimeType:null!=(a=null==(e=s.headers)?void 0:e.get("Content-Type"))?a:void 0,createDate:Date.now()};this.urlCacheService.addRecord(l);let c={data:l.data,mimeType:l.mimeType};null==(n=this.currentItem)||null==(t=n.resolveFile)||t.call(n,c),this.completedItems[this.currentItem.url]=c,null==(r=this.currentItem)||null==(i=r.callback)||i.call(r,c)}catch(e){this.errorLoggingReportingService.emit({type:"error-logging",event:"resource",data:{error:{resource_url:null==(s=this.currentItem)?void 0:s.url,error_source:"resource",message:`Error downloading in smart download queue: ${e}`}}}),null==(l=this.currentItem)||null==(o=l.resolveFile)||o.call(l,void 0)}finally{this.currentItem=void 0,this.processQueue()}}}pause(){this.isPaused=!0}resume(){this.isPaused&&(this.isPaused=!1,this.processQueue())}isQueuePaused(){return this.isPaused}getCurrentUrl(){var e;return null==(e=this.currentItem)?void 0:e.url}async awaitDownload(e){var t,n;return(null==(t=this.currentItem)?void 0:t.url)===e?null==(n=this.currentItem)?void 0:n.filePromise:void 0}clearScene(e){this.queue=this.queue.filter((t=>t.sceneID!==e))}getCompletedItem(e){return this.completedItems[e]}static getServiceIdentifier(){return"SmartDownloadQueueServiceInterface"}constructor(e=nt(),t=tY()){super(),this.urlCacheService=e,this.errorLoggingReportingService=t,this.queue=[],this.completedItems={},this.isPaused=!0}},ni=((i={})[i.OFF=0]="OFF",i[i.SKO=1]="SKO",i[i.SKPV=2]="SKPV",i[i.STATIC_URL=3]="STATIC_URL",i);const nr=()=>J(),na=()=>J();var ns=()=>window.outerHeight<window.outerWidth?"landscape":"portrait",no=(e,t,n,i)=>{let r=((e,t,n)=>{switch(e.event){case"maximized":return n.isViewable()?{type:"MAXIMIZE",hasHlsVideo:t}:void 0;case"minimized":return{type:"MINIMIZE"};case"internal-minimized":return{type:"PAUSE"};case"internal-maximized":return n.isViewable()?{type:"PLAY"}:void 0}})(e,t,i);r&&n.send(r)},nl=class extends C{setStopStreamingVideo(e){this.stopStreamingVideo=e}setVideoContext(e,t,n){this.videoScene=e,this.videoElement=t,this.videoInterpreter=n}getVideoScene(){return this.videoScene}getVideoElement(){return this.videoElement}getVideoInterpreter(){return this.videoInterpreter}getFullScreenCallToActionEventHandlerProps(){var e;return this.videoScene?{fullScreenClickConfig:x(T({},this.videoScene.getFullScreenClickConfig()),{enabled:!0,target:null!=(e=this.videoScene.getFullScreenClickConfig().target)?e:ni.SKPV}),trackingEventMapConfig:x(T({},this.videoScene.getTrackingEventMapConfig()),{enabled:!0}),sceneId:this.videoScene.getId()}:{}}clickHandler(){var e;this.fullScreenCallToActionReportingService.emit({type:"fsc",event:"fsc",data:{scene_id:null==(e=this.videoScene)?void 0:e.getId()}})}videoAdViewableChange(e,t){this.videoScene&&this.videoInterpreter&&no(t,"hls"===this.videoScene.videoType,this.videoInterpreter,this.viewableService)}isPortrait(){return"portrait"===ns()}closeVideo(){var e,t;null==(e=this.stopStreamingVideo)||e.call(this),null==(t=this.videoInterpreter)||t.send({type:"CLOSE"}),this.setVideoContext(void 0,null)}static getServiceIdentifier(){return"PictureInPictureServiceInterface"}constructor(e=na(),t=en()){super(),this.fullScreenCallToActionReportingService=e,this.viewableService=t,this.videoElement=null}};const nc=()=>J(),nd=()=>J(),nu=()=>J();var nh=(e=tU,t=nc())=>{var n,i,r,a;let s=null==(n=e())?void 0:n.getId();return null!=(a=null==(r=t.findAll({where:{type:"video",event:"bandwidthEstimation",data:{scene_id:s}}}).pop())||null==(i=r.activity.data)?void 0:i.bwe)?a:-1},nv=class extends t4{static getServiceIdentifier(){return"UserActivityServiceInterface"}},np=class extends C{findObservabilityActivityEvent(e){return t=>{var n;let i=t.activity;if("observability"===(null==i?void 0:i.type)&&(Array.isArray(i.data)&&i.data.some((t=>t.name===e))||(null==(n=i.data)?void 0:n.name)===e))return i}}getTypedReportingService(){return this.reportingService}getAdStartTime(){let e=this.getTypedReportingService().findAll({where:{type:"observability"}}).find(this.findObservabilityActivityEvent("ad-start"));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.getTypedReportingService().findAll({where:{type:"video",event:"close"}}).find((e=>{var t;return null==(t=e.activity.data)?void 0:t.maximum_viewing_time}));if(null==t||null==(e=t.activity.data)?void 0:e.maximum_viewing_time)return Math.floor(1e3*t.activity.data.maximum_viewing_time)}getEndcardSceneEndActivity(){return this.getTypedReportingService().findAll({where:{type:"observability",event:"event",data:{name:"scene-end",scene_type:"endcard"}}}).find((e=>!!e.activity.data&&!Array.isArray(e.activity.data)))}getEndcardInteractions(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null==(t=n.activity)||null==(e=t.data)?void 0:e.click_count}getEndcardDuration(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null==(t=n.activity)||null==(e=t.data)?void 0:e.duration}getVideoCloseShown(){let e=this.getTypedReportingService().findAll({where:{type:"observability"}}),t=this.getTypedReportingService().findAll({where:{type:"scene-event",event:"closeButtonShow",data:{scene_type:"video"}}}),n=e.find(this.findObservabilityActivityEvent("video-start")),i=t.find((e=>{var t;return"scene-event"===e.activity.type&&"closeButtonShow"===e.activity.event&&"video"===(null==(t=e.activity.data)?void 0:t.scene_type)}))||t[0];if(n&&i)return i.timestamp-n.timestamp}getEndcardCloseShown(){let e=this.getTypedReportingService().findAll({where:{type:"scene-event",event:"sceneStart",data:{scene_type:"endcard"}}}),t=this.getTypedReportingService().findAll({where:{type:"scene-event",event:"closeButtonShow",data:{scene_type:"endcard"}}}),n=e.find((e=>{var t;return"scene-event"===e.activity.type&&"sceneStart"===e.activity.event&&"endcard"===(null==(t=e.activity.data)?void 0:t.scene_type)}))||e[0],i=t.find((e=>{var t;return"scene-event"===e.activity.type&&"closeButtonShow"===e.activity.event&&"endcard"===(null==(t=e.activity.data)?void 0:t.scene_type)}))||t[0];if(n&&i)return i.timestamp-n.timestamp}getEndcardInteractionAfterCloseButton(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null==(t=n.activity)||null==(e=t.data)?void 0:e.interaction_after_close_button_visible}getUserActivityData(){var e;let t=this.adContext.getValue();return{eventId:t.platform.sessionId,creativeId:t.advertiser.creative.id,adSource:t.advertiser.dsp,placementType:t.placement.type,time:this.getAdStartTime(),videoUrl:null!=(e=this.tokenService.get("ORIGINAL_VIDEO_URL"))?e:this.tokenService.get("MAIN_STREAM"),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionAfterCloseButton:this.getEndcardInteractionAfterCloseButton(),rewarded:t.placement.is.rewarded,createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()}}async addRecord(){let e=await this.indexedDatabaseService,t=this.getUserActivityData();return e.addRecord(t)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e={dbName:"viewMaster_indexed_db",dbVersion:1,objectStore:{name:"userActivity",keyPath:"eventId",expiry:90}},t=tY(),n=M(),i=tF(),r=nh,a=Q){super(),this.indexedDatabaseService=new t7(e,t,nv).getIndexedDatabaseService(),this.tokenService=n,this.reportingService=i,this.adContext=a,this.injectedGetVideoStreamAverageBandwidth=r}},ng=()=>{let e=S.getInstance(),t=L.getServiceIdentifier();return e.get(t)},nm=class{getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find((t=>t.name===e.name));if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach((e=>{n[e.name]=!0}));let i=e.actions.filter((e=>!n[e.name]));t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}isChild(){return this.child}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1,this.child=!1}};const nf={name:"PRIVACY_LOGO_SHOW",actions:[{name:"setPrivacyButtonVisible"}]},nS={name:"PRIVACY_LOGO_HIDE",actions:[{name:"setPrivacyButtonHidden"}]},nC={name:"PRIVACY_BOTTOM_DRAWER_CLOSE",actions:[{name:"setPrivacyDrawerClosed"},{name:"triggerInternalViewableChange"},{name:"resumeOverlayView"}]},nE={name:"OPEN_PRIVACY_PAGE",actions:[{name:"openPrivacyUrl"}]},ny={name:"PRODUCT_VIEW_CLOSE",actions:[{name:"endAdOnProductViewClose"}]},n_={name:"CLOSE_BUTTON_MOUNT",actions:[{name:"setCloseButtonVisible"}]},nT={name:"CLOSE_BUTTON_UNMOUNT",actions:[{name:"setCloseButtonHidden"}]},nI={name:"CLOSE_BUTTON_CLICK",actions:[{name:"emitCloseButtonClick"}]},nw={name:"CLOSE_BUTTON_WILL_SHOW",actions:[{name:"emitCloseButtonShow"}]},nb={name:"CLOSE_PICTURE_IN_PICTURE",actions:[{name:"closePictureInPicture"}]},nA={name:"STOP_THEATRE_MODE",actions:[{name:"setTheatreModeInactive"}]},nO={name:"START_THEATRE_MODE",actions:[{name:"setTheatreModeActive"}]};var nk=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},nD=class extends nm{getTransitions(){return super.getTransitions().concat(nS,nf,{name:"PRIVACY_BOTTOM_DRAWER_OPEN",actions:this.isFullscreen?[{name:"setPrivacyDrawerOpen"},{name:"triggerInternalViewableChange"},{name:"interruptOverlayView"}]:[{name:"openPrivacyUrl"}]},nC,nE,nb)}isLastPage(){var e;return!(nk(this)&&this.getLastChanceEndcardConfig().enabled||"closed"!==(null==(e=this.next)?void 0:e.getSceneType()))}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const nN={name:"MUTE",actions:[{name:"muteSound"},{name:"emitMuted"}]},nV={name:"UNMUTE",actions:[{name:"unMuteSound"},{name:"emitMuted"}]},nL={name:"VIDEO_ERROR",actions:[{name:"emitVideoError"}]};var nP=e=>{var t;return!!e&&"true"===(null==e||null==(t=e.trim())?void 0:t.toLowerCase())},nM=e=>{switch(e){case"off":return ni.OFF;case"overlay_view":return ni.SKO;default:return ni.SKPV}},nR=class{getFullScreenClickConfig(){let e;if(this.partialFSCTokenValue)try{e=JSON.parse(this.partialFSCTokenValue)}catch(e){this.errorLoggingReportingService.emit({type:"error-logging",event:"exception",data:{error:{message:"Failed to parse value of PARTIAL_FSC token"}}})}let t={enabled:"fullscreen"!==this.placementType||nP(this.fullCtaTokenValue),id:this.id,target:["banner","mrec"].includes(this.placementType)?ni.SKPV:nM(this.skFullCtaTokenValue),ctaUrl:this.ctaButtonUrlTokenValue};return e&&(t.styleData=e),t}constructor({fullCtaTokenValue:e,skFullCtaTokenValue:t,ctaButtonUrlTokenValue:n,id:i,placementType:r,partialFSCTokenValue:a,errorLoggingReportingService:s}){this.fullCtaTokenValue=e,this.skFullCtaTokenValue=t,this.ctaButtonUrlTokenValue=n,this.id=i,this.placementType=r,this.partialFSCTokenValue=a,this.errorLoggingReportingService=s}};const nx="scenes-key",nB="gdpr";var nU=class extends C{isDone(){var e;return null!=(e=this.interpreter.state.matches("DONE"))&&e}canOpen(){var e;return null!=(e=this.interpreter.state.matches("HIDDEN")||this.interpreter.state.matches("FALLBACK"))&&e}close(){this.interpreter.send({type:"CLOSE"})}fallback(){}init(){}isOpen(){var e;return null!=(e=this.interpreter.state.matches("SHOWING"))&&e}open(e){this.hasFallback=e,this.interpreter.send({type:"OPEN"})}subscribe(e){return this.interpreter.subscribe(e)}setPrepared(){}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=ng()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nF=()=>{let e=S.getInstance(),t=nU.getServiceIdentifier();if(e.has(t))return e.get(t)},nH=class extends C{canOpen(){return["IDLE","FALLBACK"].some((e=>this.interpreter.state.matches(e)))}close(){this.interpreter.send({type:"CLOSE"})}fallback(){"off"!==this.interpreter.state.context.fallback&&(this.interpreter.send({type:"SET_FALLBACK"}),this.open())}finish(){this.interpreter.send({type:"FINISH"})}getState(){return this.interpreter.state}init(){}interrupt(){this.interpreter.send({type:"INTERRUPT"})}isIdle(){var e;return null!=(e=this.interpreter.state.matches("IDLE"))&&e}isInterrupted(){return["CLOSING","DELAY_SHOW_INTERRUPTED"].some((e=>this.interpreter.state.matches(e)))}isOpen(){return["DELAY_SHOW_IMMEDIATE","DELAY_SHOW_VISIBLE","IMMEDIATE_SHOW","IMMEDIATE_SHOW_VISIBLE"].some((e=>this.interpreter.state.matches(e)))}open(e){let t={type:"START_IMMEDIATE_SHOW",fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches("DELAY_SHOW")?"SHOW":"START_DELAY_SHOW"),this.interpreter.send(t)}resume(){this.interpreter.send({type:"RESUME"})}setDisplayOptions(e){this.interpreter.send({type:"SET_DISPLAY_OPTIONS",displayOptions:e})}setVisible(){this.interpreter.send({type:"SET_VISIBLE"})}setError(){}setPrepared(){}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=ng()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nW=()=>{let e=S.getInstance(),t=nH.getServiceIdentifier();if(e.has(t))return e.get(t)};const nK=["checkpoint.0","checkpoint.100","checkpoint.25","checkpoint.50","checkpoint.75","clickUrl","postroll.click","postroll.view","video.close","video.length","video.mute","video.unmute","rewardGranted"];var nG=class extends tz{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&nK.includes(e)?{type:"tpat",event:e}:"object"==typeof e?e:void 0}},nj=e=>new nG(null!=e?e:J()),nY=class extends C{openCTAWithMraid(){this.url&&this.mraidService.open(this.url)}openOverlayView(){var e;null==(e=this.storeKitOverlayService)||e.open()}openProductView(){var e;null==(e=this.productViewService)||e.open()}handleOverlayViewCTA(){var e;this.storeKitOverlayService?this.openOverlayView():(null==(e=this.productViewService)?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&t.length>0&&((new Image).src=t)}handleProductViewCTA(){var e,t,n;null!=(e=this.productViewService)&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay&&(null==(t=this.storeKitOverlayService)?void 0:t.canOpen())?this.openOverlayView():this.adData.advertiser.appStoreId&&(null==(n=this.productViewService)?void 0:n.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r,shouldFireMMP:a=!0}=e;if(a&&this.fireMMPEvents(),this.url=n||this.url,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.adData.device.os.is.iOS)switch(t){case ni.OFF:this.openCTAWithMraid();break;case ni.SKO:this.handleOverlayViewCTA();break;case ni.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}fireMMPEvents(){var e;let t=null==(e=tB.getValue())?void 0:e.scene;if(!t)return;let n=t.getSceneType(),i=["image","endcard"].includes(n),r="video"===n,a="shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick;a||this.tpatReportingService.emit("clickUrl",!0),a&&r&&this.tpatReportingService.emit("clickUrl",!0),i&&this.tpatReportingService.emit("postroll.click",!0)}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=tj(),t=Q.getValue(),n=nF(),i=nW(),r=nj()){super(),this.mraidService=e,this.adData=t,this.productViewService=n,this.storeKitOverlayService=i,this.tpatReportingService=r,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},nz=()=>{let e=S.getInstance(),t=nY.getServiceIdentifier();return e.get(t)},nq=class{getStoreKitOverlayAutoShowConfig(){let e="adv_pref"===this.fullCtaOptionTokenValue,t="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!this.storeKitOverlayService&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&nP(this.skOverlayAutoTokenValue)&&e,autoShowDelay:(()=>{var e;let t=parseInt(null!=(e=this.skOverlayDelaySecondsTokenValue)?e:"0",10);return Number.isNaN(t)?0:1e3*Math.max(t,0)})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!=(e=this.skOverlayAutoCloseTokenValue)?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:t?()=>this.callToActionService().fireMMPEvents():()=>{}}}constructor(e,t,n,i,r,a,s=nz,o=nW()){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.callToActionService=s,this.storeKitOverlayService=o}},n$=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!=(e=this.appStoreOnVideoAutoDelayTokenValue)?e:"0");return{enabled:!!this.productViewService&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&!this.isInLinePlacement&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=!1,i=nF()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.isInLinePlacement=n,this.productViewService=i}},nX=e=>{var t;return!!e&&"false"===(null==e||null==(t=e.trim())?void 0:t.toLowerCase())},nQ=class{getStoreKitOverlayAutoShowConfig(){let e=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,t="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!this.storeKitOverlayService||!this.appStoreId||nX(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!e&&parseInt(e,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let t=parseInt(null!=e?e:"5",10);return Number.isNaN(t)?3e3:Math.max(3e3,1e3*t)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!=(e=this.skOverlayAutoCloseTokenValue)?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:t?()=>this.callToActionService().fireMMPEvents():()=>{}}}constructor(e,t,n,i,r,a,s,o,l,c=nz,d=nW()){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=s,this.skOverlayAutoCloseTokenValue=o,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.callToActionService=c,this.storeKitOverlayService=d}},nZ=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!=(e=this.appStoreOnEndcardAutoDelayTokenValue)?e:"0");return{enabled:!!this.productViewService&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=nF()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.productViewService=i}},nJ=((r=nJ||{})[r.CLOSE=0]="CLOSE",r[r.SKIP=1]="SKIP",r),n0=nJ;const n1=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});var n2=class{hasAppMetadata(){return!(!this.appIcon||!this.appName)}getAppRatingCount(){var e;let t=parseInt(null!=(e=this.appRatingCount)?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?n1.format(t):""}getAppContentRatingImg(){var e,t;return null!=(t={Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"}[null!=(e=this.appContentRating)?e:""])?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!=(t=null!=(e=this.appRating)?e:this.appStoreRating)?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let s=parseFloat(n);return Number.isNaN(s)?parseFloat("4.4"):s}getAppName(){var e;if(this.appNameEncoded)try{return t9(this.appNameEncoded)}catch(e){}return null!=(e=this.appName)?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return t9(this.appDescriptionEncoded)}catch(e){}return null!=(e=this.appDescription)?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return t9(this.appLongDescriptionEncoded)}catch(e){}return null!=(e=this.appLongDescription)?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return t9(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!=(e=this.ctaButtonDelay)?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!=(e=this.ctaButtonUrl)?e:""}getAppMetaData(){var e;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!=(e=this.appContentRating)?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:this.appIcon,isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:((e,t=tY())=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.slice(0,4):[]}catch(e){t.emit({type:"error-logging",event:"resource",data:{error:{message:"Unable to parse app screenshots"}}})}return[]})(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:s,appRatingCount:o,appLongDescription:l,appContentRating:c,appScreenShots:d,appDownloadCount:u,appRating:h,appStoreRating:v,appStoreId:p,appNameEncoded:g,appDescriptionEncoded:m,appLongDescriptionEncoded:f,errorLoggingReportingService:S=tY()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=s,this.appRatingCount=o,this.appLongDescription=l,this.appContentRating=c,this.appScreenShots=d,this.appDownloadCount=u,this.appRating=h,this.appStoreRating=v,this.appStoreId=p,this.appNameEncoded=g,this.appDescriptionEncoded=m,this.appLongDescriptionEncoded=f,this.errorLoggingReportingService=S}};const n3=(e,t=Q.getValue(),n=M())=>({appNameEncoded:n.get("APP_NAME_ENCODED"),appStoreId:n.get("APP_STORE_ID"),ctaButtonDelay:n.get("DOWNLOAD_BUTTON_DELAY_SECONDS"),ctaButtonText:n.get("CTA_BUTTON_TEXT"),ctaButtonTextEncoded:n.get("CTA_BUTTON_ENCODED_TEXT"),ctaButtonUrl:n.get("CTA_BUTTON_URL"),ctaTarget:ni.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:n.get("EC_CLOSE_BUTTON_DELAY_SECONDS"),fullCtaTokenValue:n.get("FULL_CTA"),hasEndcard:n.has("EC_HTML")||n.has("EC_IMAGE"),hasVideo:n.has("MAIN_VIDEO")||n.has("MAIN_STREAM"),icon:n.get("APP_ICON"),id:e,isFullscreen:t.placement.is.fullscreen,name:n.get("APP_NAME"),showECCloseButtonCountDownTokenValue:n.get("SHOW_EC_CLOSE_BUTTON_COUNTDOWN"),skCtaOnlyTokenValue:n.get("SK_CTA_ONLY"),skFscTokenValue:n.get("SK_FSC"),staticEndcardCloseButtonDelaySeconds:n.get("STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS")});var n4=class extends n2{getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getLastChanceEndcardConfig(){var e;return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:this.getAppMetaData(),cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:nM(this.skCtaOnlyTokenValue),delay:parseInt(null!=(e=this.ctaButtonDelay)?e:"4",10)},fsc:{enabled:nP(this.fullCtaTokenValue),ctaUrl:this.ctaButtonUrl,target:nM(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:n0.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:s,enabled:o=!1,endcardCloseButtonDelaySeconds:l,fullCtaTokenValue:c,hasEndcard:d,hasVideo:u,icon:h,id:v,isFullscreen:p,name:g,showECCloseButtonCountDownTokenValue:m,skCtaOnlyTokenValue:f,skFscTokenValue:S,staticEndcardCloseButtonDelaySeconds:C},y){super({ctaButtonUrl:a,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonDelay:n,appName:g,appIcon:h,appStoreId:t,appNameEncoded:e,errorLoggingReportingService:y}),this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=s?s:ni.SKPV,this.enabled=o,this.endcardCloseButtonDelaySeconds=l,this.fullCtaTokenValue=c,this.hasEndcard=!!d,this.hasVideo=!!u,this.icon=h,this.id=v,this.isFullscreen=!!p,this.appName=g,this.showECCloseButtonCountDownTokenValue=m,this.skCtaOnlyTokenValue=f,this.skFscTokenValue=S,this.staticEndcardCloseButtonDelaySeconds=C}},n6=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?n0.CLOSE:nP(this.endcardCloseButtonAsSkipTokenValue)?n0.SKIP:n0.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||nP(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},n5=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}},n7=class extends n2{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:nM(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}};class n8 extends nm{getId(){return"closed"}static getInstances(e=Q.getValue()){return e.placement.is.banner||e.placement.is.mrec||e.placement.is.inLine?[]:[new n8]}getSceneType(){return"closed"}getObservabilityData(){return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex()}}getSceneIndex(){return-1}constructor(){super(),this.addEntryAction({name:"ensureRewardGranted"}),this.addEntryAction({name:"destroyIframe"}),this.getEntryActions().some((e=>"closeAd"===e.name))||this.addEntryAction({name:"closeAd"}),this.addTransition(T({},ny)),this.addTransition(T({},nb))}}var n9=(e=M(),t=Q.getValue())=>!!t.placement.is.mrec||!!t.placement.is.banner||nP(e.get("START_MUTED"))||nP(e.get("REAL_START_MUTED")),ie=class{subscribe(e){let t,n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null==(i=e.error)||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null==(t=e.complete)||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},it=function(e){return t=>new ie((n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}})))},ii=(e,t)=>new ie((n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}})),ir=(e,t,n)=>ii(e,"error-logging").pipe(it((e=>e.event===t&&(!n||e.data.resource_type===n)))),ia=function(){return e=>new ie((t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null==(n=t.error)?void 0:n.call(t,e)},complete:()=>{var e;return null==(e=t.complete)?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}}))},is=function(e){return t=>new ie((n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null==(e=n.complete)||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}}))},io=(e,t)=>ii(e,"scene-event").pipe(it((e=>e.event===t))),il=(e,t)=>new ie((n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{var e;null!=i&&(n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null==(e=n.complete)||e.call(n))}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}})),ic=function(e){return t=>new ie((n=>{let i=e,r=t.subscribe({next:e=>{var t;i>0&&(n.next(e),i-=1),0===i&&(null==(t=n.complete)||t.call(n))},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},id=(e,t,n)=>new ie((i=>{let r=il(e,t).subscribe({next:e=>{var t;i.next(e),null==(t=i.complete)||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}})),iu=(e,t,n)=>new ie((i=>{let r=0,a=null,s=t.subscribe({next:()=>{var e;i.next(r),null==(e=i.complete)||e.call(i),null==a||a.unsubscribe(),s.unsubscribe()}}),o=e.subscribe({next:()=>{a=n.subscribe({next:()=>{r+=1},error:e=>{var t;return null==(t=i.error)?void 0:t.call(i,e)}})}});return{unsubscribe:()=>{null==a||a.unsubscribe(),o.unsubscribe()}}})),ih=function(e){return t=>new ie((n=>{let i={next:e=>n.next(e),error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}};t.subscribe({next:t=>{e(t).subscribe(i)},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)}})}))},iv=function(e){return t=>new ie((n=>{let i=0;return t.subscribe({next:t=>{try{let r=e(t,i);n.next(r),i+=1}catch(e){var r;null==(r=n.error)||r.call(n,e)}},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}})}))},ip=function(e){return t=>new ie((n=>{let i=!1,r=t.subscribe({next:e=>{i=!0,n.next(e)},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var t;i||n.next(e),null==(t=n.complete)||t.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))};const ig="persistent-rich-cta-button",im="persistent-simple-cta",iS="mute-button",iC="mute-button-icon",iE="#555FFF",iy=3e3,i_="close-or-skip-button",iT="countdown",iI="last-chance-endcard-next-button",iw="last-chance-endcard-cta",ib="next-button",iA="privacy-drawer",iO="shield-icon",ik=Symbol("source"),iD=[iS,i_,iO,iA],iN=(e,t)=>{if(e instanceof Element){var n;let i=null!=(n=e.getAttribute("id"))?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||iN(e.parentElement,t))}return!0},iV=(e,t=t2)=>{let n=t();((e,t,n=tU())=>{let{clientX:i,clientY:r}="touches"in e?e.touches[0]:e;t.emit({type:"scene-event",event:"click",data:{scene_id:n.getId(),scene_type:n.getSceneType(),click_coordinates:{x:i,y:r},click_target:e.target}})})(e,n),((e,t=t2())=>{if(void 0===e)return;let n={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};(document.querySelector(`#${i_}`)?(e=>{let t=document.querySelector(`#${i_}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:s,left:o}=t.getBoundingClientRect();return(n<o&&n>=o-30||n>a&&n<=a+30)&&i>=r-30&&i<=s+30||(i<r&&i>=r-30||i>s&&i<=s+30)&&n>=o-30&&n<=a+30})(n):(e=>{let t=window.innerWidth-75;return e.clientX>=t&&e.clientY<=75})(n))&&t.emit("nearCloseButtonClick")})(e,n)};var iL=(e,t)=>io(e,"click").pipe(is(t),it((e=>{var t;return iN(null==(t=e.data)?void 0:t.click_target,iD)})),ia(),ip(0)),iP=(...e)=>new ie((t=>{let n=[],i=e=>{var i;t.next(e),null==(i=t.complete)||i.call(t),n.forEach((e=>e()))},r=e=>{var n;return null==(n=t.error)?void 0:n.call(t,e)},a=()=>{var e;return null==(e=t.complete)?void 0:e.call(t)};e.forEach((e=>{let{unsubscribe:t}=e.subscribe({next:i,error:r,complete:a});n.push(t)}))})),iM=(e=tF(),t=!1)=>{let n=t2(e),i=il(io(n,"sceneStart"),io(n,"sceneEnd")),r=io(n,"click").pipe(ic(1)),a=id(io(n,"sceneStart"),r,io(n,"sceneEnd")),s=iu(io(n,"closeButtonShow").pipe(ic(1)),io(n,"sceneEnd"),io(n,"nearCloseButtonClick")),o=id(io(n,"closeButtonShow"),io(n,"closeButtonClick"),io(n,"sceneEnd")),l=io(n,"closeButtonShow").pipe(ih((()=>io(n,"click").pipe(iv((()=>!0))))),is(io(n,"sceneEnd")),ip(!1)),c={click_count:iL(n,io(n,"sceneEnd")),close_button_idle_time:o,duration:i,first_click:a,interaction_after_close_button_visible:l,near_click_count_after_close_button_appears:s,near_click_count_before_close_button_appears:iu(io(n,"sceneStart"),iP(io(n,"closeButtonShow"),io(n,"sceneEnd")),io(n,"nearCloseButtonClick"))};return t&&(c.last_chance_endcard_duration=id(io(n,"lastChanceEndcardOpen"),io(n,"lastChanceEndcardClose"),io(n,"sceneEnd")),c.last_chance_endcard_clicked=iP(io(n,"sceneEnd").pipe(iv((()=>!1))),io(n,"lastChanceEndcardOpen").pipe(ih((()=>iL(n,io(n,"lastChanceEndcardClose")))),iv((e=>e>0)),ip(!1)))),c},iR=()=>{let e=S.getInstance(),t=tD.getServiceIdentifier();return e.get(t)},ix=(e,t)=>ii(e,"video").pipe(it((e=>e.event===t))),iB=(e,t)=>{let n=Number(t.incentivizedCloseButtonDelaySeconds);return!t.isIncentiveTiedToCloseButtonDelay||Number.isNaN(n)||n>e?.8*e:.8*n},iU=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const iF=(e,t,n)=>{let i=nd();i.findAll({where:{type:"videoViewed",event:"progress"}}).some((e=>{var t,i;return(null!=(i=null==(t=e.activity.data)?void 0:t.seconds)?i:0)>=n}))||i.emit({type:"videoViewed",event:"progress",data:{current_time:e,duration:t,seconds:n}}),t>0&&e>0&&nd().emit({type:"videoViewed",event:"videoLength",data:{current_time:e,duration:t,seconds:n},fireOnlyOnce:!0});let r=iU(e,t),a=nd();4===r&&a.emit({type:"videoViewed",event:"videoReachedDuration",data:{current_time:e,duration:t,seconds:n},fireOnlyOnce:!0})};var iH=(e,t,n=tj(),i=nj())=>{var r,a,s,o;let l=Math.floor(1e3*Math.max(null!=(s=null==(r=t.data)?void 0:r.current_time)?s:0,.1)),c=Math.floor(1e3*(null!=(o=null==(a=t.data)?void 0:a.duration)?o:0));switch(t.event){case"progress":n.notifyEventValuePairEvent("videoViewed",l);break;case"videoReachedDuration":n.notifyEventValuePairEvent("videoViewed",c);break;case"videoLength":n.notifyEventValuePairEvent("videoLength",c),i.emit("video.length",!0)}};const iW=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],iK=(e,t=iR(),n=nj())=>{let i=iW[e],r=iW.length-1;t.getNewTimer(i.timeout,(()=>{n.emit(["checkpoint.0","checkpoint.25","checkpoint.50","checkpoint.75","checkpoint.100"][Math.floor(i.currentTime/5*4)],!0,{current_time:i.currentTime,duration:5}),iF(i.currentTime,5,Math.round(i.currentTime)),e!==r&&iK(e+1)})).start()};var iG=e=>new ie((t=>{let n=()=>{var e;t.next("forfeitReward"),null==(e=t.complete)||e.call(t)};ii(e,"incentivized-event").pipe(it((e=>"forfeitReward"===e.event))).subscribe({next:n,error:e=>{var n;return null==(n=t.error)?void 0:n.call(t,e)}}),e.hasExistingEvent({type:"incentivized-event",event:"forfeitReward"})&&n()})),ij=e=>new ie((t=>{var n;e.hasExistingEvent({type:"incentivized-event",event:"grantReward"})&&(t.next("forfeitReward"),null==(n=t.complete)||n.call(t))})),iY=(e,t,n)=>new ie((i=>{let r=t.getNewTimer(e,(()=>{var e;i.next(n),null==(e=i.complete)||e.call(i)}));return r.start(),{unsubscribe:()=>{r.destroy()}}})),iz=(e,t,n=tF(),i=iR())=>new ie((r=>{let a=("video"===e?((e,t,n)=>{let i=ix(t,"play").pipe(ic(1),ih((i=>{var r;return iP(iY(1e3*iB(null==(r=i.data)?void 0:r.duration,e),n,"grantReward"),ix(t,"error").pipe(iv((()=>"forfeitReward"))),io(t,"sceneEnd").pipe(iv((()=>"forfeitReward"))),iG(t),ij(t))})));return io(t,"sceneStart").pipe(ih((()=>iP(i,ix(t,"error").pipe(iv((()=>"forfeitReward"))),io(t,"sceneEnd").pipe(iv((()=>"forfeitReward"))),iG(t),ij(t)))))})(t,n,i):io(n,"sceneStart").pipe(ih((()=>iP(iY(1e3*iB(5,t),i,"grantReward"),io(n,"sceneEnd").pipe(iv((()=>"forfeitReward"))),iG(n),ij(n)))))).subscribe({next:e=>{var t;"grantReward"===e&&n.emit({type:"incentivized-event",event:"grantReward",fireOnlyOnce:!0}),null==(t=r.complete)||t.call(r)},error:e=>{var t;return null==(t=r.error)?void 0:t.call(r,e)}});return{unsubscribe:()=>{a.unsubscribe()}}})),iq=()=>J();const i$=["sizeChange","viewableChange","closeButtonWillShow"];var iX=class extends C{getEventCallbacks(e){return this.callbacks[e]=this.callbacks[e]||[],[...this.callbacks[e]]}updateEventCallbacks(e,t){this.callbacks[e]=t}addEventListener(e,t){if(!this.allowedMraidEvents.includes(e))return;let n=this.getEventCallbacks(e);this.updateEventCallbacks(e,[...n,t])}removeEventListener(e,t){if(this.allowedMraidEvents.includes(e))if(t){let n=this.getEventCallbacks(e).filter((e=>e!==t));this.updateEventCallbacks(e,n)}else this.updateEventCallbacks(e,[])}flushAllEventCallbacks(){this.callbacks&&Object.keys(this.callbacks).forEach((e=>{this.updateEventCallbacks(e,[])}))}triggerEvent(e,...t){this.getEventCallbacks(e).forEach((e=>{e(...t)}))}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e=i$){super(),this.allowedMraidEvents=e,this.callbacks={}}},iQ=()=>{let e=S.getInstance(),t=iX.getServiceIdentifier();return e.get(t)},iZ=e=>iP(io(e,"sceneEnd"),io(e,"lastChanceEndcardOpen")),iJ=(e,t,n,i)=>new ie((r=>{let a,s=ii(t,"viewability").pipe(it((e=>e.event===a||!0))).subscribe({next:()=>{n.triggerEvent("viewableChange",i.isViewable())}});return iZ(e).subscribe({next:()=>{var e;null==(e=r.complete)||e.call(r)}}),{unsubscribe:()=>{s.unsubscribe()}}})),i0=(e,t)=>new ie((n=>{let i=io(e,"closeWillAppear").subscribe({next:()=>{t.triggerEvent("closeButtonWillShow"),t.removeEventListener("closeButtonWillShow")}});return iZ(e).subscribe({next:()=>{var e;null==(e=n.complete)||e.call(n)}}),{unsubscribe:()=>{i.unsubscribe()}}})),i1=(e,t)=>new ie((n=>{let i=io(e,"sizeChange").subscribe({next:()=>{t.triggerEvent("sizeChange",window.innerWidth,window.innerHeight)}});return iZ(e).subscribe({next:()=>{var e;null==(e=n.complete)||e.call(n)}}),{unsubscribe:()=>{i.unsubscribe()}}})),i2=(e,t)=>new ie((n=>{iZ(e).subscribe({next:()=>{var e;t.flushAllEventCallbacks(),null==(e=n.complete)||e.call(n)}})})),i3=(e,t)=>({ctaButtonUrl:e.get("CTA_BUTTON_URL"),ctaButtonText:e.get("CTA_BUTTON_TEXT"),ctaButtonTextEncoded:e.get("CTA_BUTTON_ENCODED_TEXT"),ctaButtonDelay:e.get("DOWNLOAD_BUTTON_DELAY_SECONDS"),appName:e.get("APP_NAME"),appIcon:e.get("APP_ICON"),appDescription:e.get("APP_DESCRIPTION"),appRatingCount:e.get("APP_RATING_COUNT"),appLongDescription:e.get("APP_LONG_DESCRIPTION"),appContentRating:e.get("APP_CONTENT_RATING"),appScreenShots:e.get("APP_SCREENSHOTS"),appDownloadCount:e.get("APP_DOWNLOAD_COUNT"),appRating:e.get("APP_RATING"),appStoreRating:e.get("APP_STORE_RATING"),appStoreId:e.get("APP_STORE_ID"),appNameEncoded:e.get("APP_NAME_ENCODED"),appDescriptionEncoded:e.get("APP_DESCRIPTION_ENCODED"),appLongDescriptionEncoded:e.get("APP_LONG_DESCRIPTION_ENCODED"),errorLoggingReportingService:t}),i4=class{getIncentivizedConfig(){return{enabled:this.enabled,incentivizedCloseButtonDelaySeconds:this.incentivizedCloseButtonDelaySeconds,isIncentiveTiedToCloseButtonDelay:this.isIncentiveTiedToCloseButtonDelay}}constructor({enabled:e=!1,incentivizedCloseButtonDelaySeconds:t,isIncentiveTiedToCloseButtonDelay:n=!1}){this.enabled=e,this.incentivizedCloseButtonDelaySeconds=t,this.isIncentiveTiedToCloseButtonDelay=n}},i6=()=>{let e=S.getInstance(),t=ne.getServiceIdentifier();return e.get(t)},i5=(e,t=ng())=>{if(e)return t.interpreterMap.get(e)},i7=class extends C{isUserInterestedInEndcard(e){return e&&e.length>=10&&e.filter((e=>{var t;return(null!=(t=e.endcardInteractions)?t:0)>=2})).length>=3}calculateAmplifyValue(e){let t=Math.max(0,e-this.amplifyValue);return 0===t&&(this.amplifyValue=e),t}async getVideoCloseButtonDelayWithUserActivity(e){let t=null!=e?e:0,n=(await this.userActivityService.getAllRecords()).filter((e=>e.eventId!==this.sessionId&&("fullscreen"===e.placementType||!e.placementType)));return this.isUserInterestedInEndcard(n)?(this.amplified=!0,this.calculateAmplifyValue(t)):t}isEndcardAmplified(){return this.amplified}getAmplifiedEndcardCloseButtonDelay(e){return(null!=e?e:0)+this.amplifyValue}static getServiceIdentifier(){return"AmplifyEndcardEngagementServiceInterface"}constructor(e,t){super(),this.sessionId=e,this.userActivityService=t,this.amplified=!1,this.amplifyValue=2}},i8=()=>{let e=S.getInstance(),t=i7.getServiceIdentifier();if(e.has(t))return e.get(t)},i9=(e=S.getInstance())=>e.get(nx),re=function(e){return!!e&&"function"==typeof e.getCloseButtonConfig};const rt=["EC_IMAGE","EC_IMAGE_2","EC_HTML","ADM_HTML","EC_HTML_2"];class rn extends nD{getId(){return this.id}getSceneType(){return"endcard"}getSceneIndex(){return this.injectedGetScenes().findIndex((e=>e.getId()===this.getId()))}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){var e,t,n;let i=this.closeButtonConfigProvider.getCloseButtonConfig(),r=0;if(this.prev&&"video"===this.prev.getSceneType()&&re(this.prev)){let n=i5(this.prev.getId());-1===["PLAYING","PAUSED","ENDED","FINAL"].indexOf(null!=(e=null==n?void 0:n.state.value)?e:"")&&(r=null!=(t=this.prev.getCloseButtonConfig().delay)?t:0)}return x(T({},i),{delay:(null!=(n=null==i?void 0:i.delay)?n:0)+r,style:this.isLastPage()?n0.CLOSE:i.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:((e,t=!1,n=tF(),i=iR(),r=iQ(),a=en(),s=ei())=>{let o=t2(n),l=ir(n,"playable").pipe(ia()).pipe(is(io(o,"sceneEnd"))),c=id(io(o,"loadStart"),io(o,"loadComplete"),io(o,"sceneEnd")),d=x(T({},iM(n,t)),{error_count:l,iframe_type:((e,t,n=tU)=>new ie((i=>{let r=io(e,"sceneEnd").subscribe({next:()=>{var e;i.next(((e=tU,t=iq())=>{var n;let i=null==(n=e())?void 0:n.getId(),r=t.findAll({where:{type:"iframe",event:"nestedIframeType",data:{scene_id:i}}}).map((e=>{var t;return null==(t=e.activity.data)?void 0:t.nested_iframe_type}));return r.includes("cors")?"cors":r.includes("basic")?"basic":""})(n,t)),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})))(o,n),load_duration:c,viewable_change:iJ(o,s,r,a),size_change:i1(o,r),close_will_appear:i0(o,r),flush_mraid_events:i2(o,r)});return e.enabled&&(d.grant_reward=iz("endcard",e,n,i)),d})(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getHasNestedIframe(){return this.hasNestedFrame}initIframeContentData(e){let t=e.getNestedIframeContentData(this.endcardContent);this.hasNestedFrame=!!t,this.iframeContentData=e.initializeIframeContentData(this.endcardContent,this.id,t)}async getIframeContentData(){var e;return null!=(e=this.iframeContentData)?e:Promise.resolve({content:this.endcardContent})}getObservabilityData(){return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex(),has_nested_iframe:this.getHasNestedIframe()}}static getInstances(e=M(),t=tY(),n=i6(),i=Q.getValue(),r=i8,a=i9){let s=[],o={EC_HTML:"endcard",ADM_HTML:"endcard",EC_HTML_2:"secondEndcard"};return["EC_HTML","ADM_HTML","EC_HTML_2"].filter((t=>e.has(t))).forEach(((l,c)=>{var d;let u=`${o[l]}_${c}`,h=new n4(n3(u,i,e),t);s.push(new rn({id:u,endcardContent:n.decode(null!=(d=e.get(l))?d:""),index:c,isAlternative:!1,isFullscreen:i.placement.is.fullscreen,storeKitOverlayAutoShowConfig:new nQ(c,this.isEndcardOnly(e),i.advertiser.appStoreId,e.get("FULL_CTA_OPTION"),e.get("SKOVERLAY_AUTO"),e.get("SKOVERLAY_DELAY_SECONDS"),e.get("EC_SKOVERLAY_DELAY_SECONDS"),e.get("SKOVERLAY_AUTO_CLOSE"),e.get("EC_SKOVERLAY_DISABLE_AUTO_MMP")).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new nZ(c,i.advertiser.appStoreId,e.get("APP_STORE_ON_ENDCARD_AUTO_DELAY")).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:h.getLastChanceEndcardConfig(),omsdkConfig:{enabled:nP(e.get("OM_ENABLED"))},closeButtonConfigProvider:new n6({ecCloseButtonDelaySecondsTokenValue:e.get("EC_CLOSE_BUTTON_DELAY_SECONDS"),staticEcCloseButtonDelaySecondsTokenValue:e.get("STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS"),showECCloseButtonCountDownTokenValue:e.get("SHOW_EC_CLOSE_BUTTON_COUNTDOWN"),endcardCloseButtonAsSkipTokenValue:e.get("ENDCARD_CLOSE_BUTTON_AS_SKIP"),isSecondEndcard:1===c}),trackingEventMapConfig:new n5(!1).getTrackingEventMapConfig(),callToActionConfig:new n7({skEcCtaOnlyTokenValue:e.get("SK_EC_CTA_ONLY"),appMetaProviderParams:i3(e,t)}).getCallToActionConfig(),muted:n9(e,i),shouldSplitVideoEndcardClick:nP(e.get("VIDEO_ENDCARD_CLICK_SPLIT")),incentivizedConfig:new i4({enabled:nP(e.get("INCENTIVIZED")),incentivizedCloseButtonDelaySeconds:e.get("INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS"),isIncentiveTiedToCloseButtonDelay:nP(e.get("IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY"))}).getIncentivizedConfig(),amplifyEndcardEngagementService:r,injectedGetScenes:a}))})),s}constructor({id:e,endcardContent:t,index:n,isAlternative:i,isFullscreen:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:s,lastChanceEndcardConfig:o,omsdkConfig:l,closeButtonConfigProvider:c,trackingEventMapConfig:d,muted:u=!1,callToActionConfig:h,shouldSplitVideoEndcardClick:v=!1,eventStreams:p,incentivizedConfig:g,amplifyEndcardEngagementService:m=i8,injectedGetScenes:f=i9}){super({isFullscreen:r}),this.hasNestedFrame=!1,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=s,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=d,this.closeButtonConfigProvider=c,this.callToActionConfig=h,this.muted=u,this.shouldSplitVideoEndcardClick=v,this.eventStreams=p,this.incentivizedConfig=g,this.amplifyEndcardEngagementService=m,this.injectedGetScenes=f,(null==l?void 0:l.enabled)&&this.addEntryAction({name:"initOmsdkHtmlDisplayService"}),this.addEntryAction({name:"registerSizeChangeMraidEvent"}),this.addTransition(n_),this.addTransition(nT),this.addTransition(nI),this.addTransition(nw),this.addOrUpdateTransition({name:"CLOSE",actions:[],scene:new n8}),this.addOrUpdateTransition({name:"CLOSE_BUTTON_WILL_SHOW",actions:[{name:"closeWillAppear"}]}),this.addTransition({name:"CREATIVE_VIEW",actions:[{name:"onCreativeView"}]}),this.addEntryAction({name:"fireIfEngagementIsUsed"})}}rn.isEndcardOnly=(e=M())=>{let t=!e.has("MAIN_VIDEO")&&!e.has("MAIN_STREAM"),n=1===rt.filter((t=>e.has(t))).length;return t&&n};var ri=rn,rr=class{getDelay(){return nP(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||nP(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return nP(this.videoCloseButtonAsSkipTokenValue)?n0.SKIP:n0.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}},ra=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!nX(this.videoProgressBarTokenValue),color:null!=(t=null!=(e=this.videoProgressBarColorTokenValue)?e:this.ctaButtonBackgroundTokenValue)?t:iE}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}},rs=class extends n2{getCallToActionTarget(){return this.adData.placement.is.banner||this.adData.placement.is.mrec?ni.SKPV:nM(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){let e=this.adData.placement.is.fullscreen||this.adData.placement.is.mrec||this.adData.placement.is.inLine,t=nP(this.blockPersistentCtaTokenValue);return e&&!t}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,adData:r}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.adData=r}},ro=class{getManifestMetadata(){if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:t9(this.mainManifestTokenValue),tracks:this.getTracks(),chunks:this.chunkSeriesValues,chunk_init:this.chunkInitTokenValue}}constructor(e,t,n,i,r,a=tY()){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.allTracksTokenValue=n,this.chunkSeriesValues=i,this.chunkInitTokenValue=r,this.errorLoggingReportingService=a,this.getTracks=()=>{if(this.allTracksTokenValue)try{return JSON.parse(t9(this.allTracksTokenValue))}catch(e){this.errorLoggingReportingService.emit({type:"error-logging",event:"exception",data:{error:{message:"Failed to parse HLS tracks"}}})}return this.track0TokenValue?{0:t9(this.track0TokenValue)}:{}}}};const rl=e=>!(null===e||"object"!=typeof e||void 0!==e.manifest&&"string"!=typeof e.manifest||void 0!==e.track_0&&"string"!=typeof e.track_0||void 0!==e.chunks&&(!Array.isArray(e.chunks)||!e.chunks.every((e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every((e=>"string"==typeof e))))));var rc=e=>{if(!e)return!1;let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")};const rd=e=>{if(!e)return"";if(rc(e)&&!["file://","locache://"].some((t=>e.toLowerCase().startsWith(t)))){return`file://${window.location.pathname.replace("index.html","")}${e}`}return e};var ru=class{getStreamManifest(){return(e=>{var t;let n=null==e||null==(t=e.getStreamManifest)?void 0:t.call(e);return void 0!==n&&rl(n)})(this.scene)?this.scene.getStreamManifest():void 0}getAudioManifest(){return(e=>{var t;let n=null==e||null==(t=e.getAudioManifest)?void 0:t.call(e);return void 0!==n&&rl(n)})(this.scene)?this.scene.getAudioManifest():void 0}getCachedManifestMetadata(){var e,t,n,i,r,a,s,o,l,c;let d=this.getStreamManifest(),u=this.getAudioManifest();return{video:{tracks:null!=(n=null==d?void 0:d.tracks)?n:{},manifest:null!=(i=null==d?void 0:d.manifest)?i:"",chunks:null!=(r=null==d||null==(e=d.chunks)?void 0:e.map(rd))?r:[],chunk_init:null!=(a=rd(null==d?void 0:d.chunk_init))?a:""},audio:{tracks:null!=(s=null==u?void 0:u.tracks)?s:{},manifest:null!=(o=null==u?void 0:u.manifest)?o:"",chunks:null!=(l=null==u||null==(t=u.chunks)?void 0:t.map(rd))?l:[],chunk_init:null!=(c=rd(null==u?void 0:u.chunk_init))?c:""}}}getChunkFormat(){var e,t;let n=null==(t=this.getStreamManifest())||null==(e=t.chunks)?void 0:e[0];if(!n||!rc(n))return"";let i=n.split(".");return i.length<2?"":i[i.length-1]}constructor(e=(null==(a=tB.getValue())?void 0:a.scene)){this.scene=e}},rh=(e,t)=>ii(e,"theatre-mode-event").pipe(it((e=>e.event===t))),rv=class{getOmsdkData(){try{if(this.multiOmsdkDataTokenValue)return this.multiOmsdkDataTokenValue.split("@").map((e=>JSON.parse(atob(e))));if(this.omsdkDataTokenValue)return[JSON.parse(atob(this.omsdkDataTokenValue))]}catch(e){this.errorLoggingReportingService.emit({type:"error-logging",event:"exception",data:{error:{message:"Failed to parse OMSDK data"}}})}return[]}isEnabled(){return nP(this.omsdkEnabledTokenValue)&&this.getOmsdkData().length>0}getOmsdkConfig(){return{enabled:this.isEnabled(),data:this.getOmsdkData()}}constructor(e,t,n,i=tY()){this.omsdkEnabledTokenValue=e,this.omsdkDataTokenValue=t,this.multiOmsdkDataTokenValue=n,this.errorLoggingReportingService=i}};class rp extends nD{getTransitions(){let e=super.getTransitions();return e.push(nN,nV,nL,n_,nT,nI,nw,nO,nA),e}getId(){return this.id}getSceneType(){return"video"}getSceneIndex(){return this.injectedGetScenes().findIndex((e=>e.getId()===this.getId()))}getVideoPlayer(){return"mp4"===this.videoType?"progressive":window.Hls.isSupported()?"custom":"native"}getVideoUrl(){return"mp4"===this.videoType&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i,r,a,s,o;let l=new ru(this),c=l.getCachedManifestMetadata();return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex(),cached:null!=(a=null==(t=c.video)||null==(e=t.chunks)?void 0:e.filter(rc).length)?a:0,expected_video_duration:this.expectedVideoDuration,format:l.getChunkFormat(),manifest:!!(null==(n=c.video)?void 0:n.manifest),local:+!this.url.toLowerCase().startsWith("http"),player:this.getVideoPlayer(),segments:null!=(s=null==(r=this.getStreamManifest())||null==(i=r.chunks)?void 0:i.length)?s:0,track:Object.keys(c.video.tracks).length>0,url:null!=(o=this.getVideoUrl())?o:"",video:this.videoType}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(e){let t=this.closeButtonConfigProvider.getCloseButtonConfig(e);return x(T({},t),{style:this.isLastPage()?n0.CLOSE:t.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getStreamManifest(){return this.streamManifest}getAudioManifest(){return this.audioManifest}getEventStreams(){return this.eventStreams?this.eventStreams:((e,t=!1,n=tF(),i=iR())=>{let r=t2(n),a=ir(n,"resource","video").pipe(ia()).pipe(is(io(r,"sceneEnd"))),s=id(io(r,"loadStart"),io(r,"loadComplete"),io(r,"sceneEnd")),o=id(io(r,"ctaButtonShow"),io(r,"ctaButtonClick"),io(r,"sceneEnd")),l=x(T({},iM(n,t)),{average_bandwidth:((e,t,n=tU)=>new ie((i=>{let r=io(e,"sceneEnd").subscribe({next:()=>{var e;i.next(nh(n,t)),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})))(r,n),cta_duration:o,error_count:a,hls_starting_sequence_number:((e,t)=>{let n=ix(e,"hlsLevelPlaylistLoaded"),i=io(t,"sceneEnd");return new ie((e=>{let t=n.subscribe({next:t=>{var n,i;e.next(null==(n=t.data)?void 0:n.starting_sequence_number),null==(i=e.complete)||i.call(e)}}),r=i.subscribe({next:()=>{var t;e.next(void 0),null==(t=e.complete)||t.call(e)}});return{unsubscribe:()=>{t.unsubscribe(),r.unsubscribe()}}}))})(n,r),load_duration:s});return e.enabled&&(l.grant_reward=iz("video",e,n,i)),l.hide_controls_count=rh(n,"hideControls").pipe(ia()).pipe(is(io(r,"sceneEnd"))),l.reveal_controls_count=rh(n,"revealControls").pipe(ia()).pipe(is(io(r,"sceneEnd"))),l})(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getOmsdkConfig(){return this.omsdkConfig}static getInstances(e=M(),t=tY(),n=Q.getValue()){let i=[];return["MAIN_VIDEO","MAIN_STREAM"].filter((t=>e.has(t))).forEach(((r,a)=>{var s;let o="MAIN_STREAM"===r?"hls":"mp4",l=`video_${a}`,c=new n4(n3(l,n,e),t),d=new rs(((e=M(),t=tY(),n=Q.getValue())=>{let i=i3(e,t);return{appStoreId:n.advertiser.appStoreId,skCtaOnlyTokenValue:e.get("SK_CTA_ONLY"),blockPersistentCtaTokenValue:e.get("BLOCK_PERSISTENT_CTA"),appMetaProviderParams:i,adData:n}})(e,t,n)).getCallToActionConfig(),u=new nq(n.advertiser.appStoreId,e.get("FULL_CTA_OPTION"),e.get("SKOVERLAY_AUTO"),e.get("SKOVERLAY_DELAY_SECONDS"),e.get("SKOVERLAY_AUTO_CLOSE"),e.get("SKOVERLAY_DISABLE_AUTO_MMP")).getStoreKitOverlayAutoShowConfig(),h=Number(e.get("VIDEO_DURATION"));i.push(new rp({id:l,url:null!=(s=e.get(r))?s:"",index:a,isAlternative:!1,videoType:o,streamManifest:new ro(e.get("MAIN_MANIFEST"),e.get("TRACK_0"),e.get("TRACKS"),e.getSeriesValues("STREAM_CHUNK_"),e.get("INIT_STREAM_CHUNK"),t).getManifestMetadata(),audioManifest:new ro(e.get("MAIN_MANIFEST"),e.get("AUDIO_TRACK_0"),e.get("AUDIO_TRACKS"),e.getSeriesValues("AUDIO_CHUNK_"),e.get("INIT_AUDIO_CHUNK"),t).getManifestMetadata(),theatreModeEnabled:nP(e.get("THEATRE_MODE")),progressBarConfig:new ra({videoProgressBarTokenValue:e.get("VIDEO_PROGRESS_BAR"),videoProgressBarColorTokenValue:e.get("VIDEO_PROGRESS_BAR_COLOR"),ctaButtonBackgroundTokenValue:e.get("CTA_BUTTON_BACKGROUND"),isBanner:n.placement.is.banner}).getProgressBarConfig(),fullScreenClickConfig:new nR({fullCtaTokenValue:e.get("FULL_CTA"),skFullCtaTokenValue:e.get("SK_FSC"),partialFSCTokenValue:e.get("PARTIAL_FSC"),ctaButtonUrlTokenValue:e.get("CTA_BUTTON_URL"),id:l,placementType:n.placement.type,errorLoggingReportingService:t}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:u,appStoreOnDelayConfig:new n$(e.get("APP_STORE_ON_VIDEO_AUTO_DELAY"),n.advertiser.appStoreId,n.placement.is.inLine).getAppStoreOnDelayConfig(),callToActionConfig:d,lastChanceEndcardConfig:c.getLastChanceEndcardConfig(),trackingEventMapConfig:new n5(!1).getTrackingEventMapConfig(),closeButtonConfigProvider:new rr({closeButtonDelaySecondsTokenValue:e.get("CLOSE_BUTTON_DELAY_SECONDS"),incentivizedCloseButtonDelaySecondsTokenValue:e.get("INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS"),incentivizedTokenValue:e.get("INCENTIVIZED"),videoCloseButtonAsSkipTokenValue:e.get("VIDEO_CLOSE_BUTTON_AS_SKIP"),showVideoCloseButtonCountDownTokenValue:e.get("SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN")}),originalVideoUrl:e.get("ORIGINAL_VIDEO_URL"),loopVideo:nP(e.get("VIDEO_LOOPING"))||rp.isVideoOnly(e),showDownloadButton:!!n.advertiser.appStoreId&&nP(e.get("VIDEO_SHOW_CTA"))&&(!d.isPersistent||u.enabled),isFullscreen:n.placement.is.fullscreen,muted:n9(e,n),shouldSplitVideoEndcardClick:nP(e.get("VIDEO_ENDCARD_CLICK_SPLIT")),incentivizedConfig:new i4({enabled:nP(e.get("INCENTIVIZED")),incentivizedCloseButtonDelaySeconds:e.get("INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS"),isIncentiveTiedToCloseButtonDelay:nP(e.get("IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY"))}).getIncentivizedConfig(),expectedVideoDuration:Number.isNaN(h)?void 0:h,omsdkConfig:new rv(e.get("OM_ENABLED"),e.get("OM_SDK_DATA"),e.get("MULTI_OM_SDK_DATA"),t).getOmsdkConfig()}))})),i}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,audioManifest:s,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:l,theatreModeEnabled:c,appStoreOnDelayConfig:d,callToActionConfig:u,lastChanceEndcardConfig:h,progressBarConfig:v,closeButtonConfigProvider:p,originalVideoUrl:g,trackingEventMapConfig:m,showDownloadButton:f,loopVideo:S=!1,muted:C=!1,isFullscreen:y,shouldSplitVideoEndcardClick:E=!1,eventStreams:_,incentivizedConfig:T,expectedVideoDuration:I,omsdkConfig:w,injectedGetScenes:b=i9}){super({isFullscreen:y}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.audioManifest=s,this.progressBarConfig=v,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=l,this.appStoreOnDelayConfig=d,this.callToActionConfig=u,this.showDownloadButton=f,this.lastChanceEndcardConfig=h,this.theatreModeEnabled=c,this.closeButtonConfigProvider=p,this.originalVideoUrl=g,this.loopVideo=S,this.muted=C,this.trackingEventMapConfig=m,this.shouldSplitVideoEndcardClick=E,this.eventStreams=_,this.incentivizedConfig=T,this.expectedVideoDuration=I,this.omsdkConfig=w,this.injectedGetScenes=b,this.addTransition({name:"NEXT",actions:[{name:"closeVideo"},{name:"setTheatreModeInactive"},{name:"disableTheatreMode"}]})}}rp.isVideoOnly=(e=M())=>{let t=!e.some(...rt),n=1===["MAIN_VIDEO","MAIN_STREAM"].filter((t=>e.has(t))).length;return t&&n};var rg=function(e){return e instanceof rp&&["mp4","hls"].includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},rm=class extends nD{getTransitions(){let e=super.getTransitions();return e.push(nN,nV,nL,n_,nT,nI,nw),e}getId(){return this.id}getHtml(){return this.html}getDecodedHtml(){return this.htmlDecoderService.decode(this.getHtml())}getSceneType(){return this.sceneType}getSceneIndex(){return this.injectedGetScenes().findIndex((e=>e.getId()===this.getId()))}getObservabilityData(){return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex()}}addChildScenes(e){this.childScenes.push(...e)}getChildScenes(){return this.childScenes}getChildSceneById(e){return this.childScenes.find((t=>t.getId()===e))}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return x(T({},e),{style:this.isLastPage()?n0.CLOSE:e.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:((e=tF(),t=iQ(),n=en(),i=ei())=>{let r=t2(e);return{duration:il(io(r,"sceneStart"),io(r,"sceneEnd")),viewable_change:iJ(r,i,t,n),size_change:i1(r,t),close_will_appear:i0(r,t),flush_mraid_events:i2(r,t)}})()}static getInstances(){return[]}constructor({id:e,html:t,children:n,closeButtonConfigProvider:i,lastChanceEndcardConfig:r,htmlDecoderService:a=i6(),eventStreams:s,adData:o=Q.getValue(),injectedGetScenes:l=i9}){super({isFullscreen:o.placement.is.fullscreen}),this.childScenes=[],this.id=e,this.html=t,this.children=n,this.closeButtonConfigProvider=i,this.lastChanceEndcardConfig=r,this.htmlDecoderService=a,this.sceneType="composite",this.eventStreams=s,this.injectedGetScenes=l}},rf=function(e){return e instanceof rm&&"composite"===e.getSceneType()},rS=()=>{var e;let t=null==(e=tB.getValue())?void 0:e.scene;return rg(t)?t:rf(t)?t.getChildScenes().filter(rg):[]},rC=(e=ng(),t=rS)=>{let n=t();return(Array.isArray(n)?n:[n]).reduce(((t,n)=>{let i=e.interpreterMap.get(n.getId());return i&&t.push(i),t}),[])};const rE=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i},r=!1)=>{let a,s=i.findAll({where:{type:"scene-event",event:t,data:{scene_id:e}}});if(n){let t=i.findAll({where:{type:"scene-event",event:n,data:{scene_id:e}}})[0];if(!t)return[];a=t.timestamp;let o=s.filter((e=>e.timestamp>a));return r?o:o[0]?[o[0]]:[]}return r?s:s[0]?[s[0]]:[]},ry=e=>rE(e,!0),r_=e=>e.reduce(((e,[t,n])=>e+(n.timestamp-t.timestamp)),0),rT=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i=t2()})=>{let r=(({sceneId:e,eventName:t,precedingEventName:n,reportingService:i=t2()})=>{var r,a;let s=null!=(a=null==(r=(e=>{let t=rE(e,!1);return t.length>0?t[0]:null})({sceneId:e,eventName:t,precedingEventName:n,reportingService:i}))?void 0:r.timestamp)?a:null;if(null===s)return;let o=r_(i.findAllActivityEventPairs("viewability","minimized","maximized").filter((e=>e[0].timestamp>s))),l=r_(i.findAllActivityEventPairs("store-kit-product-view","appStoreOpen","appStoreClose").filter((e=>e[0].timestamp>s))),c=Date.now()-s;return{sceneEventTimestamp:s,elapsedTimeSinceEvent:c,backgroundDuration:o,appStoreDuration:l}})({sceneId:e,eventName:t,precedingEventName:n,reportingService:i});if(void 0===r)return;let{elapsedTimeSinceEvent:a,appStoreDuration:s,backgroundDuration:o}=r;return a-o+s},rI=B({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext"),rw=e=>e?"lastChanceEndcardOpen":void 0,rb=({coordinates:e,clickTarget:t,targetElement:n})=>(null==n?void 0:n.contains(t))||t.contains(n)?0:((e,t,n)=>{if(!n)return;let i=n.getBoundingClientRect(),r=Math.max(i.left-e,0,e-i.right),a=Math.max(i.top-t,0,t-i.bottom);return parseInt(`${Math.sqrt(r*r+a*a)}`,10)})(e.x,e.y,n),rA=()=>({nextButton:document.querySelector(`#${iI}, #${ib}`),closeButton:document.querySelector(`#${i_}`),ctaButton:document.querySelector(`#${im}, #${iw}, #${ig}`),privacyButton:document.querySelector(`#${iO}`),muteButton:document.querySelector(`#${iC}`),countdown:document.querySelector(`#${iT}`)});var rO=class extends C{setupEventHandlers(){let e,t,n;this.injectedSceneEventReportingService.addEventHandler("scene-event",(e=this.collectClickMetrics.bind(this),t=this.resetSceneClickIndex.bind(this),n=this.injectedGetCurrentScene,(i,r)=>{let a=(e=>{let{data:t={}}=e;return{sceneId:t.scene_id,coordinates:t.click_coordinates,clickTarget:t.click_target,eventName:e.event}})(r);if((e=>{let{eventName:t,sceneId:n,coordinates:i,clickTarget:r}=e;return"click"===t&&!!n&&!!i&&!!r})(a)){let t=n();t&&e({currentScene:t,coordinates:a.coordinates,clickTarget:a.clickTarget,lastChanceEndcardVisible:rI.getValue().isLastChanceEndcardOverlayShowing})}["sceneStart","lastChanceEndcardOpen"].includes(a.eventName)&&t()}))}resetSceneClickIndex(){this.sceneClickIndex=void 0}updateGlobalMetrics(){var e,t;this.clickIndex=(null!=(e=this.clickIndex)?e:-1)+1,this.sceneClickIndex=(null!=(t=this.sceneClickIndex)?t:-1)+1}async collectClickMetrics({currentScene:e,coordinates:t,clickTarget:n,lastChanceEndcardVisible:i}){var r,a,s;let o,l,c={sceneId:e.getId(),lastChanceEndcardVisible:i,reportingService:this.injectedSceneEventReportingService};this.updateGlobalMetrics();let d=x(T({clickX:parseInt(String(t.x),10),clickY:parseInt(String(t.y),10),width:window.innerWidth,height:window.innerHeight,clickIndex:this.clickIndex,sceneClickIndex:this.sceneClickIndex},(({coordinates:e,clickTarget:t,lastChanceEndcardVisible:n})=>{let i=rA();return{closeDistance:rb({coordinates:e,clickTarget:t,targetElement:i.nextButton}),ctaDistance:rb({coordinates:e,clickTarget:t,targetElement:i.ctaButton}),privacyDistance:rb({coordinates:e,clickTarget:t,targetElement:i.privacyButton}),muteDistance:n?void 0:rb({coordinates:e,clickTarget:t,targetElement:i.muteButton})}})({coordinates:t,clickTarget:n,lastChanceEndcardVisible:i})),{sceneElapsedDuration:(({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>rT({sceneId:e,eventName:t?"lastChanceEndcardOpen":"sceneStart",reportingService:n}))(c),closeCountdown:i?null==(a=e.getLastChanceEndcardConfig)||null==(r=a.call(e).close)?void 0:r.countdown:null==(s=e.getCloseButtonConfig)?void 0:s.call(e,{}).countdown,closeButtonTimeStamp:(e=>{if(!rA().closeButton)return parseInt(`${(({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>{let i=(e=>{let t=ry(e);return 0===t.length?null:t[t.length-1]})({sceneId:e,eventName:"nextButtonCountdownTick",precedingEventName:rw(t),reportingService:n});if(!i)return 0;let r=Date.now()-i.timestamp,a=1e3*i.activity.data.delay;return r<=1e3?-(a-r):-a})(e)}`,10);let{sceneId:t,lastChanceEndcardVisible:n,reportingService:i}=e;return rT({sceneId:t,eventName:"closeButtonShow",precedingEventName:rw(n),reportingService:i})})(c),minimumView:(({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>{var i;let r=(e=>{let t=ry(e);return 0===t.length?null:t[0]})({sceneId:e,eventName:"nextButtonCountdownTick",precedingEventName:rw(t),reportingService:n});return parseInt(""+1e3*(null!=(i=null==r?void 0:r.activity.data.delay)?i:0),10)})(c),videoTimeStamp:i?void 0:(()=>{var e;let t=null==(e=(0,this.injectedGetAllVideoInterpretersInCurrentScene)()[0])?void 0:e.state.context.currentTime;return void 0!==t?parseInt(""+1e3*t,10):void 0})(),mmp:await(o=this.injectedTpatReportingService,l=this.injectedTimerService,new Promise((e=>{let t=ii(o,"tpat").pipe(it((e=>["postroll.click","clickUrl"].includes(e.event))),iv((()=>!0)));iP(iY(200,l,!1),t).subscribe({next:t=>{e(t)},error:()=>e(!1),complete:()=>e(!1)})})))});this.injectedObservabilityEventReportingService.emit({type:"observability",event:"event",data:T({scene_id:e.getId(),scene_type:i?"lcec":e.getSceneType(),name:"click-metrics"},this.mapClickMetricsForObservability(d))})}mapClickMetricsForObservability(e){return{click_index:e.clickIndex,click_x:e.clickX,click_y:e.clickY,close_button_timestamp:e.closeButtonTimeStamp,close_countdown:e.closeCountdown,close_distance:e.closeDistance,cta_distance:e.ctaDistance,height:e.height,minimum_view:e.minimumView,mmp:e.mmp,mute_distance:e.muteDistance,privacy_distance:e.privacyDistance,scene_click_index:e.sceneClickIndex,scene_elapsed_duration:e.sceneElapsedDuration,video_timestamp:e.videoTimeStamp,width:e.width}}static getServiceIdentifier(){return"ClickMetricsServiceInterface"}constructor({injectedGetAllVideoInterpretersInCurrentScene:e=rC,injectedSceneEventReportingService:t=t2(),injectedObservabilityEventReportingService:n=t$(),injectedGetCurrentScene:i=tU,injectedTpatReportingService:r=nj(),injectedTimerService:a=iR()}={}){super(),this.injectedGetAllVideoInterpretersInCurrentScene=e,this.injectedSceneEventReportingService=t,this.injectedObservabilityEventReportingService=n,this.injectedGetCurrentScene=i,this.injectedTpatReportingService=r,this.injectedTimerService=a,this.clickIndex=void 0,this.sceneClickIndex=void 0,this.setupEventHandlers()}},rk=class extends C{static getServiceIdentifier(){return"CloseButtonServiceInterface"}constructor(...e){super(...e),this.cachedConfig=new Map}},rD=0;function rN(e,t,n,i,r,a){t||(t={});var s,o,l=t;if("ref"in l)for(o in l={},t)"ref"==o?s=t[o]:l[o]=t[o];var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--rD,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(s=e.defaultProps))for(o in s)void 0===l[o]&&(l[o]=s[o]);return H.vnode&&H.vnode(c),c}var rV=()=>{let e=S.getInstance(),t=nl.getServiceIdentifier();return e.get(t)},rL=()=>{let e=S.getInstance(),t=tX.getServiceIdentifier();return e.get(t)},rP=e=>({standbyTimers:()=>{(e||iR()).standby()},wakeTimers:()=>{(e||iR()).wake()}}),rM=(e=iR(),t=tF())=>{e.destroyAll(),t.emit({type:"picture-in-picture",event:"close",fireOnlyOnce:!0}),t.emit({type:"close",event:"CLOSE_AD",fireOnlyOnce:!0})},rR=class extends C{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,(()=>{this.initializeForComponent(e,t-1,n)})).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!=(t=e.autoShowDelay)?t:0);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!=(i=e.autoCloseDelay)?i:5e3;t=this.timerService.getNewTimer(n,(()=>{this.storeKitOverlayService.close()})),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:"off"}),await n.asPromise().then((()=>{this.storeKitOverlayService.open({delayed:!0,fallback:"off"}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()}))})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=iR()){super(),this.storeKitOverlayService=e,this.timerService=t}},rx=()=>{let e=S.getInstance(),t=rR.getServiceIdentifier();if(e.has(t))return e.get(t)},rB=()=>{let e=S.getInstance(),t=tO.getServiceIdentifier();return e.get(t)},rU=e=>({pauseAllIntervals:()=>{(e||rB()).pauseAll()},startAllIntervals:()=>{(e||rB()).startAll()}}),rF=class{init(e,t){var n,i;if(this.sessionClient=(()=>{try{return window.OmidSessionClient.default}catch(e){return}})(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:s,VerificationScriptResource:o,AdEvents:l,MediaEvents:c}=this.sessionClient;(null==t?void 0:t.length)&&(this.verificationScriptResources=t.map((e=>new o(e.vendorURL,e.vendorKey,e.params))));let d=Q.getValue().sdk.version;this.partner=new a(this.vungleData.partnerName,d||this.vungleData.partnerVersion),this.context=new s(this.partner,this.verificationScriptResources),void 0!==e&&(null==(n=this.context)||n.setVideoElement(e)),this.adSession=new r(this.context),(null==(i=this.adSession)?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new c(this.adSession))}eventDrain(){this.funcsOnImpression.forEach((e=>{e()})),this.funcsOnImpression=[]}pushOrCallFunction(e){this.hasSessionStarted?e():this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction((()=>{var e;null==(e=this.mediaEvents)||e.adUserInteraction("click")}))}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}},rH=class extends rF{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null==(e=this.adSession)||e.setCreativeType("htmlDisplay"),null==(t=this.adSession)||t.setImpressionType("loaded"),null==(n=this.adSession)||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){J().emit({type:"error-logging",event:"exception",data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null==(e=this.adEvents)||e.impressionOccurred(),this.hasSessionStarted=!0,null==(t=this.adEvents)||t.loaded(null),this.eventDrain())}onSessionChange(e){if("sessionStart"===e.type)return this.hasSessionStartRequested=!0,void this.onSessionStarted();"sessionFinish"===e.type&&J().emit({type:"cta",event:"removeHandler"})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},rW=()=>J();const rK=(e,t,n=tK())=>{var i,r;if(!(null==(i=t.data)?void 0:i.trackingEventMapConfig.enabled))return;let a=(e=>{let t=e.split("_");return t[t.length-1]})(t.event),s=null==(r=t.data)?void 0:r.trackingEventMapConfig.events;if(!(null==s?void 0:s[a]))return;let o=s[a];null==o||o.forEach((e=>{n.get(e)}))};var rG=(e=rW())=>{eH((()=>(e.addEventHandler("tracking-event",rK),()=>{e.removeEventHandler("tracking-event",rK)})),[e])},rj=(e,t,n,i=!1,r=rW())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let s=`${t}_${e}`;r.emit({type:"tracking-event",event:s,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},rY=()=>{let e=S.getInstance(),t=tG.getServiceIdentifier();return e.get(t)};const rz="last-chance-endcard",rq={actions:{onLastChanceEndcardShow:()=>{let e=t2(),t=t$();e.emit("lastChanceEndcardOpen"),t.emit("scene-start","last-chance-endcard-scene-start")},onLastChanceEndcardHide:()=>{t2().emit("lastChanceEndcardClose")}}};var r$=(e,t)=>{let n=null!=t?t:ng(),i=null!=e?`${rz}-${e}`:rz;return n.interpreterMap.get(i)},rX=class extends C{fireStoreKitOverlayWithDelay(e){this.timerService.getNewTimer(e,(()=>{var e,t;(null==(e=this.storeKitOverlayService)?void 0:e.canOpen())&&(null==(t=this.storeKitOverlayService)||t.open())})).start()}openStoreViewWithDelay(e){if("landscape"===ns()&&this.adData.sdk.is.versionBelow7&&this.storeKitOverlayService)return void this.fireStoreKitOverlayWithDelay(e);let t=this.timerService.getNewTimer(e,(()=>{var e;null==(e=this.productViewService)||e.open(!1)}));t.start(),this.timer=t}reset(){var e;null==(e=this.timer)||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}constructor(e=Q.getValue(),t=iR(),n=nF(),i=nW()){super(),this.adData=e,this.timerService=t,this.productViewService=n,this.storeKitOverlayService=i}},rQ=()=>{let e=S.getInstance(),t=rX.getServiceIdentifier();if(e.has(t))return e.get(t)},rZ=(e=M())=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0,shouldRenderPictureInPicture:!1,allowDebug:e.has("IS_RUNNING_INSIDE_EMBED")||e.has("IS_STAFF_DEVICE_BID"),globalTimer:0,isTheatreModeActive:!1}),rJ=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach((t=>{n[e.getId()].entry.push(t.name)})),e.getExitActions().forEach((t=>{n[e.getId()].exit.push(t.name)})),t.forEach((t=>{let i=t.actions.map((e=>e.name)),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}})),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach((e=>{Object.assign(t,this.convertScene(e))})),t}removeFalsyValues(e){return Object.keys(e).forEach((t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]})),e}},r0=class{parseAdExperienceData(e){try{let t=t9(e);return JSON.parse(t)}catch(e){this.freeFormReportingService.emit({type:"free-form",event:"decodingError"})}}getAdExperience(){var e,t;if(!this.adExperienceCache){let t=null!=(e=this.tokenService.get("AD_EXPERIENCE"))?e:"",n=this.parseAdExperienceData(t);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(n)}return null!=(t=this.adExperienceCache)?t:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e){if(e&&this.adData.gdpr.requiresConsent){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{NEXT:{target:t}}},e.statemachine.initial=nB}return e}getAdMachineConfig(){let e=this.getAdExperience();return x(T({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map((([e,t])=>x(T({},t),{id:e}))):[]}constructor(e=M(),t=J(),n=tj(),i=Q.getValue()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.adData=i}},r1=(e=ng())=>e.interpret(((e=ng())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=((e=M())=>{let t;t=e.has("AD_EXPERIENCE")?((e=new r0,t=i9())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach((e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach((e=>{if(n.states[t].on){var i,r;let a=e.name,s=null==(i=e.scene)?void 0:i.getId(),o=n.states[t].on[a],l={actions:Array.from(new Set([...Array.from(null!=(r=null==o?void 0:o.actions)?r:[]),...e.actions.map((e=>e.name))])),cond:(null==o?void 0:o.cond)?o.cond:e.cond};s&&(l.target=s),n.states[t].on[a]=T({},null!=o?o:{},l)}})),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map((e=>e.name))),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map((e=>e.name)))})),x(T({},n),{context:T({},rZ(),n.context)})})():(()=>{let e=new rJ,t=i9(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:rZ()}})();let n={actions:T({},T({},((e=tF(),t=Q.getValue(),n=rM,i=nW)=>({closeAd:()=>{n()},setTheatreModeActive:V({isTheatreModeActive:!0}),setTheatreModeInactive:V({isTheatreModeActive:!1}),closeStoreKitOverlay:()=>{var e;null==(e=i())||e.close()},ensureRewardGranted:()=>{let n=e.hasExistingEvent({type:"incentivized-event",event:"forfeitReward"}),i=e.hasExistingEvent({type:"incentivized-event",event:"grantReward"});!t.placement.is.rewarded||n||i||e.emit({type:"incentivized-event",event:"grantReward",fireOnlyOnce:!0})}}))(),((e=M(),t=t$(),n=tj(),i=en(),r=ei())=>({setPrivacyButtonVisible:V({isPrivacyButtonVisible:!0}),setPrivacyButtonHidden:V({isPrivacyButtonVisible:!1}),openPrivacyUrl:()=>{t.emit("privacy-cta","privacy-cta");let i=e.get("VUNGLE_PRIVACY_URL");n.openPrivacy(i)},setPrivacyDrawerOpen:V({isPrivacyDrawerOpen:!0}),setPrivacyDrawerClosed:V({isPrivacyDrawerOpen:!1}),triggerInternalViewableChange:e=>{i.setInternalViewable(!e.isPrivacyDrawerOpen),r.emit({type:"viewability",event:e.isPrivacyDrawerOpen?"internal-minimized":"internal-maximized"})}}))(),((e=rC,t=rV())=>({muteSound:()=>{tI().setMutedSignal(!0)},unMuteSound:()=>{tI().setMutedSignal(!1)},emitMuted:()=>{let e=nc(),t=tI();e.emit({type:"video",event:t.isMuted()?"mute":"unmute"})},emitVideoError:(e,t)=>{nc().emit({type:"video",event:"error",data:t})},closeVideo:()=>{e().forEach((e=>{e.send({type:"CLOSE"})}))},closeVideoCurrentScene:()=>{e().forEach((e=>{e.send({type:"CLOSE"})}))},fireImpression:()=>{nj().emit("checkpoint.0",!0)},postrollView:()=>{nj().emit("postroll.view",!0)},sendEventVideoSkipToNextScene:()=>{t$().emit("video-skip-to-endcard","video-skip-to-endcard")},setPictureInPictureVideoContext:()=>{let e=tU(),n=i5(e.getId()),i=null==n?void 0:n.state.context.videoElement;t.setVideoContext(e,i,n)},showPictureInPicture:V({shouldRenderPictureInPicture:()=>!0}),closePictureInPicture:V({shouldRenderPictureInPicture:()=>!1}),sendFatalVideoError:()=>{let e=rL(),t=tU(),n={type:"error-logging",event:"resource",data:{resource_type:"video",resource_url:null==t?void 0:t.url,is_fatal:!0,error:Error(tL)}};e.send(n)},disableTheatreMode:()=>{nu().emit({type:"theatre-mode-event",event:"disableTheatreMode"})}}))(),((e=nW())=>({closeOverlayView:()=>{(null==e?void 0:e.isOpen())&&(null==e||e.close())},interruptOverlayView:()=>{(null==e?void 0:e.isOpen())&&(null==e||e.interrupt())},resumeOverlayView:()=>{(null==e?void 0:e.isInterrupted())&&(null==e||e.resume())},showOverlayView:()=>{null!=e&&e.isOpen()||((null==e?void 0:e.isInterrupted())?null==e||e.resume():null==e||e.open())}}))(),((e=rx)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}))(),((e=nF(),t=nW(),n=rM,i=Q.getValue(),r=ei)=>e?((e=nF(),t=nW(),n=rM,i=Q.getValue(),r=ei)=>({showProductView:()=>{i.sdk.is.versionBelow7&&"landscape"===ns()&&t?(null==t?void 0:t.canOpen())&&t.open({fallback:"off"}):null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{i.sdk.is.version70x&&e&&r().addEventHandler("viewability",((e,t)=>{"maximized"===t.event&&n()}))}}))(e,t,n,i,r):{showProductView:()=>{},hideProductView:()=>{},endAdOnProductViewClose:()=>{}})(),rP(),rU(),((e=t2())=>({emitCloseButtonShow:()=>{e.emit("closeButtonShow")},emitCloseButtonClick:()=>{e.emit("closeButtonClick")},setCloseButtonVisible:V({isCloseButtonVisible:!0}),setCloseButtonHidden:V({isCloseButtonVisible:!1})}))(),((e=tU,t=nj,n=rj,i=i8,r=rY,a=t2)=>({onCreativeView:()=>{let t=e();t&&["endcard","image"].includes(t.getSceneType())&&n("creativeView",t.getId(),t.getTrackingEventMapConfig(),!0)},destroyIframe:V({shouldRenderIFrame:!1}),initCheckpoints:()=>{!t().hasExistingEvent({type:"tpat",event:"checkpoint.0"})&&en().isViewable()&&iK(0)},initOmsdkHtmlDisplayService:()=>{S.getInstance().bind(rH.getServiceIdentifier(),new rH)},closeWillAppear:()=>{a().emit("closeWillAppear")},fireIfEngagementIsUsed:()=>{var e;(null==(e=i())?void 0:e.isEndcardAmplified())&&r().pushEvent({name:"engagement-is-used",metric:"engagement-is-used"})},registerSizeChangeMraidEvent:()=>{window.addEventListener("resize",(()=>{a().emit("sizeChange")}))}}))(),{showLastChanceEndcard:()=>{let e=tB.getValue().scene;if(nk(e)){let t=r$(e.getId());rI.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:"SHOW"})}},closeLastChanceEndcard:()=>{rI.setValue({isLastChanceEndcardOverlayShowing:!1});let e=tB.getValue().scene;if(nk(e)){let t=r$(e.getId());null==t||t.send({type:"HIDE"})}}},((e=rQ)=>({resetAppStoreOnDelayService:()=>{let t=e();null==t||t.reset()}}))()))};return e.has("IS_RUNNING_INSIDE_EMBED")&&J().emit({type:"scene-builder-event",event:"sceneBuilderComplete",data:((e,t,n={})=>{let i=[],r=new Set,a=new Map,s=new Set,o=t.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return function t(l){var c;if(r.has(l))return;r.add(l);let d=function(t){let r,s;if(a.has(t))return a.get(t);let l=o[t],c=l?l.getSceneType():"closed",d=!!l&&l.isAlternative();r=t===e.initial?"start":"closed"===c?"end":"intermediate";let u=[];d&&u.push("Alternate"),u.push((s=n[c]||c)?s.charAt(0).toUpperCase()+s.slice(1):s);let h={id:t,label:u.join(" "),type:r,alternative:d,connections:[]};return a.set(t,h),i.push(h),h}(l),u=(null==(c=e.states[l])?void 0:c.on)||{},h=null;if("LAST_CHANCE_ENDCARD"in u){let e=`${l}_last_chance`;h={id:e,label:"Last Chance Endcard",type:"intermediate",alternative:!1,connections:[]},a.set(e,h),i.push(h);let t=`${l}->${e}`;s.has(t)||(s.add(t),d.connections.push(e))}Object.entries(u).forEach((([n,i])=>{"LAST_CHANCE_ENDCARD"!==n&&(Array.isArray(i)?i:[i]).forEach((i=>{let a=null==i?void 0:i.target;if(!a||!function(t,n){let i=new Map,r=0;return function t(n){var a;i.has(n)||(i.set(n,r++),Object.values((null==(a=e.states[n])?void 0:a.on)||{}).forEach((e=>{(Array.isArray(e)?e:[e]).forEach((e=>{"object"==typeof e&&(null==e?void 0:e.target)&&!i.has(e.target)&&t(e.target)}))})))}(e.initial),"closed"===n||!!i.has(n)&&(!i.has(t)||i.get(t)<=i.get(n))}(l,a))return;let o=l,c=d;"NEXT"===n&&h&&(o=h.id,c=h);let u=`${o}->${a}`;s.has(u)||(s.add(u),c.connections.push(a)),r.has(a)||t(a)}))}))}(e.initial),{nodes:i.map((e=>{let t=[...new Set(e.connections)],n=t.filter((e=>"closed"!==e||1===t.length||!t.some((e=>"closed"!==e))));return x(T({},e),{connections:n})}))}})(t,i9(),{endcard:"Playable"})}),[t,n]})();return e.createMachine(n,i)})(e)),r2=function(e,t,n=ng()){let i=eK((()=>n.createMachine(e,t)),[e]),r=tg(i.initialState),[a,s]=eK((()=>{let e=n.interpret(i),t=e.subscribe((e=>{r.value=e}));return[e,t]}),[i]);return eH((()=>("Running"!==a.status&&a.start(),()=>{s.unsubscribe(),a.stop()})),[a]),[r,a.send,a,e]},r3=(e,t=i9())=>{let n=t.find((t=>t.getId()===e.value));if(!n)throw Error(`No scene found for state ${e.value}`);return n},r4=()=>{let e=S.getInstance(),t=t3.getServiceIdentifier();return e.get(t)},r6=()=>{let e=S.getInstance(),t=nn.getServiceIdentifier();return e.get(t)};const r5={video:"video-scene-start",endcard:"endcard-scene-start"};var r7=(e,t=t$())=>{if("closed"===e.getSceneType())return;let n=T({name:"scene-start"},e.getObservabilityData()),i=[n,...(e=>{let t=e.getSceneType();return t&&t in r5?[r5[t]]:[]})(e).map((e=>x(T({},n),{metric:e})))];t.emit(i)},r8=({productViewService:e=nF(),timerService:t=iR(),injectedCloseAd:n=rM})=>(eH((()=>{(null==e?void 0:e.isOpen())?e.subscribe((()=>{e.isOpen()||n()})):t.getNewTimer(500,(()=>{n()})).start()}),[]),rN("div",{id:"app-store-transition-fallback",className:"wnLcbW_fallback",children:rN("button",{title:"Close","aria-label":"Close",id:i_,type:"button",onClick:()=>{n()},className:"closeIcon",children:rN("div",{className:"closeIcon"})})})),r9=class extends ev{componentDidCatch(e,t){J().emit({type:"error-logging",event:"exception",data:{error:{message:e.message,stack:`Stack trace:\n${e.stack}\n\nError info:\n${JSON.stringify(t)}\n`}}})}render(){let{children:e}=this.props;return e}},ae=({sendAdEvent:e=()=>{},mraidService:t=tj(),adData:n=Q.getValue()})=>{let i=n=>{t.consentAction(n),e({type:"NEXT"})};return rN("div",{className:"C4yOdG_gdpr",id:"gdpr",children:[rN("div",{className:"C4yOdG_content",children:[rN("header",{className:"C4yOdG_header",children:[rN("span",{className:"C4yOdG_icon"}),rN("h3",{id:"gdpr-title",className:"C4yOdG_title",children:n.gdpr.title})]}),rN("p",{id:"gdpr-body-text",className:"C4yOdG_bodyText",children:n.gdpr.body})]}),rN("div",{className:"C4yOdG_buttons",children:[rN("button",{type:"button",id:"gdpr-accept",className:"C4yOdG_primaryButton",onClick:()=>i("opted_in"),children:n.gdpr.accept}),rN("button",{type:"button",id:"gdpr-deny",className:"C4yOdG_secondaryButton",onClick:()=>i("opted_out"),children:n.gdpr.deny})]})]})};const at=e=>4===e.length?e:at(`0${e}`);var an=class{constructor(e){this.adData=e,this.getBits=()=>{let e=this.adData.placement.id;if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return e.split("").map((e=>at(parseInt(e,16).toString(2)))).join("").split("")}}};u="_0zGmtq_bit",h="_0zGmtq_one";const ai=(e,t)=>`bit-${e}-${t}`;var ar=({adData:e=Q.getValue()})=>{let t=new an(e);return e.placement.is.fullscreen?rN("div",{className:"_0zGmtq_watermark",id:"watermark",children:[rN("div",{className:`${h}  _0zGmtq_leading ${u}`}),t.getBits().map(((e,t)=>rN("div",{className:`${u} ${"0"===e?"_0zGmtq_zero":h}`,id:ai(e,t)},ai(e,t))))]}):null},aa=(e,t,n=J())=>(eH((()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)})),[n,e,t]),()=>{n.removeEventHandler(e,t)}),as=function(e=nu()){let t=tg(!0);return aa("theatre-mode-event",((n,i)=>{e.hasExistingEvent({type:"theatre-mode-event",event:"disableTheatreMode"})?t.value=!0:"hideControls"===i.event?t.value=!1:"revealControls"===i.event&&(t.value=!0)}),e),t},ao=(...e)=>e.filter(Boolean).join(" ");const al={accelerate:"#96633d",others:"#853d96"};var ac=({handleClick:e,adSource:t,theatreModeReportingService:n=nu()})=>rN("button",{type:"button",id:iO,title:"Liftoff Privacy",className:ao("m2_mMq_privacyButton",as(n).value?"fadeIn":"fadeOut"),onClick:e,"aria-label":"Liftoff Privacy",children:rN("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[rN("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:al[t],opacity:".6",strokeWidth:"0"}),rN("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),rN("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),rN("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),rN("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})}),ad=((s={})[s.LEFT=0]="LEFT",s[s.RIGHT=1]="RIGHT",s[s.UP=2]="UP",s[s.DOWN=3]="DOWN",s),au=((o=au||{})[o.HORIZONTAL=0]="HORIZONTAL",o[o.VERTICAL=1]="VERTICAL",o);const ah=e8(0),av=e8(0),ap=e8(!1),ag=e8(0);var am=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=eW(null),s=(e,t)=>Math.abs(e)>Math.abs(t);return rN("div",{ref:a,title:"swipe",onTouchStart:e=>{ap.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),ah.value=t,av.value=n,ag.value=Date.now()},onTouchEnd:e=>{var o,l,c,d,u;let h=null==a||null==(o=a.current)?void 0:o.childNodes;if(!ap||!h)return;let{endX:v,endY:p}=e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!=(d=null==(l=e.detail)?void 0:l.clientX)?d:0,endY:null!=(u=null==(c=e.detail)?void 0:c.clientY)?u:0},g=((e,t)=>{let n=e-ah.value,i=t-av.value;return{Direction:s(n,i)?+(n>0):i>0?3:2,Orientation:+!s(n,i),Distance:s(n,i)?Math.abs(n):Math.abs(i),DeltaX:n,DeltaY:i}})(v,p),m=h[0],f=0===g.Orientation?m.clientWidth:m.clientHeight;if(g.Distance>=.05*f){switch(g.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}ap.value=!1}},children:e})},af=((l={})[l.LOVE=1]="LOVE",l[l.BROKEN=2]="BROKEN",l[l.OFFENSIVE=3]="OFFENSIVE",l),aS=class{getAdSource(){return this.adData.advertiser.dsp}getCreativeId(){return this.adData.advertiser.creative.id}getEventId(){return this.adData.platform.sessionId}getVersions(){var e;return`SDK ${this.adData.sdk.version}, VM ${null!=(e=window.appVersion)?e:"0.0.0"}, OS ${this.adData.device.os.version}`}handleDrawerClose(e){e({type:"PRIVACY_BOTTOM_DRAWER_CLOSE"})}handleIconClick(e){e({type:"PRIVACY_BOTTOM_DRAWER_OPEN"})}handleReadMoreClick(e){e({type:"PRIVACY_BOTTOM_DRAWER_CLOSE"}),window.setTimeout((()=>{e({type:"OPEN_PRIVACY_PAGE"})}),50)}privacyDrawerEnabled(){return this.adData.placement.is.fullscreen}constructor(e=M(),t=Q.getValue(),n=t$()){this.tokenService=e,this.adData=t,this.observabilityReportingService=n,this.handleFeedbackSubmit=e=>{this.observabilityReportingService.emit("ad-feedback",{1:"ad-feedback-love",2:"ad-feedback-broken",3:"ad-feedback-offensive"}[e])}}};v="_0LRN8a_title";const aC=[{type:af.LOVE,text:"Love it",emoji:"😍"},{type:af.BROKEN,text:"Broken",emoji:"🫤"},{type:af.OFFENSIVE,text:"Offensive",emoji:"🤬"}];var aE=({handleFeedbackSubmit:e})=>{let t=tg(null);return rN("div",{className:"_0LRN8a_container",children:t.value?rN("div",{className:"_0LRN8a_completeContainer",children:[rN("div",{className:ao(v,"_0LRN8a_thanks"),children:"Thank you"}),rN("span",{className:"_0LRN8a_complete"})]}):rN("div",{className:"_0LRN8a_popup",children:[rN("div",{className:ao(v,"_0LRN8a_question"),children:"What do you think of this ad?"}),rN("div",{className:"_0LRN8a_options",children:aC.map((n=>rN("button",{type:"button",className:"_0LRN8a_option",onClick:()=>{t.value=n.type,e(t.value)},children:[rN("span",{className:"_0LRN8a_optionText",children:n.text}),rN("span",{className:"_0LRN8a_emoji",children:n.emoji})]},n.type)))})]})})},ay=({label:e,value:t,id:n})=>{let i=tg(!1);return rN("div",{className:"rM5gmW_adInfoRow",id:n,children:[rN("div",{className:"rM5gmW_adInfoLabel",children:e}),rN("button",{type:"button",className:ao("rM5gmW_adInfoValue",i.value?"rM5gmW_expanded":""),onClick:()=>{i.value=!i.value},children:t})]})},a_=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r,versions:a,handleFeedbackSubmit:s})=>rN("div",{className:ao("FbTWOG_popupContainer",e?"FbTWOG_popupContainerDisplay":""),id:iA,children:[rN("div",{className:e?"FbTWOG_mask":"FbTWOG_displayNone",id:"privacy-popup-mask",onClick:n,role:"none"}),rN(am,{onSwipeDown:n,children:rN("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:ao("FbTWOG_privacyPopup",e?"FbTWOG_show":"FbTWOG_hide"),children:[rN("div",{className:"FbTWOG_popupHeader",children:rN("button",{type:"button","aria-label":"Close privacy popup","aria-hidden":e?"false":"true",onClick:n,id:"privacy-close-button",children:rN("span",{className:"closeIcon privacy"})})}),rN("div",{className:"FbTWOG_popupBody",children:rN(aE,{handleFeedbackSubmit:s})}),rN("div",{className:"FbTWOG_privacyPolicy",children:rN("button",{type:"button",className:"FbTWOG_readMore","aria-hidden":e?"false":"true",onClick:t,id:"privacy-read-more-button",children:"Privacy Policy"})}),rN("div",{className:"FbTWOG_popupFooter",children:[rN("div",{className:"FbTWOG_adInfoTitle",children:"Ad Info"}),rN(ay,{label:"Creative ID:",value:i,id:"privacy-drawer-creative-id"}),rN(ay,{label:"Event ID:",value:r,id:"privacy-drawer-event-id"}),rN(ay,{label:"Versions:",value:a,id:"privacy-drawer-versions"})]})]})})]});const aT=e8(!1);var aI=({sendAdEvent:e,privacyService:t=new aS,mraidEventReportingService:n=ee()})=>{let i=()=>{aT.value=!1,t.handleDrawerClose(e)};return aa("mraid-event",((e,t)=>{"custom-close"===t.event&&aT.value&&i()}),n),rN(eh,{children:[rN(ac,{handleClick:()=>{t.handleIconClick(e),aT.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&rN(a_,{isOpen:aT.value,closeHandler:i,handleReadMoreClick:()=>{aT.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId(),versions:t.getVersions(),handleFeedbackSubmit:t.handleFeedbackSubmit})]})},aw=function(e,t){let n=eW(0),i=eW(0);return eH((()=>{let r=r=>{let a=Date.now();a-i.current>800&&(n.current=0),n.current+=1,i.current=a;let{clientX:s,clientY:o}=r;n.current>=3&&(e(s,o,t),n.current=0)};return window.addEventListener("pointerdown",r),()=>window.removeEventListener("pointerdown",r)}),[e,t]),null},ab=({delay:e,handleCountdownUpdate:t,isVisible:n=!0,children:i})=>{let r=((e,t=rB())=>{let n=tg(e),i=eW(void 0),r=()=>{var e;null==i||null==(e=i.current)||e.destroy(),i.current=void 0};return eH((()=>{var e;void 0===i.current&&(i.current=t.getNewInterval(1e3,(()=>{let e=n.value-1;n.value=e<=0?0:e})),null==(e=i.current)||e.start());return()=>r()}),[]),t_((()=>{0===n.value&&r()})),aa("scene-event",((e,t)=>{"forceCompleteCountdown"===t.event&&(n.value=0)})),n})(e);if(eH((()=>{t&&t(r.value)}),[r.value]),r.value>0&&!n)return rN("div",{id:iT,className:"NQnIja_countdownInvisible"});if(r.value>0&&n){let e=Math.round(r.value);return 0===e?null:rN("div",{id:iT,className:"NQnIja_countdown",children:e})}return rN("div",{children:i})};const aA=["mrec","banner","in_line"];var aO=class{placementSupportsNextButton(){return!aA.includes(this.adData.placement.type)}constructor(e=Q.getValue(),t=t2(),n=tU()){this.adData=e,this.sceneEventReportingService=t,this.scene=n,this.handleCountdownUpdate=e=>{this.sceneEventReportingService.emit({type:"scene-event",event:"nextButtonCountdownTick",data:{scene_id:this.scene.getId(),scene_type:this.scene.getSceneType(),delay:e}})}}},ak=class{getButtonPadding(e=0,t=10){return((e=nj())=>["clickUrl","postroll.click"].some((t=>e.findAll({where:{type:"tpat",event:t}}).length>0)))()?t:Math.min(Math.max(parseInt(this.tokenService.get("CLOSE_BUTTON_PADDING"),10)||e,e),t)}constructor(e=M()){this.tokenService=e}},aD=(e=r1())=>e.state.context.isTheatreModeActive,aN=({sendEvent:e=()=>{},type:t=n0.CLOSE,service:n=new ak,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===n0.SKIP?"mqB7Ka_skipIcon":"closeIcon",s=t===n0.SKIP?"Skip button":"Close button",o=tg(n.getButtonPadding());eH((()=>{e&&e({type:"CLOSE_BUTTON_WILL_SHOW"})}),[]),aa("tpat",(()=>{o.value=n.getButtonPadding()})),((e,t=iy,n=Q.getValue(),i=nu(),r=iR(),a=r1(),s=ei())=>{let o=eW(null),{scene:l}=tB.getValue(),c=!n.placement.is.fullscreen||!rg(l)||!l.theatreModeEnabled||i.hasExistingEvent({type:"theatre-mode-event",event:"disableTheatreMode"}),d=()=>{c||i.emit({type:"theatre-mode-event",event:"hideControls"})};aa("viewability",(()=>{c||i.emit({type:"theatre-mode-event",event:"revealControls"})}),s),aa("theatre-mode-event",((n,i)=>{c||("revealControls"===i.event&&(e({type:"STOP_THEATRE_MODE"}),o.current=r.getNewTimer(t,d),o.current.start()),"hideControls"===i.event&&e({type:"START_THEATRE_MODE"}))}),i),eH((()=>{if(c)return()=>{};let e=e=>{if(aD(a)&&rg(l)&&!l.getFullScreenClickConfig().enabled){var t;let n=e.target;n&&"function"==typeof n.closest&&(n.closest("#download-button")||n.closest("#persistent-simple-cta")||n.closest("#persistent-rich-cta")||n.closest('[id*="persistent"][id*="cta"]'))||(o.current&&(null==(t=o.current)||t.destroy()),i.emit({type:"theatre-mode-event",event:"revealControls"}))}};return document.addEventListener("pointerdown",e),o.current=r.getNewTimer(t,d),o.current.start(),()=>{document.removeEventListener("pointerdown",e),o.current&&o.current.destroy()}}),[])})(e);let l=-o.value;return rN("button",{title:s,"aria-label":s,id:i_,type:"button",style:{padding:`${o.value}px`,margin:`${l}px`},onClick:t=>{t.stopPropagation(),e({type:"CLOSE_BUTTON_CLICK"}),r(),e(i?{type:"LAST_CHANCE_ENDCARD"}:{type:"NEXT"})},children:rN("div",{className:a})})};const aV=e8(!0);var aL=({id:e,sendAdEvent:t,showLastChanceEndcard:n=!1,config:i,beforeClick:r=()=>{},theatreModeReportingService:a=nu()})=>{let{delay:s=0,countdown:o=!0}=i,l=new aO,c=s>0;aa("viewability",((e,t)=>{aV.value="maximized"===t.event}));let d=as(a);return l.placementSupportsNextButton()?rN("div",{id:(null!=e?e:n)?iI:ib,className:ao("LJWyoG_nextButton",d.value?"fadeIn":"fadeOut"),role:"button",tabIndex:0,"data-countdown-running":aV.value,children:c?rN(ab,{delay:s,isVisible:o,handleCountdownUpdate:l.handleCountdownUpdate,children:rN(aN,{sendEvent:t,type:i.style,showLastChanceEndcard:n,beforeClick:r})}):rN(aN,{sendEvent:t,type:i.style,showLastChanceEndcard:n,beforeClick:r})}):null},aP=(e,t)=>{eH((()=>{let n=window.setInterval((()=>{var i;(null==(i=e.current)?void 0:i.complete)&&(t({type:"PRIVACY_LOGO_SHOW"}),window.clearInterval(n))}),100);return()=>{window.clearInterval(n)}}),[e])},aM=class{clickHandler(e,t){aD(this.adMachineInterpreter)?this.theatreModeReportingService.emit({type:"theatre-mode-event",event:"revealControls"}):this.fscReportingService.emit({type:"fsc",event:"fsc",data:{cta_url:t,scene_id:e}})}constructor(e=na(),t=J(),n=nW(),i=r1()){this.fscReportingService=e,this.theatreModeReportingService=t,this.storeKitOverlayService=n,this.adMachineInterpreter=i}};const aR=e8(!1),ax=(e,t)=>{aR.value="minimized"===t.event};var aB=({config:e,ctaUrl:t,sceneId:n,service:i=new aM,reportingService:r=ei(),children:a})=>{let s;return eH((()=>(r.addEventHandler("viewability",ax),()=>{r.removeEventHandler("viewability",ax)})),[]),rN(eh,{children:[e.enabled&&rN("button",{className:ao("_7pzQ5q_overlayCta",aR.value?"_7pzQ5q_hidden":""),type:"button",id:(s=e.id)?`${s}-fullscreen-overlay`:"fullscreen-overlay","aria-label":"fsc","aria-hidden":aR.value,style:e.styleData,onClick:()=>i.clickHandler(n,t)}),a]})},aU=class{emitClickEvents(e){this.ctaReportingService.emit({type:"cta",event:"lastChanceEndcardCta",data:{scene_id:e}})}constructor(e=J()){this.ctaReportingService=e}};const aF=e8(!1);var aH=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,onVisibilityChange:i,sceneId:r})=>{var a,s,o,l,c,d,u,h;let v=new aU,p=eW(null),g=(e=>{let[t]=r2(eK((()=>({id:null!=e?`${rz}-${e}`:rz,initial:"HIDDEN",context:{delay:0},states:{SHOWING:{on:{HIDE:{target:"HIDDEN",actions:["onLastChanceEndcardHide"]}}},HIDDEN:{on:{SHOW:{target:"SHOWING",actions:["onLastChanceEndcardShow"]}}}}})),[e]),rq);return t})(e.id);aP(p,t);let m=()=>{aF.value=!0,v.emitClickEvents(r)};return eH((()=>{i(e.enabled&&!g.value.matches("HIDDEN"))}),[e.enabled,g.value]),!e.enabled||g.value.matches("HIDDEN")?null:rN("div",{className:ao("poFP6W_overlay",(null==(a=e.appMeta)?void 0:a.icon)?"poFP6W_opaque":""),id:"last-chance-endcard-overlay",children:rN(aB,{config:{enabled:!!(null==(s=e.fsc)?void 0:s.enabled)},sceneId:r,children:[rN(aL,{sendAdEvent:t,config:null!=(h=e.close)?h:{},showLastChanceEndcard:!1}),rN("div",{className:ao("poFP6W_lastChanceEndCard",n?"poFP6W_backgroundNone":""),id:"last-chance-endcard",children:[(null==(o=e.appMeta)?void 0:o.icon)&&rN("img",{className:"poFP6W_icon",ref:p,src:null==(l=e.appMeta)?void 0:l.icon,alt:null==(c=e.appMeta)?void 0:c.name,id:"last-chance-endcard-app-icon",onClick:m,"aria-hidden":"true"}),rN("p",{className:"poFP6W_name",id:"last-chance-endcard-app-name",onClick:m,"aria-hidden":"true",children:null==(d=e.appMeta)?void 0:d.name}),rN("button",{type:"button",className:ao("poFP6W_button",aF.value?"":"poFP6W_animate"),"data-animate":!aF.value,onClick:m,id:iw,children:null==(u=e.cta)?void 0:u.text})]})]})})},aW=e=>{eH((()=>(e&&e({type:"CLOSE_BUTTON_MOUNT"}),()=>{e&&e({type:"CLOSE_BUTTON_UNMOUNT"})})),[])},aK=()=>J(),aG=(e,t=aK())=>{eH((()=>{var n;e&&"function"==typeof e.getCallToActionConfig&&t.emit({type:"app-meta",event:"app-meta-update",data:null!=(n=e.getCallToActionConfig().appMeta)?n:{enabled:!1}})}),[])},aj=({htmlString:e,VmComponent:t})=>{let[n,i]=(eD=1,eF(eX,null));return eH((()=>{i(((e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=e=>{var n;if(!e)return null;if(e.nodeType===Node.TEXT_NODE)return(null==(n=e.nodeValue)?void 0:n.trim())?e.nodeValue:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;let r=e.tagName.toLowerCase(),a={};return Array.from(e.attributes).forEach((e=>{a[e.name]=e.value})),"vm-component"===r?rN(t,{sceneId:a["scene-id"]||""}):ed(r,a,...Array.from(e.childNodes).map(i).filter((e=>!!e)))};return i(n.body.firstChild)})(e,t))}),[e]),n},aY=function(e){return e instanceof ri&&"image"===e.getSceneType()};const az={actions:{ASOD_SET_DELAY:V({delay:(e,t)=>t.delay}),ASOD_OPEN_APP_STORE:e=>{let t=rQ();null==t||t.openStoreViewWithDelay(e.delay)}}};var aq=(e,t,n=!0,i=!0)=>{let[,r]=r2({id:`app-store-on-delay-${e}`,initial:"ASOD_INITIAL",context:{delay:0},states:{ASOD_INITIAL:{on:{ASOD_SHOW:{target:"ASOD_SHOWN",actions:["ASOD_SET_DELAY"]}}},ASOD_SHOWN:{entry:["ASOD_OPEN_APP_STORE"]}}},az);eH((()=>t.enabled&&n&&i?(r({type:"ASOD_SHOW",delay:t.autoShowDelay}),()=>{let e=rQ();null==e||e.reset()}):()=>{}),[n,i])},a$=(e,t=!0,n=rx(),i=nW())=>{let r=tg(null==i?void 0:i.canOpen()),a=tg(!1);eH((()=>(e.enabled&&r.value&&t&&!a.value&&(null==n||n.startAutoShow(e),a.value=!0),()=>{})),[t,r.value,a.value]),eH((()=>{e.enabled&&(null==n||n.initializeForComponent((e=>{r.value=e}),10,500))}),[]),eH((()=>a.value?()=>null==n?void 0:n.reset():()=>{}),[])},aX=({fullScreenClickConfig:e,sceneId:t,shouldReplaceShowStoreKitOverlay:n,callToActionService:i=nz(),sceneEventReportingService:r=t2()})=>aa("fsc",((a,s)=>{var o;(null==(o=s.data)?void 0:o.scene_id)===t&&(null==e?void 0:e.enabled)&&(i.invoke({target:e.target,url:e.ctaUrl,shouldReplaceShowStoreKitOverlay:n}),r.emit("click"))})),aQ=({callToActionConfig:e,sceneId:t,shouldReplaceShowStoreKitOverlay:n,callToActionService:i=nz(),sceneEventReportingService:r=t2()})=>aa("cta",((a,s)=>{var o,l,c;if((null==(o=s.data)?void 0:o.scene_id)===t&&e){let{target:t,url:a}=e,o="endcardCta"===s.event;i.invoke({target:t,url:null!=(c=null==(l=s.data)?void 0:l.cta_url)?c:a,shouldReplaceShowStoreKitOverlay:n,isClickEventFromIframe:o}),r.emit("click")}})),aZ=(e=document.documentElement)=>"ontouchstart"in e?"touchstart":"click",aJ=(e,t,n=iV,i=t2)=>{eH((()=>{if(t)return()=>{};let e=e=>{n(e,i)};return document.body.addEventListener(aZ(),e,!0),()=>{document.body.removeEventListener(aZ(),e,!0)}}),[e])},a0=class{handleImageFailure(){let e=this.nextButtonService.placementSupportsNextButton(),t=this.scene.isChild();e&&!t&&this.sendAdEvent({type:"IMAGE_FAILURE"})}handleImageLoaded(){this.smartDownloadQueueService.resume(),this.revokeBlobUrl()}revokeBlobUrl(){this.blobUrl&&(URL.revokeObjectURL(this.blobUrl),this.blobUrl=void 0)}decodeCachedImage(e,t){let{mimeType:n,data:i}=e;if(!n)return t;try{let e=new Uint8Array(i),t=new Blob([e],{type:n});return this.blobUrl=URL.createObjectURL(t),this.blobUrl}catch(e){return this.errorLoggingReportingService.emit({type:"error-logging",event:"resource",data:{error:{resource_url:t,error_source:"resource",message:`Unable to decode cached image data: ${e}`}}}),t}}async getImageUrl(e){if(!/^https?:/i.test(e))return e;let t=this.smartDownloadQueueService.getCompletedItem(e);if(t)return this.decodeCachedImage(t,e);let n=await this.urlCacheService.get(e);return n?this.decodeCachedImage(n,e):await this.handleCurrentDownload(e)}async handleCurrentDownload(e){if(this.smartDownloadQueueService.getCurrentUrl()!==e)return e;let t=await this.smartDownloadQueueService.awaitDownload(e);return t?this.decodeCachedImage(t,e):e}constructor(e,t,n=new aO,i=r6(),r=nt(),a=tY()){this.sendAdEvent=e,this.scene=t,this.nextButtonService=n,this.smartDownloadQueueService=i,this.urlCacheService=r,this.errorLoggingReportingService=a}};const a1=e8(!1);var a2=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,customClassName:i,isBackgroundImage:r=!1,shouldRenderLastChanceEndcard:a=!0})=>{let s=tg(""),o=eK((()=>new a0(t,e)),[e,t]),l=eK((()=>e.getLastChanceEndcardConfig()),[e]),c=eW(null);aq(e.getId(),e.getAppStoreOnDelayConfig()),a$(e.getStoreKitOverlayAutoShowConfig()),aP(c,t),aW(t),rG(),aG(e),aX({fullScreenClickConfig:a1.value?l.fsc:e.getFullScreenClickConfig(),sceneId:e.getId()}),aQ({callToActionConfig:a1.value?l.cta:void 0,sceneId:e.getId()});let d=eG((e=>{a1.value=e}),[]);eH((()=>{t({type:"CREATIVE_VIEW"})}),[]),aJ(e.getId(),e.isChild());let u=e.getId();return eH((()=>{(async()=>{s.value=await o.getImageUrl(e.url)})()}),[o,e.url]),rN(eh,{children:[a&&rN(aH,{config:l,sendAdEvent:t,onVisibilityChange:d,sceneId:u}),rN("div",{className:null!=i?i:"J2DrKG_staticImageEndcard",style:r?{backgroundImage:`url(${e.url})`}:{},children:rN(aB,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,sceneId:u,children:[n&&!a1.value&&rN(aL,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:l.enabled}),s.value&&rN("img",{src:s.value,ref:c,alt:"image",id:u,onError:()=>{o.handleImageFailure()},onLoad:()=>{o.handleImageLoaded()}})]})})]})},a3=(e=tB)=>{let t=e.getValue().scene;return rg(t)?B({startSn:void 0},`FragmentLoadingContext_${null==t?void 0:t.getId()}`):null};class a4 extends window.Hls.DefaultConfig.loader{findMatchingManifestUrl(e,t,n){let i=Object.keys(n);for(let t of i)if(e.toLowerCase().endsWith(t.toLowerCase()))return t;if(1===i.length&&"0"===i[0]&&0===t)return"0"}openAndSendXhr(e,t,n){var i;if("manifest"===t.type&&(null==(i=this.cachedManifestMetadata.video)?void 0:i.manifest))this.loadFromString(this.cachedManifestMetadata.video.manifest,e,t);else{if(["level","audioTrack"].includes(t.type)){let n="level"===t.type?this.cachedManifestMetadata.video.tracks:this.cachedManifestMetadata.audio.tracks,i=this.findMatchingManifestUrl(t.url,t.id,n);if(i)return void this.loadFromString(n[i],e,t)}super.openAndSendXhr(e,t,n)}}load(e,t,n,i=tB,r=a3,a=nc()){let{onSuccess:s}=n;super.load(e,t,x(T({},n),{onSuccess:(e,t,n,o)=>{var l,c;s(e,t,n,o);let d=null==(l=n.levelDetails)?void 0:l.startSN;"level"===n.type&&void 0!==d&&(a.emit({type:"video",event:"hlsLevelPlaylistLoaded",data:{starting_sequence_number:d}}),null==(c=r(i))||c.setValue({startSn:d}))}}))}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};Promise.resolve().then((()=>{var e;null==(e=this.callbacks)||e.onSuccess(i,this.stats,n,t)}))}constructor(){super(),this.cachedManifestMetadata=(new ru).getCachedManifestMetadata()}}class a6 extends window.Hls.DefaultConfig.loader{getFragmentInfo(e,t=a3,n=tB){var i,r,a,s,o;if(!["main","audio"].includes(e.type))return{shouldUseLocalFile:!1,localUrl:null};let l="main"===e.type?"video":"audio",c="";if("initSegment"===e.sn)c=null!=(i=this.cachedManifestMetadata[l].chunk_init)?i:"";else{let i=Number(e.sn),d=null!=(a=null==(r=t(n))?void 0:r.getValue().startSn)?a:1;c=null!=(o=(null!=(s=this.cachedManifestMetadata[l].chunks)?s:[])[i-d])?o:""}return{localUrl:c,shouldUseLocalFile:rc(c)}}async load(e,t,n){let{shouldUseLocalFile:i,localUrl:r}=this.getFragmentInfo(e.frag);if(i&&r)e.url=r,e.frag.isCached=!0,super.load(e,t,n);else{let i=nt(),r=await i.get(e.url);r?(e.frag.isCached=!0,this.context=e,this.loader={readyState:4,status:200,response:r.data},this.config=t,this.callbacks=n,this.loadedFromCache=!0,this.readystatechange()):(e.frag.isCached=!1,super.load(e,t,n))}}readystatechange(){let{context:e,loader:t,stats:n}=this;if(!e||!t||n.aborted)return;if(4!==t.readyState)return void super.readystatechange();let{shouldUseLocalFile:i}=this.getFragmentInfo(this.context.frag);var r;if(i){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};Promise.resolve().then((()=>{this.callbacks.onSuccess(r,n,e,t)}))}}else(null==(r=t.response)?void 0:r.byteLength)>=0&&!this.loadedFromCache&&nt().addRecord({url:e.url,data:new Uint8Array(t.response)}),super.readystatechange()}constructor(){super(),this.cachedManifestMetadata=(new ru).getCachedManifestMetadata()}}class a5 extends window.Hls.DefaultConfig.abrController{onFragLoaded(e,t){if(t.frag.isCached)return;super.onFragLoaded(e,t);let n=this.hls;"main"===t.frag.type&&n.bandwidthEstimate>0&&n.bandwidthEstimate!==n.config.abrEwmaDefaultEstimate&&this.videoReportingService.emit({type:"video",event:"bandwidthEstimation",data:{bwe:Math.round(n.bandwidthEstimate/1024)}})}constructor(e){super(e),this.config=e,this.videoReportingService=nc()}}var a7=class{async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,fragLoadingMaxRetry:3,pLoader:a4,fLoader:a6,abrController:a5,debug:!1});return this.addEventListeners(n,t),n.loadSource(e),n.attachMedia(t),n}addEventListeners(e,t){e.on(window.Hls.Events.FRAG_BUFFERED,((e,n)=>{0!==t.buffered.length&&"main"===n.frag.type&&(t.currentTime<=0||t.currentTime<t.buffered.start(0))&&(t.currentTime=t.buffered.start(0))})),e.on(window.Hls.Events.LEVEL_SWITCHED,((t,n)=>{this.videoReportingService.emit({type:"video",event:"hlsLevelSwitched",data:{scene_id:this.scene.getId(),level:n.level,bitrate:e.levels[n.level].bitrate}})})),e.on(window.Hls.Events.ERROR,((n,i)=>{switch(i.type){case window.Hls.ErrorTypes.MEDIA_ERROR:i.details===window.Hls.ErrorDetails.BUFFER_STALLED_ERROR?this.videoReportingService.emit({type:"video",event:"hlsVideoStalled",data:{scene_id:this.scene.getId(),level:e.currentLevel,bitrate:e.levels[e.currentLevel].bitrate}}):![window.Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL,window.Hls.ErrorDetails.BUFFER_SEEK_OVER_HOLE].includes(i.details)&&(this.errorLoggingService.emit({type:"error-logging",event:"resource",data:{error:Error(`HLS media error: ${i.details}`)}}),i.fatal&&e.recoverMediaError());break;case window.Hls.ErrorTypes.NETWORK_ERROR:this.errorLoggingService.emit({type:"error-logging",event:"exception",data:{error:Error(`HLS network error: ${i.details}`)}}),i.details===window.Hls.ErrorDetails.FRAG_LOAD_ERROR&&this.videoReportingService.emit({type:"video",event:"hlsFragLoadError",data:{is_first_segment:0===t.buffered.length}});break;default:this.errorLoggingService.emit({type:"error-logging",event:"resource",data:{error:Error(`HLS ${i.fatal?"":"non-"}fatal error: ${i.details}`)}}),i.fatal&&(e.destroy(),this.videoReportingService.emit({type:"video",event:"hlsFatalError"}))}}))}constructor(e,t=Q.getValue(),n=tY(),i=nc(),r=new ru(e)){this.scene=e,this.adData=t,this.errorLoggingService=n,this.videoReportingService=i,this.streamPunkService=r,this.hlsMediaType="application/vnd.apple.mpegurl",this.cachedManifestMetadata=this.streamPunkService.getCachedManifestMetadata()}},a8=class{startVideoMonitor(e,t,n){var i;n&&(null!=(null==(i=this.videoMonitorTimer)?void 0:i.getId())&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,(()=>{e.value.matches("AUTO_PLAY_FAIL")||t(tM)})),this.videoMonitorTimer.start())}stopVideoMonitor(){var e;null==(e=this.videoMonitorTimer)||e.destroy()}startStreamingVideo(e,t,n,i=new a7(this.scene,this.adData,this.errorLoggingService,this.videoReportingService)){e.setAttribute("type","application/x-mpegURL"),window.Hls.isSupported()?(this.hlsLibraryInstance=i.loadHls(t,e),this.pictureInPictureService.setStopStreamingVideo(this.stopStreamingVideo.bind(this))):(this.observabilityReportingService.emit("hls-not-supported","hls-not-supported"),n({type:"NEXT"}))}stopStreamingVideo(){this.hlsLibraryInstance&&Promise.resolve(this.hlsLibraryInstance).then((e=>{var t;null==e||null==(t=e.destroy)||t.call(e)}))}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e,t=iR(),n=Q.getValue(),i=tY(),r=t$(),a=tI(),s=nc(),o=rV()){this.scene=e,this.timerService=t,this.adData=n,this.errorLoggingService=i,this.observabilityReportingService=r,this.muteService=a,this.videoReportingService=s,this.pictureInPictureService=o,this.hlsLibraryInstance=void 0}},a9=(e,t,n)=>{var i;let r=tU();if(!t||!rg(r))return!0;let a=null!=(i=null!=n?n:r.getCloseButtonConfig().delay)?i:0;return 9999===a||a>e},se=class extends rF{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(this.videoElement,this.omsdkData),null==(e=this.adSession)||e.setCreativeType("video"),null==(t=this.adSession)||t.setImpressionType("loaded"),null==(n=this.adSession)||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){J().emit({type:"error-logging",event:"exception",data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null==(e=this.adEvents)||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!a9(this.duration,this.isFullscreen),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null==(t=this.adEvents)||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if("sessionStart"===e.type)return this.hasSessionStartRequested=!0,void this.onSessionStarted();if("sessionFinish"===e.type){let e=J();e.emit({type:"video",event:"removeHandler"}),e.emit({type:"cta",event:"removeHandler"})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction((()=>{var i;this.isBuffering&&(this.isBuffering=!1,null==(i=this.mediaEvents)||i.bufferFinish());let r=iU(e,t);if(e>0&&this.mediaEvents){for(let e=this.checkpointsReached.length;e<=r;e+=1)switch(this.checkpointsReached[e]=!0,e){case 0:this.volume=+!n,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}}))}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction((()=>{var t;this.volume=+("mute"!==e),null==(t=this.mediaEvents)||t.volumeChange(this.volume)}))}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction((()=>{var e;null==(e=this.mediaEvents)||e.bufferStart()})),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction((()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e)return void(null==(n=this.mediaEvents)||n.pause());null==(t=this.mediaEvents)||t.resume()}}))}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction((()=>{var t;null==(t=this.mediaEvents)||t.playerStateChange(e)})))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction((()=>{var e;this.isSkippable&&(null==(e=this.mediaEvents)||e.skipped())}))}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t,n){super(),this.videoElement=e,this.omsdkData=t,this.isFullscreen=n,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const st="incentivized-dialog",sn={actions:T({},rP(),{pauseVideo:()=>{rC().forEach((e=>{e.send({type:"PAUSE"})}))},playVideo:()=>{rC().forEach((e=>{e.send({type:"PLAY"})}))},forfeitReward:()=>{J().emit({type:"incentivized-event",event:"forfeitReward",fireOnlyOnce:!0}),t$().emit("forfeit-reward")}},rU())};var si=e=>(null!=e?e:ng()).interpreterMap.get(st);const sr="storyProgress",sa=3e3,ss={marginLeft:"0px",marginTop:"0px"},so=e8(ss);var sl=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i,theatreModeReportingService:r=nu()})=>{let a=()=>{if(!n)return;let e=document.querySelector("video"),t=document.getElementsByClassName(sr);if(!e)return;let i=T({},ss),{videoWidth:r,videoHeight:a}=e,{clientWidth:s,clientHeight:o}=null==e?void 0:e.parentElement,l=r/a,c=(o-s/l)/2;s/o>l?i.marginLeft=(s-o*l)/2+"px":i.marginTop=`${c}px`,t.length>0&&(i.marginTop=`${Math.max(c,18)}px`),so.value=i};eH((()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}))),eH((()=>{a()}),[n,i]);let s=as(r);return n?rN("button",{type:"button",className:ao(t?"S2LOeW_muted":"S2LOeW_unmuted",s.value?"fadeIn":"fadeOut"),id:iS,title:t?"Unmute":"Mute","aria-label":"Mute button",style:so.value,onClick:()=>{e({type:t?"UNMUTE":"MUTE"})},children:rN("span",{className:"S2LOeW_icon",id:iC})}):null},sc=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r,isLooping:a=!1,theatreModeReportingService:s=nu()})=>{let o=as(s);return n?rN("div",{role:"progressbar",title:"Video progress",className:ao("OaF7uW_videoProgress",o.value?"fadeIn":"fadeOut"),"aria-label":"Video progress",children:rN("span",{className:!r&&e>0?"":"OaF7uW_paused",style:{backgroundColor:i,animationDuration:`${t}s`,animationIterationCount:a?"infinite":"1"},id:"video-progress-bar"})}):null},sd=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i,onMetadataLoaded:r,canMuteAudio:a=!0,theatreModeReportingService:s})=>{var o,l;let c=new a8(i),d=eK((()=>ei()),[]),{url:u}=i,h=eW(null),v=eW(null),p=tg(0),g=tg(u),m=nc(),f=r6(),C=c.getMutedSignal(),y=tg(""),E=t=>{e({type:t,eventTarget:h.current,url:g.value})},_=()=>{E("CAN_PLAY"),t({type:"PRIVACY_LOGO_SHOW"})},T=0;aa("scene-event",((e,t)=>{"nextButtonCountdownTick"===t.event&&t.data.scene_id===i.getId()&&t.data.delay&&(T=t.data.delay)}));let I=e=>{c.stopVideoMonitor(),t({type:"VIDEO_ERROR",error:Error(e),video_url:g.value}),i.getLastChanceEndcardConfig().enabled&&(t({type:"LAST_CHANCE_ENDCARD"}),t({type:"PRIVACY_LOGO_SHOW"}),t({type:"LAST_CHANCE_ENDCARD"})),t({type:"VIDEO_FAILURE"})},w=()=>{setTimeout((()=>{h.current&&h.current.muted!==C.value&&(h.current.muted=C.value)}),100)};return t_((()=>{if(h.current&&g.value)return((e,t,n=Q.getValue())=>{(null==t?void 0:t.enabled)&&t.data&&S.getInstance().bind(se.getServiceIdentifier(),new se(e,t.data,n.placement.is.fullscreen))})(h.current,i.getOmsdkConfig()),h.current.setAttribute("muted","true"),h.current.addEventListener("playing",(()=>{h.current&&(E("TIME_UPDATE"),c.stopVideoMonitor())})),"mp4"===i.videoType&&(h.current.setAttribute("src",g.value),h.current.load()),"hls"===i.videoType&&(y.value=g.value),c.startVideoMonitor(n,I,h.current),()=>{c.stopVideoMonitor()}})),eH((()=>{switch(n.value.value){case"PLAYING":(()=>{var t;let i=null==(t=h.current)?void 0:t.play();if(!i)return window.setTimeout((()=>{var t;"PLAYING"===n.value.value&&(0===(null==(t=document.getElementsByTagName("video")[0])?void 0:t.currentTime)&&e({type:"AUTO_PLAY_FAIL"}))}),2500);i.then(w).catch((t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:"AUTO_PLAY_FAIL"}):"aborterror"===n||I(tR)}))})();break;case"LOAD_FAIL_RETRY":e({type:"RETRY"});let a=i.originalVideoUrl;a&&a!==g.value?g.value=a:I(tP);break;case"PAUSED":var r;null==(r=h.current)||r.pause();break;case"ENDED":if(i.loopVideo){if(e({type:"PLAY"}),aD()){let e=nW();null==s||s.emit({type:"theatre-mode-event",event:"revealControls"}),(null==e?void 0:e.canOpen())&&i.storeKitOverlayAutoShowConfig.enabled&&(null==e||e.open())}}else{let n=i.getLastChanceEndcardConfig().enabled;e({type:"CLOSE"}),t(n?{type:"LAST_CHANCE_ENDCARD"}:{type:"COMPLETE"})}}}),[n.value.value]),t_((()=>{""!==y.value&&(null==h?void 0:h.current)&&c.startStreamingVideo(h.current,y.value,t)})),t_((()=>{var e,t;h.current&&(null==(e=(t=n.value).matches)?void 0:e.call(t,"PLAYING"))&&h.current.muted!==C.value&&(h.current.muted=C.value)})),eH((()=>{let e=(e,t)=>{((e,t,n=i5(null==t?void 0:t.getId()),i=si(),r=en())=>{rg(t)&&n&&"SHOWING"!==(null==i?void 0:i.state.value)&&no(e,"hls"===t.videoType,n,r)})(t,i)};return d.addEventHandler("viewability",e),()=>{d.removeEventHandler("viewability",e)}}),[e,d]),eH((()=>{let e=t=>{h.current&&(h.current.readyState>2?_():iR().getNewTimer(t,(()=>{e(t)})).start())};return e(200),()=>{i.isPictureInPictureEnabled||c.stopStreamingVideo()}}),[]),"FINAL"===n.value.value&&(null==(o=i.getLastChanceEndcardConfig().appMeta)?void 0:o.icon)?null:rN("div",{className:ao("ok_seq_videoPlayerWrap","videoPlayer"),ref:v,id:i.getId(),children:[rN(sl,{sendAdEvent:t,isMuted:C.value,isVisible:n.value.context.canPlay&&a,videoPlayerHeight:null==(l=v.current)?void 0:l.clientHeight}),rN("video",{title:"Video player",id:"video-player",ref:h,muted:!0,playsInline:!0,className:"ok_seq_videoPlayer",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{g.value===u?E("LOAD_FAIL"):I(tV)},onDurationChange:()=>{E("DURATION_CHANGE")},onWaiting:()=>{E("WAITING"),f.pause()},onSuspend:()=>{E("SUSPEND"),f.pause()},onCanPlay:_,onCanPlayThrough:()=>{m.emit({type:"video",event:"canPlayThrough"})},onTimeUpdate:t=>{let{target:i}=t,r=(e=>{let{buffered:t,currentTime:n}=e;for(let e=0;e<t.length;e+=1)if(n>=t.start(e)&&n<=t.end(e))return t.end(e)-n;return 0})(i),a=i.duration-i.currentTime,{loopCount:s}=n.value.context,o=Number.isInteger(s)&&s>0;i.currentTime>=4&&4===i.readyState&&r>5&&a>=5&&!o&&T>=5?f.resume():f.pause();let l="PLAYING"!==n.value.value;Number.isNaN(i.duration)||0===i.duration||i.seeking||l||(p.value=i.currentTime,e({eventTarget:i,type:"TIME_UPDATE"}))},onEnded:()=>{p.value=0,e({type:"END"})},onSeeking:e=>{let t=e.target,n=t.currentTime-p.value;!(t.readyState<3)&&Math.abs(n)>3&&(t.currentTime=p.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0,onLoadedMetadata:()=>{null==r||r()}}),rN(sc,{value:n.value.context.progress,duration:n.value.context.duration,isLooping:i.loopVideo,paused:"PAUSED"===n.value.value,progressBarConfig:i.getProgressBarConfig()})]})},su=({isInLine:e=!1,sceneId:t})=>{let n=eW(null),i=eW(null),r=eW(),a=eW(),s=i5(t),o=tg(!1),l=tg(window.document.body.clientWidth),c=tg(window.document.body.clientHeight),d=tg(0),u=tg(0),h=tg(0),v=tg(0),p=null==s?void 0:s.state.context.videoElement,g=null==s?void 0:s.state.context.canPlay,m=null==s?void 0:s.state.context.videoWidth,f=null==s?void 0:s.state.context.videoHeight,S=()=>{var e,t;n.current&&(l.value=null==(e=n.current)?void 0:e.clientWidth,c.value=null==(t=n.current)?void 0:t.clientHeight)},C=()=>{if(!p)return;let t=p.videoHeight>p.videoWidth;o.value=(e||t)&&!!p&&(!!e||p.videoWidth/p.videoHeight<l.value/c.value)&&((e,t=Q.getValue())=>{var n;if(t.device.os.is.android)return!!(null!=(n=null==e?void 0:e.filter)?n:null==e?void 0:e.webkitFilter);if(t.device.os.is.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1})(r.current)},y=()=>{var e;S(),null==(e=r.current)||e.clearRect(0,0,h.value,v.value),C()};return eH((()=>{p&&(d.value=p.clientHeight,u.value=p.clientWidth),C()}),[null==p?void 0:p.clientHeight,null==p?void 0:p.clientWidth,r.current]),eH((()=>(g&&(window.addEventListener("resize",y),S(),(()=>{if(i.current&&l&&c&&m&&f&&c){var e;let t=m/l.value,n=f/c.value,a=m/f<l.value/c.value?t:n,s=Math.floor(Number(m/a)),o=Math.floor(Number(f/a));r.current=null==(e=i.current)?void 0:e.getContext("2d"),h.value=s,v.value=o}})(),a.current=rB().getNewInterval(60,(()=>{o.value&&r.current&&r.current.drawImage(p,0,0,h.value,v.value)})),a.current.start()),()=>{var e;window.removeEventListener("resize",y),null==(e=a.current)||e.destroy()})),[g]),rN("div",{id:"video-blur",ref:n,className:"RypQCq_videoBlurWrap",children:rN("canvas",{id:"video-blur-canvas",ref:i,width:h,height:v})})},sh=({isVisible:e,sendVideoEvent:t})=>e?rN("div",{role:"none",className:"dDtiqq_tapToPlayMask",onClick:()=>{var e;null==(e=document.getElementsByTagName("video")[0])||e.play(),t({type:"PLAY"})},id:"tap-to-play",title:"tap-to-play",children:rN("div",{className:"dDtiqq_tapToPlayContainer",children:[rN("div",{className:"dDtiqq_tapToPlayIcon"}),rN("div",{className:"dDtiqq_tapToPlayText",children:"Tap to play"})]})}):null,sv=class{getFadeInClass(e){var t;return this.storeKitOverlayAutoShowConfig.enabled&&(null==(t=this.storeKitOverlayService)?void 0:t.isOpen())?e?"fadeIn":"fadeOut":"fadeIn"}constructor(e,t=nW()){this.storeKitOverlayAutoShowConfig=e,this.storeKitOverlayService=t}},sp=({callToActionReportingService:e,sceneId:t,storeKitOverlayAutoShowConfig:n,theatreModeReportingService:i=nu(),storeKitOverlayService:r=nW(),service:a=new sv(n,r)})=>{let s="Download button",o=as(i);return rN("button",{className:ao("Zz6y0G_download",a.getFadeInClass(o.value)),title:s,"aria-label":s,id:"download-button",type:"button",onClick:()=>{e.emit({type:"cta",event:"downloadButtonCta",data:{scene_id:t}})},children:rN("span",{className:"Zz6y0G_downloadIcon"})})},sg=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return rN("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[rN("defs",{children:rN("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[rN("stop",{offset:"0%","stop-color":"#ffd055"}),rN("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),rN("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),rN("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},sm=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const sf=12,sS=5,sC=0;var sE=({id:e="star-rating",size:t=12,count:n=5,value:i=0,onClick:r=()=>{console.warn("StarRating: onClick not implemented")}})=>{let a=[],s=new sm;for(let e=0;e<n;e+=1){let n=s.getOffsetPercent(e,i);a.push(rN(sg,{id:`star-${e}-${t}-${n}`,index:e,size:t,offset:n},e))}return rN("span",{onClick:r,id:e,children:a})},sy=class{getVideoComputedHeight(){let e=this.injectedGetVideoInterpreter(this.sceneId),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return Number.isNaN(n)?0:parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t){if(t)return e.preventDefault(),e.stopPropagation(),this.ctaReportingService.emit({type:"cta",event:"persistentCta",data:{scene_id:this.sceneId}}),void this.sceneEventReportingService.emit("ctaButtonClick");this.fullScreenClickConfig.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:"fsc",data:{scene_id:this.sceneId}})}constructor(e,t,n,i=nr(),r=na(),a=t2(),s=i5){this.fullScreenClickConfig=e,this.sceneId=t,this.storeKitOverlayAutoShowConfig=n,this.ctaReportingService=i,this.fullCtaReportingService=r,this.sceneEventReportingService=a,this.injectedGetVideoInterpreter=s}};const s_=e8(!1);var sT=({fullScreenClickConfig:e,callToActionConfig:t,storeKitOverlayAutoShowConfig:n,sceneId:i,sceneEventReportingService:r=t2(),timerService:a=iR(),ctaReportingService:s=nr(),fullCtaReportingService:o=na()})=>{var l,c,d,u,h,v;let p=new sy(e,i,n,s,o,r),g=e=>{p.handleClick(e,!0)};return eH((()=>{a.getNewTimer(t.delay,(()=>{s_.value=!0,r.emit("ctaButtonShow")})).start()}),[]),rN("div",{id:im,className:ao("UUyEIq_persistentSimpleCta",s_.value?"UUyEIq_slideIn":""),style:T({},(null==(l=t.position)?void 0:l.right)?{right:t.position.right}:{},(null==(c=t.position)?void 0:c.bottom)?{bottom:t.position.bottom}:{}),"aria-hidden":"true",onClick:e=>p.handleClick(e,!1),children:[(null==(d=t.appMeta)?void 0:d.icon)&&rN("img",{className:"UUyEIq_appIcon",onClick:g,id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null==(u=t.appMeta)?void 0:u.name)||(null==(h=t.appMeta)?void 0:h.company))&&rN("div",{className:"UUyEIq_appDetail",id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&rN("h1",{id:"persistent-simple-cta-app-name",onClick:g,children:t.appMeta.name}),t.appMeta.company&&rN("h2",{id:"persistent-simple-cta-app-company",onClick:g,children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&rN(sE,{value:t.appMeta.rating,onClick:g,id:"persistent-simple-cta-app-rating"})]}),rN("button",{className:"UUyEIq_persistentSimpleCtaBtn",style:(null==(v=t.background)?void 0:v.color)?{backgroundColor:t.background.color}:{},type:"button",onClick:g,id:"persistent-simple-cta-button",children:t.text})]})},sI=({fullScreenClickConfig:e,callToActionConfig:t,storeKitOverlayAutoShowConfig:n,sceneId:i,sceneEventReportingService:r=t2(),ctaReportingService:a=nr(),fullCtaReportingService:s=na()})=>{var o,l,c,d,u,h,v,p;let g=new sy(e,i,n,a,s,r),m=e=>{g.handleClick(e,!0)};eH((()=>{let e=document.createElement("style");return e.textContent="\n    .videoPlayer {\n      width: 100%;\n      height: auto;\n      margin-top: 120px;\n    }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),eH((()=>{r.emit("ctaButtonShow")}),[]);let f=null==(o=t.appMeta)?void 0:o.isRatingGreaterThanMinimum;return rN("div",{id:"persistent-rich-cta",className:"DwKKSa_persistentRichCta",onClick:e=>g.handleClick(e,!1),"aria-hidden":"true",children:[(null==(l=t.appMeta)?void 0:l.icon)&&rN("img",{className:"DwKKSa_appIcon",alt:"app-icon",id:"persistent-rich-cta-app-icon",onClick:m,src:null==(c=t.appMeta)?void 0:c.icon}),rN("div",{className:"DwKKSa_appInfo",children:[(null==(d=t.appMeta)?void 0:d.name)&&rN("h1",{id:"persistent-rich-cta-app-name",onClick:m,children:null==(u=t.appMeta)?void 0:u.name}),f&&rN(sE,{id:"persistent-rich-cta-app-rating",value:null==(h=t.appMeta)?void 0:h.rating,onClick:m}),!f&&rN("p",{id:"persistent-rich-cta-app-company",onClick:m,children:null==(v=t.appMeta)?void 0:v.company}),rN("button",{className:"DwKKSa_persistentRichCtaBtn",type:"button",style:(null==(p=t.background)?void 0:p.color)?{backgroundColor:t.background.color}:{},onClick:m,id:ig,children:t.text})]})]})},sw=({fullScreenClickConfig:e,callToActionConfig:t,storeKitOverlayAutoShowConfig:n,sceneId:i,sceneEventReportingService:r=t2(),ctaReportingService:a=nr(),fullCtaReportingService:s=na()})=>{var o;let l=new sy(e,i,n,a,s,r),c=eW(null);eH((()=>{l.updateScreenshotsHeight(c)}),[window.innerHeight,window.innerWidth]);let d=null==(o=t.appMeta)?void 0:o.screenshots;return d&&0!==d.length?rN("div",{id:"persistent-rich-cta-screenshots",ref:c,className:"dalDea_persistentRichCtaScreenshots",onClick:()=>{e.enabled?na().emit({type:"fsc",event:"fsc",data:{scene_id:i}}):nr().emit({type:"cta",event:"persistentCta",data:{scene_id:i}})},"aria-hidden":"true",children:d.map((e=>e&&rN("div",{className:"dalDea_slide",children:rN("img",{alt:e,src:e})},e)))}):null},sb=({videoOrientation:e,viewportOrientation:t,scene:n,disableRichCta:i=!1})=>{var r,a;if("unknown"===e)return null;let s=n.getId();return!i&&"landscape"===e&&"portrait"===t&&(null!=(a=null==(r=n.getCallToActionConfig().appMeta)?void 0:r.screenshots)?a:[]).length>0?rN(eh,{children:[rN(sI,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),storeKitOverlayAutoShowConfig:n.getStoreKitOverlayAutoShowConfig(),sceneId:s}),rN(sw,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),storeKitOverlayAutoShowConfig:n.getStoreKitOverlayAutoShowConfig(),sceneId:s})]}):rN(sT,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),storeKitOverlayAutoShowConfig:n.getStoreKitOverlayAutoShowConfig(),sceneId:s})},sA=(e,t)=>{let n=M();"progress"===t.event&&n.has("TPAT_PROGRESS_EVENTS")&&(e=>{let t=S.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter((e=>e&&""!==e));return i&&0!==i.length?(n=i.map((e=>{let t,n,i,r=e.split(".")[1],a=r.endsWith("p")||r.endsWith("%")?"percentage":"absolute";return{type:a,tpat_event:e,value:"percentage"===a?r.endsWith("p")?Number(r.replace("p","")):r.endsWith("%")?Number(r.replace("%","")):Number(r):(r.includes("_")?[t,n,i]=r.split("_"):r.includes(":")?[t,n,i]=r.split(":"):(t=r.substring(0,2),n=r.substring(2,2),i=r.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i))}})),t.bind(e,n),n):[]})(n.get("TPAT_PROGRESS_EVENTS")).forEach((n=>{var i,r;if((null==(i=t.data)?void 0:i.current_time)&&(null==(r=t.data)?void 0:r.duration)){let{current_time:i,duration:r}=t.data,a=Math.floor(i/r*100),s=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&s>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}}))};const sO=["checkpoint.0","checkpoint.25","checkpoint.50","checkpoint.75","checkpoint.100"],sk={actions:T({updateProgress:V({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),emitProgress:e=>{void 0!==e.duration&&nc().emit({type:"video",event:"progress",data:{progress:e.progress,current_time:e.currentTime,duration:e.duration}})},emitCheckpointTpatEvent:e=>{void 0!==e.duration&&((e,t,n,i=nj())=>{let r=sO[iU(e,t)];((e,t=J())=>{let n=[];return sO.slice(0,e).forEach((e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)})),n})(iU(e,t)).forEach((r=>{i.emit(r,!0,{progress:n,current_time:e,duration:t})})),i.emit(r,!0,{progress:n,current_time:e,duration:t})})(e.currentTime,e.duration,e.progress)},emitTrackingEvent:e=>{void 0!==e.duration&&((e,t,n,i=rW())=>{if(!rg(n))return;let r=["start","firstQuartile","midpoint","thirdQuartile","complete"][iU(e,t)];r&&rj(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)})(e.currentTime,e.duration,tU())},emitPause:()=>{nc().emit({type:"video",event:"pause"})},emitPlay:e=>{nc().emit({type:"video",event:"play",data:{duration:e.duration}})},reportVideoStart:e=>{let t=tI(),n=t$(),i=Number(M().get("VIDEO_DURATION"));n.emit([{name:"video-start",metric:"video-start",is_muted:t.isMuted(),actual_video_duration:e.duration,expected_video_duration:Number.isNaN(i)?void 0:i},{name:"video-start",metric:{custom:"custom-video-player",native:"native-video-player",progressive:"progressive-video-player"}[e.videoPlayer]}]),t2().emit("loadComplete")},incrementLoopCount:V({loopCount:e=>e.loopCount+1}),emitClose:e=>{let t=e.loopCount>0,n=t?null==e?void 0:e.duration:null==e?void 0:e.currentTime;nc().emit({type:"video",event:"close",data:{is_video_fully_played:t,maximum_viewing_time:n}})},emitCloseFullyPlayed:e=>{nc().emit({type:"video",event:"close",data:{is_video_fully_played:!0,maximum_viewing_time:null==e?void 0:e.duration}})},setCanPlay:V({canPlay:()=>!0,duration:(e,t)=>{var n;return null==(n=t.eventTarget)?void 0:n.duration},videoWidth:(e,t)=>{var n;return null==(n=t.eventTarget)?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null==(n=t.eventTarget)?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!=(n=t.eventTarget)?n:{};return i/r>1?"landscape":"portrait"}}),emitDurationChange:(e,t)=>{var n;J().emit({type:"video",event:"durationChange",data:{duration:null==(n=t.eventTarget)?void 0:n.duration}})},emitWaiting:()=>{J().emit({type:"video",event:"waiting"})},emitSuspend:()=>{J().emit({type:"video",event:"suspend"})},emitTimeUpdate:()=>{J().emit({type:"video",event:"timeUpdate"})},restart:e=>{let t=e.videoElement;if(t)try{t.pause(),t.currentTime=0,e.currentTime=0,e.progress=0;let n=t.play();null==n||n.catch((e=>{nc().emit({type:"video",event:"error",data:{error:e.message}})}))}catch(e){nc().emit({type:"video",event:"error",data:{error:Error("Failed to restart video")}})}},updateCurrentTime:V({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),resetCurrentTime:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},emitLoad:()=>{t2().emit("loadStart")},disableTheatreMode:e=>{let t=nu();1===e.loopCount&&t.emit({type:"theatre-mode-event",event:"disableTheatreMode"})}},rU(),rP())};var sD=class{getCloseButtonDelaySeconds(e,t){return void 0===e||Number.isNaN(e)||e<=0?6:this.injectedIsVideoUnskippable(e,this.adData.placement.is.fullscreen,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?n0.CLOSE:t}async getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig({videoDuration:t}),i=e.isLastPage(),r={delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)},a=this.injectedIsVideoUnskippable(null!=t?t:6,this.adData.placement.is.fullscreen,n.delay);return this.amplifyEndcardEngagementService&&!a&&(r.delay=await this.amplifyEndcardEngagementService.getVideoCloseButtonDelayWithUserActivity(r.delay)),r}shouldReplaceShowStoreKitOverlay(){var e;return!!(this.storeKitOverlayService&&this.adData.placement.is.fullscreen&&(null==(e=this.productViewService)?void 0:e.isDone()))}getFullScreenClickConfig(e,t,n){return this.injectedIsTheatreModeActive()?{enabled:!1}:e?null!=n?n:{enabled:!1}:t}constructor(e=nW(),t=nF(),n=Q.getValue(),i=i8(),r=a9,a=aD){this.storeKitOverlayService=e,this.productViewService=t,this.adData=n,this.amplifyEndcardEngagementService=i,this.injectedIsVideoUnskippable=r,this.injectedIsTheatreModeActive=a}},sN=(e,t=si(),n=J())=>i=>{if(["NEXT","LAST_CHANCE_ENDCARD"].includes(i.type)){if(!n.hasExistingEvent({type:"incentivized-event",event:"grantReward"}))return void(null==t||t.send({type:"SHOW"}));null==t||t.send({type:"HIDE"})}e(i)};const sV=(e,t)=>{var n,i;let r=(()=>{let e=S.getInstance(),t=se.getServiceIdentifier();if(e.has(t))return e.get(t)})();if(r)switch(t.event){case"durationChange":{let e=(null==(n=t.data)?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case"waiting":case"suspend":r.onVideoBuffering();break;case"timeUpdate":r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case"mute":case"unmute":r.onSoundChange(t.event);break;case"play":case"pause":r.onVideoStateChanged(t.event);break;case"close":(null==(i=t.data)?void 0:i.is_video_fully_played)||r.onVideoPageClose();break;case"downloadButtonCta":case"fsc":r.onCtaClick();break;case"removeHandler":tF().removeEventHandler(t.type,sV)}};var sL=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>rN("div",{id:null!=i?i:"dialog",role:"dialog",className:"W6zMza_dialogBox",style:{visibility:n?"visible":"hidden"},children:rN("div",{className:"W6zMza_dialog",children:rN("div",{className:"W6zMza_dialogContent",children:[rN("div",{className:"W6zMza_dialogTitle",children:e}),rN("div",{className:"W6zMza_dialogBody",children:[rN("div",{className:"W6zMza_dialogText",children:t}),rN("div",{className:"W6zMza_dialogActions",children:r})]})]})})}),sP=({sendAdEvent:e,showLastChanceEndcard:t=!1,adData:n=Q.getValue()})=>{let[i,r]=(()=>{let[e,t]=r2({id:st,initial:"HIDDEN",context:{},states:{HIDDEN:{on:{SHOW:{target:"SHOWING",actions:["pauseVideo","pauseAllIntervals","standbyTimers"]}}},SHOWING:{on:{HIDE:{target:"HIDDEN",actions:["playVideo","startAllIntervals","wakeTimers"]},CLOSE:{target:"HIDDEN",actions:["forfeitReward","startAllIntervals","wakeTimers"]}}}}},sn);return[e,t]})();return rN(sL,{identifier:"incentivized-dialog",titleText:n.incentivized.title,bodyText:n.incentivized.body,isVisible:i.value.matches("SHOWING"),children:rN(eh,{children:[rN("div",{className:"tikWIq_primaryButton",children:rN("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{r({type:"HIDE"})},children:[n.incentivized.continue,rN("span",{className:"tikWIq_continueIcon",id:"incentivized-dialog-continue-icon"})]})}),rN("div",{className:"tikWIq_secondaryButton",children:rN("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{r({type:"CLOSE"}),e({type:t?"LAST_CHANCE_ENDCARD":"NEXT"})},children:n.incentivized.close})})]})})};const sM=e8(!1),sR=e8(!1);var sx=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,showVideoBlur:i=!1,adData:r=Q.getValue(),theatreModeReportingService:a,shouldRenderLastChanceEndcard:s=!0,onVideoStateChange:o})=>{let l=e.getStoreKitOverlayAutoShowConfig().enabled,c=eK((()=>e.getLastChanceEndcardConfig()),[e]),d=new sD,[u,h]=r2({id:e.getId(),initial:"LOADING",context:{currentTime:0,duration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,orientation:"unknown",videoPlayer:e.getVideoPlayer()},states:{LOADING:{entry:"emitLoad",on:{LOAD_FAIL:{target:"LOAD_FAIL_RETRY"},CAN_PLAY:{target:"PLAYING",actions:["setCanPlay","reportVideoStart"]},PAUSE:"PAUSED",DURATION_CHANGE:{actions:"emitDurationChange"},WAITING:{actions:"emitWaiting"},SUSPEND:{actions:"emitSuspend"}}},LOAD_FAIL_RETRY:{on:{RETRY:"LOADING"}},PLAYING:{entry:"emitPlay",on:{MINIMIZE:{target:"PAUSED",actions:["updateCurrentTime"]},PAUSE:"PAUSED",END:"ENDED",RESTART:{actions:"restart"},AUTO_PLAY_FAIL:"AUTO_PLAY_FAIL",TIME_UPDATE:{actions:["updateProgress","emitProgress","emitCheckpointTpatEvent","emitTrackingEvent","emitTimeUpdate"]},SUSPEND:{actions:"emitSuspend"},WAITING:{actions:"emitWaiting"},CLOSE:{target:"FINAL",actions:"emitClose"}}},PAUSED:{entry:"emitPause",on:{MINIMIZE:{actions:["updateCurrentTime"]},CAN_PLAY:{actions:"setCanPlay"},MAXIMIZE:{target:"PLAYING",actions:["resetCurrentTime"]},PLAY:"PLAYING",TIME_UPDATE:{actions:["updateProgress","emitProgress","emitCheckpointTpatEvent","emitTrackingEvent"]},AUTO_PLAY_FAIL:"AUTO_PLAY_FAIL",CLOSE:{target:"FINAL",actions:"emitClose"}}},AUTO_PLAY_FAIL:{entry:["standbyTimers","pauseAllIntervals"],on:{PLAY:{target:"PLAYING",actions:["wakeTimers","startAllIntervals"]}}},ENDED:{on:{PLAY:{target:"PLAYING",actions:["incrementLoopCount","disableTheatreMode"]},PAUSE:"PAUSED",CLOSE:{target:"FINAL",actions:"emitCloseFullyPlayed"}}},FINAL:{}}},sk),v=r.placement.is.rewarded&&!r.advertiser.creative.is.freeForm?sN(t):t;aq(e.getId(),e.getAppStoreOnDelayConfig(),u.value.context.canPlay),a$(e.getStoreKitOverlayAutoShowConfig(),sR.value),aa("video",sA),aJ(e.getId(),e.isChild()),aW(t),rG(),aG(e),aQ({callToActionConfig:sM.value?c.cta:e.getCallToActionConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:d.shouldReplaceShowStoreKitOverlay()}),aX({fullScreenClickConfig:d.getFullScreenClickConfig(sM.value,e.fullScreenClickConfig,c.fsc),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:d.shouldReplaceShowStoreKitOverlay()}),aa("cta",((e,t)=>{sM.value||sV(e,t),null==a||a.emit({type:"theatre-mode-event",event:"revealControls"})})),aa("fsc",((e,t)=>{sM.value||sV(e,t)}));let p=eG((e=>{sM.value=e}),[]);eH((()=>(o&&o(u),()=>{o&&o(void 0)})),[u.value]);let g=u.value.context.canPlay&&n&&!sM.value,m=((e,t,n,i=!1)=>{let r=tg(null);return eH((()=>(!r.value&&i&&t.getCloseButtonConfig(e,n).then((e=>{r.value=e})),()=>{})),[n,i]),r})(e,d,u.value.context.duration,g),f=e.getId();return rN(eh,{children:[rN(sP,{sendAdEvent:t,showLastChanceEndcard:c.enabled}),s&&rN(aH,{config:c,sendAdEvent:t,onVisibilityChange:p,sceneId:f}),rN(aB,{config:e.getFullScreenClickConfig(),sceneId:f,children:[g&&m.value&&rN(aL,{config:m.value,sendAdEvent:v,showLastChanceEndcard:c.enabled,theatreModeReportingService:a}),rN(sh,{isVisible:u.value.matches("AUTO_PLAY_FAIL"),sendVideoEvent:h}),rN(su,{isInLine:r.placement.is.inLine||i,sceneId:f}),rN(sd,{scene:e,videoState:u,sendVideoEvent:h,sendAdEvent:t,theatreModeReportingService:a,onMetadataLoaded:()=>{sR.value=!0},canMuteAudio:!r.placement.is.banner}),e.showDownloadButton&&rN(ab,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:rN(sp,{sceneId:f,storeKitOverlayAutoShowConfig:e.getStoreKitOverlayAutoShowConfig(),callToActionReportingService:J(),theatreModeReportingService:a})}),e.getCallToActionConfig().isPersistent&&!l&&u.value.context.canPlay&&rN(sb,{scene:e,videoOrientation:u.value.context.orientation,viewportOrientation:ns(),disableRichCta:e.isChild()})]})]})},sB=e=>{e.addEventListener("error",(t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!=(r=null==t?void 0:t.message)?r:null==t||null==(n=t.error)?void 0:n.message,stack:null==t||null==(i=t.error)?void 0:i.stack}},"*")})),e.addEventListener("unhandledrejection",(t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")}))},sU=()=>({width:window.innerWidth,height:window.innerHeight}),sF=()=>x(T({},sU()),{useCustomClose:!1,isModal:!1}),sH=()=>T({x:0,y:0},sU());const sW={allowOrientationChange:!0,forceOrientation:"none"};var sK=class{getProxyMraid(){return new Proxy(this.targetProxyMraid,this.getProxyHandler())}constructor(e,t,n=(()=>{let e=T({open:()=>()=>{},close:(e=r1)=>()=>e().send("CLOSE"),addEventListener:(e=iQ())=>(t,n)=>{e.addEventListener(t,n)},isViewable:(e=en())=>()=>e.isViewable(),getViewable:(e=en())=>()=>e.isViewable(),getCurrentPosition:()=>sH,getDefaultPosition:()=>sH,getExpandProperties:()=>sF,getMaxSize:()=>sU,getPlacementType:(e=Q.getValue())=>()=>e.placement.type,getScreenSize:()=>sU,getState:()=>()=>"default",removeEventListener:(e=iQ())=>(t,n)=>{e.removeEventListener(t,n)},setOrientationProperties:(e=tj(),t=Q.getValue())=>t.sdk.supports.orientationProperties?t=>{let n=T({},sW,t);e.setOrientationProperties(n)}:()=>null},{cacheFile:(e=nt())=>(t,n)=>!(!t||!n||"string"!=typeof t||!t.toLowerCase().startsWith("http")||!ArrayBuffer.isView(n)||(e.addRecord({url:t,data:n}),0)),fetchFile:(e=nt())=>async t=>{if(!t||"string"!=typeof t||!t.toLowerCase().startsWith("http"))return;let n=await e.get(t);return null==n?void 0:n.data},grantReward:(e=tj(),t=t$(),n=nj())=>(t.emit("grant-reward","grant-reward"),e.notifySuccessfulViewAd(),n.emit("rewardGranted",!0),()=>null),next:(e=r1)=>t=>{rI.getValue().isLastChanceEndcardOverlayShowing||e().send(t)},openStoreKitOverlayView:(e=nW())=>async()=>{if(!e||!(null==e?void 0:e.isIdle()))return!1;if(null==e?void 0:e.isOpen())return!0;null==e||e.open({fallback:"off"});try{return await t0((()=>null==e?void 0:e.isOpen()),3e3),!0}catch(e){return!1}},openStoreKitProductView:(e=nW(),t=nF(),n=t$())=>()=>!!e&&!!t&&(!!t.isOpen()||!(n.getEventCount("open-storekit-product-view-command")>=2)&&(n.emit("open-storekit-product-view-command"),t.open(),t.isOpen())),closeStoreKitOverlayView:(e=nW())=>async()=>{if(!e)return!1;if(!(null==e?void 0:e.isOpen()))return!0;null==e||e.close();try{return await t0((()=>!(null==e?void 0:e.isOpen())),3e3),!0}catch(e){return!1}},showClose:(e=t2())=>()=>{e.emit("forceCompleteCountdown")},isRewarded:(e=Q.getValue())=>()=>e.placement.is.rewarded,getNewTimer:(e=iR())=>(t,n)=>e.getNewTimer(t,n),getNewInterval:(e=rB())=>(t,n)=>e.getNewInterval(t,n)});return x(T({},e,{createCalendarEvent:()=>{},expand:()=>{},getConsentAcceptButtonText:()=>{},getConsentBodyText:()=>{},getConsentDenyButtonText:()=>{},getConsentRequired:()=>{},getConsentTitleText:()=>{},getOrientationProperties:()=>{},getResizeProperties:()=>{},getVersion:()=>()=>"1.0",playVideo:()=>{},resize:()=>{},setExpandProperties:()=>{},setResizeProperties:()=>{},storePicture:()=>{},useCustomClose:()=>()=>!1}),{supports:()=>t=>t in e})})()){this.targetProxyMraid=e,this.observabilityEventReportingService=t,this.commandHandlers=n,this.getProxyHandler=()=>{let{commandHandlers:e,observabilityEventReportingService:t}=this;return{get:(n,i)=>n[i]?n[i]:e[i]?e[i]():(t.emit({name:"unknown-mraid-command",value:i}),()=>!1)}}}};const sG=(c=(e,t)=>{nr().emit({type:"cta",event:"endcardCta",data:{cta_url:e,scene_id:t}})},n=!1,function(...e){!n&&(t||(c.apply(this,e),n=!0,t=window.setTimeout((()=>{n=!1,t=void 0}),300)))});var sj=(e,t,n=t2(),i=r6())=>{i.clearScene(e.getId()),t.addEventListener("load",(()=>{n.emit("loadComplete"),setTimeout((()=>{var t;e.getId()===(null==(t=tU())?void 0:t.getId())&&i.resume()}),5e3)}))},sY=((d=sY||{})[d.MUTE=0]="MUTE",d[d.UNMUTE=1]="UNMUTE",d),sz=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();n.gain.setValueAtTime(+!e.shouldMute,t.currentTime),n.connect(t.destination);try{Object.defineProperty(t,"destination",{get:()=>n,configurable:!0})}catch(e){}return e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)}))}unmuteAll(){this.shouldMute=!1,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)}))}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}},sq=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},s$=class{isNodeAllowed(e){return["audio","video"].includes(sq(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach((e=>{this.mute(e,!1)})),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach((e=>{this.mute(e,!1)}))}unmuteAll(){this.instances.forEach((e=>{this.unmute(e,!1)}))}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class sX{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleIframeNode(e)}))}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach((e=>e.unmuteAll()))}muteAllMedias(){this.mute=!0,this.silencers.forEach((e=>e.muteAll()))}handleIframeNode(e){var t;sX.isWindowAccessible(e.contentWindow)&&sX.interceptAllMediaElements(e.contentWindow,this.mute);let n=!sX.hasIframeCrossOriginUrl(e);this.iframeEventReportingService.emit({type:"iframe",event:"nestedIframeType",data:{nested_iframe_type:n?"basic":"cors",scene_id:null==(t=this.injectedGetCurrentScene())?void 0:t.getId()}})}handleNewNode(e){"iframe"===sq(e)&&this.handleIframeNode(e),this.mute?this.silencers.forEach((t=>{var n;return null==(n=t.mute)?void 0:n.call(t,e)})):this.silencers.forEach((t=>{var n;return null==(n=t.unmute)?void 0:n.call(t,e)}))}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=iq(),r=tU){this.targetWindow=e,this.silencers=t,this.mute=n,this.iframeEventReportingService=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",(()=>{this.doMuteAllIfMute(),this.observeDomMutation()})),this.interceptStaticIframes(),this.doMuteAllIfMute()}}sX.instances=new Map,sX.hasIframeCrossOriginUrl=e=>{var t;return null==(t=e.src)?void 0:t.toLowerCase().startsWith("http")},sX.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},sX.interceptAllMediaElements=(e,t,n=iq(),i=tU)=>{let r=new sX(e,[new s$(e),new sz(e,t)],t,n,i);sX.instances.set(e,r)},sX.muteAllMedias=()=>{sX.instances.forEach((e=>{sX.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()}))},sX.unmuteAllMedias=()=>{sX.instances.forEach((e=>{sX.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()}))};var sQ=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})};class sZ{intercept(){this.interceptors.forEach((e=>e(this.targetWindow))),this.checkExistingIframes(),this.observeNestedIframes()}static init(e,t){null!==e.contentDocument&&new sZ(e.contentWindow,t).intercept()}checkExistingIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleNewIframe(e)}))}observeNestedIframes(){let e=new this.targetWindow.MutationObserver(this.handleMutation);this.startObservation(e)}startObservation(e){let{document:t}=this.targetWindow,n=()=>{this.checkExistingIframes(),this.observeDocument(e)};"loading"===t.readyState?t.addEventListener("DOMContentLoaded",n):n()}observeDocument(e){e.observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t){this.targetWindow=e,this.interceptors=t,this.handleNewIframe=e=>{"iframe"===sq(e)&&sZ.init(e,this.interceptors)},this.handleMutation=e=>{e.reduce(((e,t)=>e.concat(Array.from(t.addedNodes))),[]).forEach(this.handleNewIframe)}}}var sJ=class extends aO{getIframeContentData(){return this.scene.getIframeContentData()}getCloseButtonConfig(){var e;let t=this.scene.getCloseButtonConfig();return(null==(e=this.amplifyEndcardEngagementService)?void 0:e.isEndcardAmplified())&&(t.delay=this.amplifyEndcardEngagementService.getAmplifiedEndcardCloseButtonDelay(t.delay)),t}initMraidInIframeForFullscreen(e){e&&(e.mraid=this.proxyMraidService.getProxyMraid(),sQ(e,"mraid"),e.open=this.customOpen)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),sQ(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=this.customOpen;let s=e.target.closest("a");(null==s||null==(i=s.href)?void 0:i.startsWith("http"))?e.preventDefault():null==(r=(a=e.target).click)||r.call(a)}},i=()=>{var e;"loading"!==(null==(e=t.document)?void 0:e.readyState)?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){this.adData.placement.is.fullscreen?this.initMraidInIframeForFullscreen(e.contentWindow):this.initMraidInIframeForNonFullscreen(e)}loadNestedIframe(e,t){if(!(null==t?void 0:t.content))return;let n=()=>{this.loadNestedIframe(e,t)},i=e.querySelector("iframe");if(!i)return void e.addEventListener("DOMContentLoaded",n);e.removeEventListener("DOMContentLoaded",n),i.width="100%",i.height="100%";let{content:r}=t;this.loadIframe(i,r)}async loadIframe(e,t){try{var n;let i=e.contentWindow,r=null==i?void 0:i.document;this.injectMethodToIframe(e),r.open(),this.injectedAddErrorListenerToIframe(i),this.injectedAddLoadListenerToIframe(this.scene,i),this.addSourceInfoToFunctions(i),r.write(t),r.close(),sZ.init(e,[this.addLoadEventForAndroid,this.blockBeforeunloadEvent,this.addSourceInfoToFunctions,this.addEndcardClickListener,this.blockFullScreenNativeVideoPlayer]),n=this.customOpen,i.document.addEventListener("click",(e=>{let t=e.target.closest("a");if(t){if(!e.isTrusted)return void e.preventDefault();t.href&&(e.preventDefault(),n(t.href))}}),{capture:!0}),this.injectedInterceptAllMediaElements(i,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:"exception",data:{error:{message:"Failed to write endcard to iframe"}}})}}async updateIframeContent(e,t){if(null==e?void 0:e.current){let{content:n,nestedFrameContent:i}=t;await this.loadIframe(e.current,n);let r=e.current.contentWindow;this.loadNestedIframe(r.document,i)}}constructor(e,t=tY(),n=Q.getValue(),i=tI(),r=t2(),a=sB,s=sj,o=sX.interceptAllMediaElements,l=i8(),c=t$(),d=sG){super(n,r,e),this.scene=e,this.errorLoggingService=t,this.adData=n,this.muteService=i,this.sceneEventReportingService=r,this.injectedAddErrorListenerToIframe=a,this.injectedAddLoadListenerToIframe=s,this.injectedInterceptAllMediaElements=o,this.amplifyEndcardEngagementService=l,this.observabilityEventReportingService=c,this.injectedThrottleCustomOpen=d,this.customOpen=e=>this.adData.placement.is.fullscreen||0!==this.sceneEventReportingService.getEventCount("click")?this.injectedThrottleCustomOpen(e,this.scene.getId()):null,this.blockFullScreenNativeVideoPlayer=e=>{let t=Array.from(e.document.querySelectorAll("video"));0!==t.length?t.forEach((e=>e.setAttribute("playsinline",""))):"complete"!==e.document.readyState&&e.document.addEventListener("DOMContentLoaded",(()=>{this.blockFullScreenNativeVideoPlayer(e)}))},this.addEndcardClickListener=e=>{let t=this.scene;((e,t,n,i=iV)=>{e&&e.document.addEventListener(aZ(),(e=>{i(e)}),!0)})(e,t.getTrackingEventMapConfig(),t.getId())},this.addLoadEventForAndroid=e=>{if(this.adData.device.os.is.android){let t,n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},this.blockBeforeunloadEvent=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},this.addSourceInfoToFunctions=e=>{e.Object.defineProperty(e.Function.prototype,ik,{value:"iframe",writable:!0,enumerable:!1,configurable:!0})},this.proxyMraidService=new sK({open:this.customOpen},c)}};const s0=window.addEventListener;var s1=({sendAdEvent:e,htmlService:t,iframeService:n,scene:i})=>{let r=eW(null),[a,s]=(eD=1,eF(eX,!1));eH((()=>{a&&requestAnimationFrame((async()=>{t.getIframeContentData(i).then((async e=>{e.content=await n.stitchCachedContentToIframe(e.content,i.id,!0),t.updateIframeContent(r,e)}))}))}),[a]),((e=tI())=>{eH((()=>{e.isMuted()?sX.muteAllMedias():sX.unmuteAllMedias()}),[e.getMutedSignal().value])})();var o,l=null==(o=r.current)?void 0:o.contentWindow;let c=eG(((e,t,n)=>{l&&"iframe"===t[ik]?l.addEventListener(e,t,n):s0.call(window,e,t,n)}),[l]);return eH((()=>(window.addEventListener=c,()=>{window.addEventListener=s0})),[c]),rN("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{a||(e({type:"PRIVACY_LOGO_SHOW"}),s(!0))},ref:r,className:"oAV7cW_endcardIframe",allow:"autoplay",scrolling:"no"})};const s2=(e,t)=>{let n=(()=>{let e=S.getInstance(),t=rH.getServiceIdentifier();if(e.has(t))return e.get(t)})();if(n)switch(t.event){case"endcardCta":n.onCtaClick();break;case"removeHandler":tF().removeEventHandler(t.type,s2)}};var s3=(e,t)=>{let n=e.getAttribute(t);if(null!==n){if(n.endsWith("%")&&0===parseFloat(n))return!1;let e=parseFloat(n);return!(Number.isNaN(e)||e<=1)}return!0},s4=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=t?`href="${t}"`:"";return n.head.insertAdjacentHTML("afterbegin","<style>body {margin: 0;padding: 0;overflow: hidden;}</style>"),n.head.insertAdjacentHTML("afterbegin",`<base target="_parent" ${i}>`),e.toLocaleLowerCase().startsWith("<!doctype html>")?`<!DOCTYPE html>${n.documentElement.outerHTML}`:n.documentElement.outerHTML},s6=e=>{let t=/rootURL\s*:\s*["']([^"']+)["']/.exec(e.textContent),n=null==t?void 0:t[1];if(n)return n.endsWith("/")?n:`${n}/`},s5=class extends C{getNestedIframeContentData(e){try{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("iframe");if(1!==t.length)return;let n=t[0],i=n.getAttribute("src");if(!(null==i?void 0:i.startsWith("http")))return;let r=n.getAttribute("style");if((null==r?void 0:r.toLowerCase().replace(/\s+/g," ").includes("display: none"))||!s3(n,"width")||!s3(n,"height"))return;return{src:i,baseUrl:(e=>{try{return new URL(e).origin}catch(e){return""}})(i)}}catch(e){return void this.errorLoggingReportingService.emit({type:"error-logging",event:"exception",data:{error:{message:"Unable to get nested iframe content data"}}})}}decodeCachedItem(e,t){if(!e)return;let{mimeType:n,data:i}=e;if(i){let r=new TextDecoder((e=>{if(!e)return"utf-8";let t=e.toLowerCase().split(";").find((e=>e.trim().startsWith("charset=")));if(t){var n;let e=null==(n=t.split("=")[1])?void 0:n.trim();if(e)return e}return"utf-8"})(n),{fatal:!0});try{return r.decode(i)}catch(e){this.errorLoggingReportingService.emit({type:"error-logging",event:"resource",data:{error:{resource_url:t,error_source:"resource",message:`Unable to decode cached item: ${e}`}}})}}}async getRemoteResource(e){if(!e.toLowerCase().startsWith("http"))return;let t=this.smartDownloadQueueService.getCompletedItem(e);if(t)return this.decodeCachedItem(t,e);let n=await this.urlCacheService.get(e);return n?this.decodeCachedItem(n,e):void 0}async stitchCachedContentToIframe(e,t,n=!1){if(n&&this.smartDownloadQueueService.pause(),this.adData.advertiser.disableEndcardCache||"accelerate"!==this.adData.advertiser.dsp)return e;let i=await this.stitchCachedContentToHtml(e,t,n),r=Array.from(i.querySelectorAll("script")).find((e=>{var t;return null==(t=e.textContent)?void 0:t.includes("LiftoffOuterEnv.init")}));if(r){let e=(e=>{let t=/scriptSrcURLs\s*:\s*(\[[^\]]*\])/.exec(e.textContent);if(null==t?void 0:t[1])try{return JSON.parse(t[1].replace(/'/g,'"'))}catch(e){}return[]})(r);await Promise.all(e.map((async e=>{let i=await this.getRemoteResource(e);if(i){let t=`data:text/javascript;charset=utf-8,${encodeURIComponent(i)}`;r.textContent=r.textContent.replace(e,t)}else if(n&&this.smartDownloadQueueService.getCurrentUrl()===e){let t=await this.smartDownloadQueueService.awaitDownload(e),n=this.decodeCachedItem(t,e);if(n){let t=`data:text/javascript;charset=utf-8,${encodeURIComponent(n)}`;r.textContent=r.textContent.replace(e,t)}}else n||this.smartDownloadQueueService.add(e,t)})));let i=(e=>{let t=/externalHtmlURL\s*:\s*["']([^"']+)["']/.exec(e.textContent);return null==t?void 0:t[1]})(r);if(i){let e=await this.getRemoteResource(i);if(e){let a=s6(r),s=await this.stitchCachedContentToHtml(e,t,n,a);r.textContent=r.textContent.replace(`"${i}"`,"null"),r.textContent=r.textContent.replace("html: null",`html: "${encodeURIComponent(this.getDocummentAsString(s))}"`)}else if(n&&this.smartDownloadQueueService.getCurrentUrl()===i){let e=await this.smartDownloadQueueService.awaitDownload(i),t=this.decodeCachedItem(e,i);t&&(r.textContent=r.textContent.replace(`"${i}"`,"null"),r.textContent=r.textContent.replace("html: null",`html: "${encodeURIComponent(t)}"`))}else n||this.smartDownloadQueueService.add(i,t,(e=>{var n;let a=s6(r),s=null!=(n=this.decodeCachedItem(e,i))?n:"";this.stitchCachedContentToHtml(s,t,!1,a)}))}}return this.getDocummentAsString(i)}async stitchCachedContentToHtml(e,t,n=!1,i=""){let r=((e,t="")=>{let n,i,r=(n=e,0===(i=t).length?n:/<head[^>]*>/i.test(n)?n.replace(/<head([^>]*)>/i,`<head$1><base href="${i}">`):/<html[^>]*>/i.test(n)?n.replace(/<html[^>]*>/i,(e=>`${e}<head><base href="${i}"></head>`)):`<head><base href="${i}"></head>${n}`);return(new DOMParser).parseFromString(r,"text/html")})(e,i),a=(e=>{let t=e.querySelectorAll("script[src]"),n=[];return t.forEach((e=>{n.push(e)})),n})(r);await Promise.all(a.map((async e=>{let i=await this.getRemoteResource(e.src);if(i)e.removeAttribute("src"),e.textContent=i;else if(n&&this.smartDownloadQueueService.getCurrentUrl()===e.src){let t=await this.smartDownloadQueueService.awaitDownload(e.src),n=this.decodeCachedItem(t,e.src);n&&(e.removeAttribute("src"),e.textContent=n)}else n||this.smartDownloadQueueService.add(e.src,t)})));let s=(e=>{let t=e.querySelectorAll('link[rel="stylesheet"]'),n=[];return t.forEach((e=>{n.push(e)})),n})(r);return await Promise.all(s.map((async e=>{let i=await this.getRemoteResource(e.href);if(i){let t=r.createElement("style");t.textContent=i,e.replaceWith(t)}else if(n&&this.smartDownloadQueueService.getCurrentUrl()===e.href){let t=await this.smartDownloadQueueService.awaitDownload(e.href),n=this.decodeCachedItem(t,e.href);if(n){let t=r.createElement("style");t.textContent=n,e.replaceWith(t)}}else n||this.smartDownloadQueueService.add(e.href,t)}))),r}getDocummentAsString(e){return 1===e.head.children.length&&0===e.body.children.length?e.head.children[0].outerHTML:0===e.head.children.length&&1===e.body.children.length?e.body.children[0].outerHTML:e.documentElement.outerHTML}async initializeIframeContentData(e,t,n){let i={content:s4(e)};if(n){let{src:e}=n;i.nestedFrameContent=T({},n);try{let t=await window.fetch(e);if(!t.ok)throw Error("fetch returned not ok status");let r=await t.text();i.nestedFrameContent.content=s4(r,n.baseUrl),i.content=(e=>{let t=(new DOMParser).parseFromString(e,"text/html");return t.getElementsByTagName("iframe")[0].removeAttribute("src"),e.toLocaleLowerCase().startsWith("<!doctype html>")?`<!DOCTYPE html>${t.documentElement.outerHTML}`:t.documentElement.outerHTML})(i.content)}catch(t){this.errorLoggingReportingService.emit({type:"error-logging",event:"playable",data:{error:{resource_url:e,error_source:"template",message:`Unable to get nested iframe: ${t}`}}})}}return i.content=await this.stitchCachedContentToIframe(i.content,t),i}static getServiceIdentifier(){return"IframeServiceInterface"}constructor(e=Q.getValue(),t=nt(),n=r6(),i=tY()){super(),this.adData=e,this.urlCacheService=t,this.smartDownloadQueueService=n,this.errorLoggingReportingService=i}};const s7=e8(!1);var s8=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,customClassName:r,shouldRenderLastChanceEndcard:a=!0})=>{let s=new sJ(e),o=new s5,l=eG((e=>{s7.value=e}),[]);aq(e.getId(),e.getAppStoreOnDelayConfig(),!0),a$(e.getStoreKitOverlayAutoShowConfig()),aQ({callToActionConfig:s7.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),sceneId:e.getId()}),aX({fullScreenClickConfig:s7.value?e.getLastChanceEndcardConfig().fsc:void 0,sceneId:e.getId()}),aa("cta",((e,t)=>{s7.value||s2(e,t)})),aW(t),rG(),aG(e),aJ(e.getId(),e.isChild()),eH((()=>{t({type:"CREATIVE_VIEW"})}),[]);let c=e=>{Object.entries({"z-index":"auto",isolation:"isolate"}).forEach((([t,n])=>{e.style.setProperty(t,n,"important")}))};eH((()=>{let e=new Map,t=Element.prototype.appendChild;return Element.prototype.appendChild=function(n){if(n.nodeType===Node.ELEMENT_NODE&&"style"in n){let t=(e=>{let t=new MutationObserver((()=>{c(e)}));return c(e),t.observe(e,{attributes:!0,attributeFilter:["style"]}),t})(n);e.set(n,t)}return t.call(this,n)},()=>{e.forEach(((e,t)=>{e.disconnect(),t.remove()})),Element.prototype.appendChild=t}}),[]);let d=e.getId(),u=e.getLastChanceEndcardConfig();return rN(eh,{children:[a&&rN(aH,{config:u,sendAdEvent:t,onVisibilityChange:l,sceneId:d}),rN("div",{className:null!=r?r:"oAV7cW_endcard",id:d,children:[i&&!s7.value&&rN(aL,{sendAdEvent:t,config:s.getCloseButtonConfig(),showLastChanceEndcard:u.enabled}),n&&rN(s1,{sendAdEvent:t,htmlService:s,iframeService:o,scene:e})]})]})},s9=e=>e instanceof ri&&"endcard"===e.getSceneType(),oe=({htmlCustomClassName:e,imageCustomClassName:t,isCloseButtonVisible:n,onVideoStateChange:i,scene:r,sendEvent:a,shouldRenderIFrame:s,showVideoBlur:o=!1,theatreModeReportingService:l,isBackgroundImage:c=!1})=>rN(eh,{children:[aY(r)&&rN(a2,{scene:r,sendAdEvent:a,isCloseButtonVisible:n,isBackgroundImage:c,customClassName:t},r.getId()),rg(r)&&rN(sx,{scene:r,sendAdEvent:a,isCloseButtonVisible:n,showVideoBlur:o,theatreModeReportingService:l,onVideoStateChange:i},r.getId()),s9(r)&&rN(s8,{isCloseButtonVisible:n,scene:r,shouldRenderIFrame:s,customClassName:e,sendAdEvent:a,sceneEventReportingService:t2()},r.getId())]});p="_37VDnG_composite";var ot=({sceneId:e,injectedGetCurrentScene:t,injectedGetAdMachineInterpreter:n})=>{let i=((e,t=tU)=>eK((()=>{let n=t();return rf(n)&&n.getChildScenes().find((t=>t.getId()===e))||null}),[e]))(e,t),r=((e=r1)=>eK((()=>e().send),[]))(n);return i?rN("div",{className:"_37VDnG_component",children:rN(oe,{scene:i,sendEvent:r,isCloseButtonVisible:!1,shouldRenderIFrame:!0,showVideoBlur:!0,imageCustomClassName:"_37VDnG_compositeImage",isBackgroundImage:!0,htmlCustomClassName:"_37VDnG_compositeHtml"})}):null};const on=e8(!1);var oi=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{aW(t),rG(),aG(e);let i=eG((e=>{on.value=e}),[]);aQ({callToActionConfig:e.getLastChanceEndcardConfig().cta,sceneId:e.getId()}),aX({fullScreenClickConfig:e.getLastChanceEndcardConfig().fsc,sceneId:e.getId()}),aJ(e.getId(),e.isChild());let r=eK((()=>e.getDecodedHtml()),[e]);return rN("div",{className:p,children:[rN(aH,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:i,sceneId:e.getId()}),n&&!on.value&&rN(aL,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),rN("div",{className:p,children:rN(aj,{htmlString:r,VmComponent:ot})})]})},or=()=>J(),oa=({service:e=rV(),pictureInPictureReportingService:t=or()})=>{var n;let i=eW(null),[r]=((e=rV())=>{let t=e.getVideoInterpreter(),n=tg(null==t?void 0:t.state);return eH((()=>{if(!t)return()=>{};let{state:e,status:i}=t;"Running"!==i&&t.start({context:e.context,value:e.value});let r=t.subscribe((e=>{n.value=e}));return()=>{r.unsubscribe()}}),[t]),[n]})(e),a=eK((()=>ei()),[]),s=tg(!1),o=tg(!1),l=tg(!1),c=e=>{e===ad.LEFT&&(l.value=!0),e===ad.UP&&(o.value=!0)},d=()=>{t.emit({type:"picture-in-picture",event:"close",fireOnlyOnce:!0})};eH((()=>{let t=e.getVideoElement(),n=i.current;t&&n&&(n.appendChild(t),s.value=!0,t.onended=()=>{d()})}),[]);let u=(t,n)=>{e.videoAdViewableChange(t,n)};return eH((()=>(a.addEventHandler("viewability",u),()=>{a.removeEventHandler("viewability",u)})),[a]),eH((()=>{var t;let n=e.getVideoElement();if(n)switch(null==(t=r.value)?void 0:t.value){case"PLAYING":n.play();break;case"PAUSED":n.pause()}}),[null==(n=r.value)?void 0:n.value]),eH((()=>{i.current&&(e.isPortrait()?i.current.style.height="auto":i.current.style.width="auto")}),[e.isPortrait()]),aX(e.getFullScreenCallToActionEventHandlerProps()),rN(am,{onSwipeUp:()=>c(ad.UP),onSwipeLeft:()=>c(ad.LEFT),children:rN("button",{type:"button",id:"picture-in-picture","aria-label":"Picture in Picture",ref:i,onClick:()=>e.clickHandler(),onAnimationEnd:()=>{s.value=!1},onTransitionEnd:d,className:ao("i0Mp0G_pictureInPictureContainer",""+(s.value?"i0Mp0G_animatingVideo":"i0Mp0G_animationEnded"),""+(l.value?"i0Mp0G_slideLeft":""),""+(o.value?"i0Mp0G_slideUp":""))})})},os=(e,t,n,i=t$())=>{i.emit({name:"frustration-clicks",metric:"frustration-clicks",scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})},oo=class extends nD{getTransitions(){let e=super.getTransitions();return e.push(nN,nV,nL,n_,nT,nI,nw),e}getId(){return this.id}getSceneType(){return this.sceneType}getSceneIndex(){return this.injectedGetScenes().findIndex((e=>e.getId()===this.getId()))}getObservabilityData(){return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex()}}addChildScenes(e){this.childScenes.push(...e),this.hideVideoProgressBar()}getChildScenes(){return this.childScenes}getChildSceneById(e){return this.childScenes.find((t=>t.getId()===e))}getCloseButtonConfig(e){let t=this.closeButtonConfigProvider.getCloseButtonConfig(e);return x(T({},t),{style:this.isLastPage()?n0.CLOSE:t.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:((e=tF())=>{let t=t2(e);return{duration:il(io(t,"sceneStart"),io(t,"sceneEnd"))}})()}static getInstances(){return[]}hideVideoProgressBar(){this.childScenes.forEach((e=>{if(rg(e)){let t=e.getProgressBarConfig();t&&(t.show=!1,e.progressBarConfig=t)}}))}constructor({id:e,children:t,isFullscreen:n,closeButtonConfigProvider:i,lastChanceEndcardConfig:r,eventStreams:a,injectedGetScenes:s=i9}){super({isFullscreen:n}),this.childScenes=[],this.id=e,this.children=t,this.closeButtonConfigProvider=i,this.lastChanceEndcardConfig=r,this.sceneType="modular",this.eventStreams=a,this.injectedGetScenes=s}},ol=class{getStateMachineConfig(){return this.stateMachineConfig}getStateMachineOptions(){return this.stateMachineOptions}buildStateMachineConfig(){return((e,t,n)=>{let i=new Set,r={},a={},s=t=>{if(i.has(t))return;let n=e.states[t];if(!n)return;i.add(t);let o={},l={};n.entry&&(o.entry=[...n.entry]),Object.entries(n.on||{}).forEach((([e,n])=>{"NEXT"!==e&&"COMPLETE"!==e||!n.target?l[e]=T({},n):(l[e]={target:n.target},a[n.target]||(a[n.target]=t),s(n.target))})),Object.keys(l).length>0&&(o.on=l),r[t]=o};return s(t),Object.entries(a).forEach((([e,t])=>{var n;r[e]&&(null!=(n=r[e]).on||(n.on={}),r[e].on.PREVIOUS={target:t})})),{id:n,initial:t,states:r}})(this.freeformService.getAdMachineConfig(),this.scene.children[0],this.scene.getId())}getSceneForState(e){return r3(e,this.scene.getChildScenes())}constructor(e,t,n=new r0){this.scene=e,this.sendAdEvent=t,this.freeformService=n,this.stateMachineConfig=this.buildStateMachineConfig(),this.stateMachineOptions=void 0}},oc=(e,t)=>new ie((n=>{let i=e=>n.next(e);return e.addEventListener(t,i),{unsubscribe:()=>{e.removeEventListener(t,i)}}})),od=({sendAdEvent:e,scene:t,duration:n=sa,videoState:i,segmentCount:r,activeIndex:a,videoInterpreter:s,timerService:o=iR()})=>{var l,c,d,u,h,v;let p=eW(null),g=eW(null),m=tg(!1),f=tg(0),S=eW(null),C=eK((()=>rg(t)),[t]),y=null!=(h=null==i||null==(c=i.value)||null==(l=c.context)?void 0:l.duration)?h:0,E=null!=(v=null==i||null==(u=i.value)||null==(d=u.context)?void 0:d.progress)?v:void 0,_=eK((()=>{if(!C&&re(t)){var e;let i=null!=(e=t.getCloseButtonConfig().delay)?e:0;return i>0?1e3*i:n}return n}),[C,t,n]),T=(({paused:e,duration:t,activeIndex:n,videoProgress:i,resetKey:r})=>{let a=tg(0),s=eW(void 0),o=eW(void 0),l=void 0!==i;return eH((()=>{if(l)return t>0&&(a.value=Math.min(i,100)),void(e&&(a.value=0));if(t<=0)return void(a.value=0);if(a.value=0,e)return void(s.current&&cancelAnimationFrame(s.current));o.current=performance.now();let n=e=>{if(null==o.current)return;let i=Math.min((e-o.current)/t*100,100);a.value=i>0?i:.01,i<100&&(s.current=requestAnimationFrame(n))};return s.current=requestAnimationFrame(n),()=>{null!=s.current&&cancelAnimationFrame(s.current)}}),[e,t,n,i,r]),a})({paused:m.value,duration:C?y:_,activeIndex:a,videoProgress:C?E:void 0,resetKey:f.value});eH((()=>{S.current=Date.now()}),[f.value,t]),eH((()=>{!m.value&&!C&&T.value>=100&&a<r&&e({type:"NEXT"})}),[T.value,m.value,C,e,a,r]);let I=eG((()=>{if(f.value+=1,C){let e=null!=s?s:i5(t.getId());null==e||e.send({type:"RESTART"})}}),[t,f]);return((e,t,n,i,r=iR(),a=oc)=>{eH((()=>{let s=e.current,o=t.current;if(!s||!o)return;let l=((...e)=>new ie((t=>{let n=0,i=e.length,r=[];return e.forEach((e=>{let a=e.subscribe({next:t.next,error:t.error,complete:()=>{var e;(n+=1)===i&&(null==(e=t.complete)||e.call(t))}});r.push(a)})),{unsubscribe:()=>{r.forEach((e=>e.unsubscribe()))}}})))(a(s,"click"),a(o,"click")).pipe(function(e,t=iR()){return n=>new ie((i=>{let r=null,a=!0,s=()=>{r&&(r.destroy(),r=null)},o=()=>{a=!0,s()},l=n.subscribe({next:n=>{a&&(i.next(n),a=!1),s(),(r=t.getNewTimer(e,o)).start()},error:e=>{var t;return null==(t=i.error)?void 0:t.call(i,e)},complete:()=>{var e;return null==(e=i.complete)?void 0:e.call(i)}});return{unsubscribe:()=>{s(),l.unsubscribe()}}}))}(n,r),iv((e=>e.target===o?"previous":"next"))).subscribe({next:e=>i(e)});return()=>{l.unsubscribe()}}),[])})(p,g,500,(n=>{if("next"===n)e({type:"NEXT"});else if("previous"===n){var i;let n=Date.now();(n-(null!=(i=S.current)?i:n))/1e3<2&&void 0!==t.prev?e({type:"PREVIOUS"}):I()}}),o),rN("div",{id:"story-progress",className:ao("_6ix-Eq_storyProgress",sr),onMouseDown:()=>{m.value=!0},onMouseUp:()=>{m.value=!1},children:[rN("div",{className:"_6ix-Eq_gradient"}),rN("div",{className:"_6ix-Eq_segmentContainer",children:Array.from({length:r}).map(((e,t)=>{let n,i=a===t,r=(n="0%",a>t?n="100%":i&&(n=`${T.value}%`),n),s=["_6ix-Eq_fill"];return i&&T.value>0&&s.push("_6ix-Eq_animating"),rN("div",{className:"_6ix-Eq_segment","data-type":"story-progress-segment",children:rN("div",{className:s.join(" "),style:{width:r}})},`segment_${t}`)}))}),rN("div",{id:"story-progress-controls",children:[rN("button",{type:"button",id:"story-progress-previous-button",className:"_6ix-Eq_prev",ref:g}),rN("button",{type:"button",id:"story-progress-next-button",className:"_6ix-Eq_next",ref:p})]})]})};g="SUBbvW_modular";const ou=e8(!1);var oh=({scene:e,sendAdEvent:t,isCloseButtonVisible:n,modularService:i})=>{let r,a,s=eK((()=>null!=i?i:new ol(e,t)),[e,t]),o=eK((()=>e.getLastChanceEndcardConfig()),[e]),[l,c]=r2(s.getStateMachineConfig(),s.getStateMachineOptions());aW(t),rG(),aG(e);let d=tg(void 0),u=tg(void 0),h=eG((e=>{["COMPLETE","NEXT","PREVIOUS"].includes(e.type)?a({type:e.type}):r(e)}),[r=t,a=c]),v=eK((()=>s.getSceneForState(l.value)),[l.value]),p=eG((e=>{ou.value=e}),[]);return aQ({callToActionConfig:o.cta,sceneId:e.getId()}),aX({fullScreenClickConfig:o.fsc,sceneId:e.getId()}),aa("scene-event",((e,t)=>{"nextButtonCountdownTick"===t.event&&(u.value=t.data.delay)})),rN("div",{className:g,children:[rN(aH,{config:o,sendAdEvent:t,onVisibilityChange:p,sceneId:e.getId()}),n&&!ou.value&&rN(aL,{config:e.getCloseButtonConfig(u.value),sendAdEvent:t,showLastChanceEndcard:o.enabled}),rN("div",{className:g,children:[rN(od,{sendAdEvent:h,scene:v,videoState:d,segmentCount:e.children.length,activeIndex:e.children.indexOf(l.value.value)}),rN(oe,{scene:v,sendEvent:h,isCloseButtonVisible:!1,shouldRenderIFrame:!0,onVideoStateChange:e=>{d.value=null==e?void 0:e.value}})]})]})},ov=({theatreModeReportingService:e=nu()})=>{let[t,n]=(()=>{let e=r1(),t=e.send,n=tg(e.state),i=r2({id:"throttle-ad",initial:"IDLE",context:{},states:{IDLE:{on:{CALL:{target:"BUSY"}}},BUSY:{on:{DONE:{target:"IDLE"}}}}}),[r,a]=i,s=eK((()=>e=>{["NEXT","LAST_CHANCE_ENDCARD","LAST_CHANCE_ENDCARD_CLOSE"].includes(e.type)?r.value.matches("IDLE")&&(a({type:"CALL"}),t(e),window.setTimeout((()=>{a({type:"DONE"})}),500)):t(e)}),[i]);return eH((()=>{let t=e.subscribe((e=>{let t=n.value;if(n.value=e,e.changed&&t.value!==e.value){let n=r3(t),i=r4();i.end(n);let r=r3(e);tB.setValue({scene:r}),i.start(r),r7(r),["video","endcard","composite","image"].includes(r.getSceneType())&&r6().pause()}}));return()=>{t.unsubscribe()}}),[e]),[n,s]})(),i=r3(t.value),r=i.getSceneType();aw(os,i);let{isCloseButtonVisible:a,isPrivacyButtonVisible:s,shouldRenderIFrame:o,shouldRenderPictureInPicture:l}=t.value.context;return rN("div",{id:"gRz7DW_ad",children:rN(r9,{children:[rN(ar,{}),l&&rN(oa,{}),s&&"closed"!==r&&rN(aI,{sendAdEvent:n}),"gdpr"===r&&rN(ae,{sendAdEvent:n}),rN(oe,{scene:i,sendEvent:n,isCloseButtonVisible:a,shouldRenderIFrame:o,theatreModeReportingService:e}),rf(i)&&rN(oi,{scene:i,sendAdEvent:n,isCloseButtonVisible:a},i.getId()),i instanceof oo&&"modular"===i.getSceneType()&&rN(oh,{scene:i,sendAdEvent:n,isCloseButtonVisible:a},i.getId()),"closed"===r&&rN(r8,{})]})})},op=()=>S.getInstance().get(np.getServiceIdentifier()),og=async(e,t,n)=>{var i;let r={adCount:0,sameCreative:0,sameVideo:0},a=t.get("AD_SOURCE"),s=t.get("CREATIVE_ID"),o=null!=(i=t.get("ORIGINAL_VIDEO_URL"))?i:t.get("MAIN_STREAM");return(await e.getAllRecords()).forEach((({placementType:e,creativeId:t,adSource:i,videoUrl:l})=>{e===n&&(r.adCount+=1),t===s&&i===a&&(r.sameCreative+=1),l===o&&(r.sameVideo+=1)})),{ad_count:r.adCount,same_creative:r.sameCreative,same_video:r.sameVideo}},om=e=>!!nk(e)&&e.getLastChanceEndcardConfig().enabled;const of={video:"ad-start-with-video",endcard:"ad-start-with-endcard",adStart:"ad-start",lastChanceEndcard:"ad-start-with-last-chance-endcard"},oS=(e,t=new Set,n=[of.adStart],i=null)=>{if(0===e.length)return i&&!n.includes(of.lastChanceEndcard)?[...n,of.lastChanceEndcard]:n;let[r,...a]=e,s=r.getSceneType(),o=i;return om(r)&&!i&&(o=r),!t.has(s)&&s in of?(t.add(s),oS(a,t,[...n,of[s]],o)):oS(a,t,n,o)},oC=async(e=op(),t=M(),n=Q.getValue(),i=t$(),r=og,a=i9)=>{let s={name:"ad-start",metric:"ad-start",elapsed:Date.now()-S.getInstance().startTimestamp};await e.addRecord();let o=T({},s,await r(e,t,n.placement.type)),l=oS(a()).map((e=>x(T({},o),{metric:e})));i.emit(l)};var oE=(e=i9())=>{let t=[],n=e=>{e.forEach((e=>{let i=e.getSceneType();["video","endcard"].includes(i)&&t.push(e),["composite","modular"].includes(i)&&n(e.getChildScenes())}))};return n(e),t.some((e=>e.muted))},oy=(e,t,n,i,r)=>{var a;let s=S.getInstance(),o=i(),l=T({ad_duration:r(s.startTimestamp,n),ado_enabled:t.device.ado,advertiser_domain:t.advertiser.domain,creative_id:t.advertiser.creative.id,creative_type:t.advertiser.creative.type,country_code:t.device.countryCode,delivery_to_ad_start:(()=>{var t;let n=new Date(1e3*parseInt((null!=(t=e.get("SESSION_ID"))?t:"").substring(0,8),16));return s.startTimestamp-n.getTime()})(),dsp:t.advertiser.dsp,elapsed:Date.now()-s.startTimestamp,event_id:t.platform.sessionId,is_header_bidding:t.advertiser.headerBidding,is_incentivized:t.placement.is.rewarded,mediation_name:t.advertiser.mediation,nautilus_version:t.platform.nautilusVersion,observed_experiments:t.platform.observedExperiments,os_version:t.device.os.version,placement_reference_id:t.placement.id,placement_type:t.placement.type,platform:t.device.os.name,pub_app_store_id:t.publisher.id,sdk_version:t.sdk.version,template_version:null!=(a=window.appVersion)?a:"0.0.0"},null==o?void 0:o.getObservabilityData());return"accelerate"===t.advertiser.dsp&&t.platform.accTests&&(l.acc_tests=t.platform.accTests),l},o_=class{getUrl(){return`${this.endpoint}/vm/logs`}pushEvent(e,t,n){this.sendLog(T(x(T({},oy(this.tokenService,this.adData,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:"event",timestamp:null!=n?n:new Date,name:e}),t))}pushManyEvents(e){this.sendLog(e.map((e=>T(x(T({},oy(this.tokenService,this.adData,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:"event",timestamp:new Date}),e))))}pushError(e,t,n){let i="",r="";var a,s;"string"==typeof e?i=e:(r=null!=(a=null==e?void 0:e.stack)?a:"",i=null!=(s=null==e?void 0:e.message)?s:"");this.sendLog(T(x(T({},oy(this.tokenService,this.adData,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:"error",timestamp:null!=n?n:new Date,message:i,stack:r}),t))}isObserved(){return nP(this.tokenService.get("OBSERVABILITY"))}sendLog(e){this.isObserved()&&this.networkRequestService.post(this.getUrl(),{requestData:e})}constructor(e,t,n,i,r,a,s){this.endpoint=e,this.tokenService=t,this.networkRequestService=n,this.adData=i,this.reportingService=r,this.getCurrentScene=a,this.getAdDuration=s}},oT=(e,t,n,i,r,a)=>new o_("https://logs.ads.vungle.com",e,t,n,i,r,a),oI="product-view",ow=class extends tz{emit(e){"store-kit-orchestration"===e.type&&null!=e.event?this.wrappedService.emit(e):this.wrappedService.emit({type:"store-kit-orchestration",event:e})}},ob=e=>new ow(null!=e?e:J()),oA=()=>J();const oO=()=>({id:oI,initial:"HIDDEN",context:{delay:0,openCount:0},states:{SHOWING:{on:{CLOSE:{target:"HIDDEN",actions:["closeStoreView","removeViewabilityHandler"]},SET_FALLBACK:{target:"FALLBACK",actions:"removeViewabilityHandler"}}},HIDDEN:{on:{OPEN:{target:"SHOWING",actions:["addViewabilityHandler","updateOpenCount","openStoreView"]}}},FALLBACK:{on:{OPEN:{actions:"showFallback"}}},INITIAL:{},PREPARING:{},DONE:{}}}),ok=(e,t)=>{var n;"maximized"===t.event&&(null==(n=((e=ng(),t=oI)=>e.interpreterMap.get(t))())||n.send({type:"CLOSE"}))},oD=(e=tj(),t=ei(),n=oA(),i=ob())=>({actions:{openStoreView:()=>{n.emit({type:"store-kit-product-view",event:"appStoreOpen"}),e.openAppStore(0)},closeStoreView:()=>{n.emit({type:"store-kit-product-view",event:"appStoreClose"})},addViewabilityHandler:()=>{t.addEventHandler("viewability",ok)},removeViewabilityHandler:()=>{t.removeEventHandler("viewability",ok)},updateOpenCount:V({openCount:e=>e.openCount?e.openCount+1:1}),showFallback:()=>{i.emit("skpvFallbackToSko")}}}),oN=()=>({id:oI,initial:"INITIAL",context:{delay:0,openCount:0,appStoreId:void 0},states:{INITIAL:{on:{READY:{target:"PREPARING",actions:["setAppStoreId","prepareStoreView"]}}},PREPARING:{on:{PREPARE_SUCCESS:{target:"HIDDEN"}}},SHOWING:{on:{CLOSE:{target:"INITIAL",actions:["closeStoreView","removeViewabilityHandler"]}}},HIDDEN:{on:{OPEN:{target:"SHOWING",actions:["addViewabilityHandler","updateOpenCount","openStoreView"]}}},FALLBACK:{},DONE:{}}}),oV=(e=tj(),t=ei(),n=oA(),i=ob())=>({actions:x(T({},oD(e,t,n,i).actions),{setAppStoreId:V({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),prepareStoreView:t=>{t.appStoreId&&e.prepareStoreView(t.appStoreId)},openStoreView:t=>{t.appStoreId&&(n.emit({type:"store-kit-product-view",event:"appStoreOpen"}),e.presentStoreView(t.appStoreId))}})});var oL=class extends nU{init(e){this.interpreter.send(T({type:"READY"},e))}close(){this.interpreter.send({type:"CLOSE"}),this.interpreter.send({type:"READY"})}setPrepared(){this.interpreter.send({type:"PREPARE_SUCCESS"})}constructor(e=oN,t=oV,n=ng()){super(e(),t(),n)}};const oP=()=>{let e=oO(),t=e.states.SHOWING;return t.on=x(T({},t.on),{CLOSE:{target:"DONE",actions:["closeStoreView","removeViewabilityHandler"]}}),e},oM=()=>oP();var oR=class extends nU{fallback(){var e;!1!==this.hasFallback&&(null==(e=this.interpreter)||e.send({type:"SET_FALLBACK"}),this.open())}constructor(e=oO,t=oD,n=ng()){super(e(),t(),n)}},ox=class extends oR{constructor(e=oM,t=oD,n=ng()){super(e,t,n)}};const oB=()=>{let e=oN(),t=e.states.SHOWING;return t.on=x(T({},t.on),{CLOSE:{target:"DONE",actions:["closeStoreView","removeViewabilityHandler"]}}),e},oU=()=>oB();var oF=class extends oL{constructor(e=oU,t=oV,n=ng()){super(e,t,n)}},oH=class extends oR{constructor(e=oP,t=oD,n=ng()){super(e,t,n)}},oW=class extends oL{constructor(e=oB,t=oV,n=ng()){super(e,t,n)}},oK=class{withAppStoreId(e,t){return t&&e.init({appStoreId:t}),e}resolve(){if(this.adData.device.skpv.hasSwipeIssue){if(this.adData.sdk.is.version71xOrAbove&&this.adData.sdk.is.versionBelow721)return new ox;if(this.adData.sdk.is.version70x&&this.adData.sdk.is.versionBelow71x)return this.withAppStoreId(new oF,this.adData.advertiser.appStoreId)}return this.adData.device.skpv.hasMaskIssue?this.adData.sdk.is.version71xOrAbove?new oH:this.withAppStoreId(new oW,this.adData.advertiser.appStoreId):this.adData.sdk.is.version71xOrAbove?new oR:this.withAppStoreId(new oL,this.adData.advertiser.appStoreId)}constructor(e=M(),t=Q.getValue()){this.tokenService=e,this.adData=t}},oG=class{resolve(){if(this.adData.device.os.is.iOS)return new oK(this.tokenService,this.adData).resolve()}constructor(e=M(),t=Q.getValue()){this.tokenService=e,this.adData=t}};class oj extends nm{static getInstances(e=Q.getValue()){return e.gdpr.requiresConsent&&!e.placement.is.banner?[new oj(nB)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}getSceneIndex(){return 0}getObservabilityData(){return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex()}}constructor(e){super(),this.id=e,this.sceneType="gdpr"}}var oY=class extends nR{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!=(e=this.ecCtaUrlTokenValue)?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,fullCtaTokenValue:i,skFullCtaTokenValue:r,placementType:a,errorLoggingReportingService:s}){super({fullCtaTokenValue:i,skFullCtaTokenValue:r,id:e,placementType:a,errorLoggingReportingService:s}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}};class oz extends ri{getSceneType(){return"image"}getObservabilityData(){return{scene_id:this.getId(),scene_type:this.getSceneType(),scene_index:this.getSceneIndex()}}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return x(T({},e),{style:this.isLastPage()?n0.CLOSE:e.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:((e,t=!1,n=tF(),i=iR())=>{let r=ir(n,"resource","image").pipe(ia()).pipe(is(io(n,"sceneEnd"))),a=x(T({},iM(n,t)),{error_count:r});return e.enabled&&(a.grant_reward=iz("image",e,n,i)),a})(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}static getInstances(e=M(),t=tY(),n=i6(),i=Q.getValue(),r=i8,a=i9){let s=[],o=e.has("EC_HTML");return["EC_IMAGE","EC_IMAGE_2"].filter((t=>e.has(t))).forEach(((n,l)=>{var c;let d=`image_${l}`,u=o?l+1:l,h=new n4(n3(d,i,e),t);s.push(new oz({id:d,url:null!=(c=e.get(n))?c:"",index:u,isFullscreen:i.placement.is.fullscreen,fullScreenClickConfig:new oY({id:d,ecImageTokenValue:e.get("EC_IMAGE"),ecCtaUrlTokenValue:e.get("EC_CTA_URL"),fullCtaTokenValue:e.get("FULL_CTA"),skFullCtaTokenValue:e.get("SK_FSC"),placementType:i.placement.type,errorLoggingReportingService:t}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new nQ(u,this.isEndcardOnly(e),i.advertiser.appStoreId,e.get("FULL_CTA_OPTION"),e.get("SKOVERLAY_AUTO"),e.get("SKOVERLAY_DELAY_SECONDS"),e.get("EC_SKOVERLAY_DELAY_SECONDS"),e.get("SKOVERLAY_AUTO_CLOSE"),e.get("EC_SKOVERLAY_DISABLE_AUTO_MMP")).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new nZ(u,i.advertiser.appStoreId,e.get("APP_STORE_ON_ENDCARD_AUTO_DELAY")).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:h.getLastChanceEndcardConfig(),trackingEventMapConfig:new n5(!1).getTrackingEventMapConfig(),closeButtonConfigProvider:new n6({ecCloseButtonDelaySecondsTokenValue:e.get("EC_CLOSE_BUTTON_DELAY_SECONDS"),staticEcCloseButtonDelaySecondsTokenValue:e.get("STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS"),showECCloseButtonCountDownTokenValue:e.get("SHOW_EC_CLOSE_BUTTON_COUNTDOWN"),endcardCloseButtonAsSkipTokenValue:e.get("ENDCARD_CLOSE_BUTTON_AS_SKIP"),isSecondEndcard:1===u}),callToActionConfig:new n7({skEcCtaOnlyTokenValue:e.get("SK_EC_CTA_ONLY"),appMetaProviderParams:i3(e,t)}).getCallToActionConfig(),shouldSplitVideoEndcardClick:nP(e.get("VIDEO_ENDCARD_CLICK_SPLIT")),incentivizedConfig:new i4({enabled:nP(e.get("INCENTIVIZED")),incentivizedCloseButtonDelaySeconds:e.get("INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS"),isIncentiveTiedToCloseButtonDelay:nP(e.get("IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY"))}).getIncentivizedConfig(),amplifyEndcardEngagementService:r,injectedGetScenes:a}))})),s}constructor({id:e,url:t,index:n,isFullscreen:i,fullScreenClickConfig:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:s,lastChanceEndcardConfig:o,closeButtonConfigProvider:l,trackingEventMapConfig:c,callToActionConfig:d,shouldSplitVideoEndcardClick:u=!1,eventStreams:h,incentivizedConfig:v,amplifyEndcardEngagementService:p=i8,injectedGetScenes:g=i9}){super({id:e,endcardContent:t,index:n,isFullscreen:i,isAlternative:!1,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:s,lastChanceEndcardConfig:o,trackingEventMapConfig:c,callToActionConfig:d,closeButtonConfigProvider:l,shouldSplitVideoEndcardClick:u,eventStreams:h,incentivizedConfig:v,amplifyEndcardEngagementService:p,injectedGetScenes:g}),this.url=t,this.index=n,this.fullScreenClickConfig=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=s,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=c,this.callToActionConfig=d,this.closeButtonConfigProvider=l,this.eventStreams=h}}var oq=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.transformers.forEach((e=>{e.transform(this.mainScenes)})),this.mainScenes}buildMainScenes(){return[...oj.getInstances(),...rp.getInstances(),...ri.getInstances(),...oz.getInstances(),...n8.getInstances()]}constructor(){this.transformers=[],this.mainScenes=[],this.tokenService=M()}},o$=class{transform(e){return e.forEach(((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find((e=>"NEXT"===e.name));a?a.scene=null!=(i=e[n+1])?i:void 0:t.addTransition({name:"NEXT",scene:null!=(r=e[n+1])?r:void 0,actions:[]})})),e}},oX=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null==(n=e.getTransitions())?void 0:n.find((e=>"NEXT"===e.name&&e.scene)),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType()))return void this.insertionHelper(r,t);if(1===t)return void(i.actions.some((e=>"showProductView"===e.name))||i.actions.push({name:"showProductView"}));this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=["gdpr"]}},oQ=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n;if(void 0===e[t+1])return;let i=null==(n=e[t].getTransitions())?void 0:n.filter((e=>{var t;let n="closed"===(null==(t=e.scene)?void 0:t.getSceneType()),i=e.actions.find((e=>"showProductView"===e.name));return n&&i}));0!==i.length&&i.forEach((e=>{e.actions.push({name:"endAdOnProductViewClose"});let t=e.scene,n=t.getEntryActions().findIndex((e=>"closeAd"===e.name));-1!==n&&t.getEntryActions().splice(n,1)})),this.addCloseAdAction(e,t+1)}},oZ=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},oJ=class{transform(e){return e.forEach((e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:"postrollView"})})),e}constructor(){this.sceneTypesToAddPostrollView=["video","image","endcard"]}},o0=class{transform(e){return e.forEach((e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:"initCheckpoints"})})),e}constructor(){this.sceneTypesToInitCheckPoint=["image","endcard"]}},o1=class{transform(e){return e.forEach((e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:"closeStoreKitOverlay"})})),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=["video","endcard"]}},o2=class{transform(e){return e.forEach((e=>{if(!rg(e))return;let t=e.getTransitions().find((e=>"NEXT"===e.name)),n=null==t?void 0:t.actions.filter((e=>"showProductView"!==e.name)),i={name:"VIDEO_FAILURE",actions:null!=n?n:[],scene:om(e)||null==t?void 0:t.scene};e.getLastChanceEndcardConfig().enabled&&i.actions.push({name:"fireImpression"}),e.isLastPage()&&!om(e)?i.actions.push({name:"sendFatalVideoError"}):i.actions.push({name:"sendEventVideoSkipToNextScene"}),e.addTransition(i)})),e}},o3=class{transform(e){return e.filter((e=>{var t;return"closed"===(null==(t=e.next)?void 0:t.getSceneType())})).forEach((e=>{if(nk(e)){var t;e.setLastChanceEndcardConfig(x(T({},e.getLastChanceEndcardConfig()),{enabled:!0})),e.addTransition({name:"LAST_CHANCE_ENDCARD",actions:[{name:"closeOverlayView"},{name:"resetAutoShowOverlayService"},{name:"resetAppStoreOnDelayService"},{name:"showLastChanceEndcard"},{name:"setCloseButtonHidden"},{name:"closeVideoCurrentScene"},{name:"setTheatreModeInactive"},{name:"disableTheatreMode"}]}),e.addExitAction({name:"closeLastChanceEndcard"});let n=e.getTransitions().find((e=>"NEXT"===e.name));if(!n)return;e.addOrUpdateTransition({name:"NEXT",actions:[{name:"setCloseButtonVisible"},...null!=(t=null==n?void 0:n.actions)?t:[]],scene:null==n?void 0:n.scene});let i=null==n?void 0:n.actions.find((e=>"showProductView"===e.name));if(i&&(e.addOrUpdateTransition({name:"LAST_CHANCE_ENDCARD",actions:[i]}),n.actions=n.actions.filter((e=>"showProductView"!==e.name))),n.actions.some((e=>"showPictureInPicture"===e.name))){let t=e.getTransitions().find((e=>"LAST_CHANCE_ENDCARD"===e.name));if(t){e.addOrUpdateTransition({name:"LAST_CHANCE_ENDCARD",actions:[{name:"showPictureInPicture"},{name:"setPictureInPictureVideoContext"}]}),t.actions=null==t?void 0:t.actions.filter((e=>"closeVideoCurrentScene"!==e.name));let i=["showPictureInPicture","setPictureInPictureVideoContext"];n.actions=n.actions.filter((e=>!i.includes(e.name)))}}}})),e}},o4=class{transform(e){return e.forEach((e=>{if(!rg(e)||e.getTransitions().some((e=>"COMPLETE"===e.name&&void 0!==e.scene)))return;let t=e.getTransitions().find((e=>"NEXT"===e.name));if(t){var n;let i=["showPictureInPicture","setPictureInPictureVideoContext"];e.addOrUpdateTransition({name:"COMPLETE",scene:null==t?void 0:t.scene,actions:[...null!=(n=t.actions.filter((e=>!i.includes(e.name))))?n:[]]})}})),e}},o6=class{transform(e){let t=e[0];if(!t||!rg(t))return e;let n=t.getTransitions().find((e=>"NEXT"===e.name));return n&&(n.actions=n.actions.filter((e=>"closeVideo"!==e.name)),n.actions.push({name:"showPictureInPicture"},{name:"setPictureInPictureVideoContext"}),t.isPictureInPictureEnabled=!0),e}},o5=class{transform(e){return e.forEach((e=>{if(!aY(e))return;let t=e.getTransitions(),n=t.find((e=>"NEXT"===e.name));if(n){let i=n.actions,r=t.find((e=>"LAST_CHANCE_ENDCARD"===e.name)),a={name:"IMAGE_FAILURE",scene:r?void 0:n.scene,actions:r?[...r.actions]:[...i]};a.actions.some((e=>"showProductView"===e.name))||a.actions.push({name:"showProductView"}),e.addTransition(a)}})),e}},o7=()=>{let e=new oq;e.addTransformer(new o$),e.addTransformer(new oZ),nF()&&nP(M().get("APP_STORE_ON_FIRST_TRANSITION"))&&e.addTransformer(new oX(1)),nF()&&nP(M().get("APP_STORE_ON_SECOND_TRANSITION"))&&e.addTransformer(new oX(2)),((e=M())=>nP(e.get("PICTURE_IN_PICTURE")))()&&e.addTransformer(new o6),((e=M())=>nP(e.get("VX_ENDCARD")))()&&e.addTransformer(new o3),e.addTransformer(new oJ),e.addTransformer(new o0),e.addTransformer(new o1),e.addTransformer(new o2),e.addTransformer(new o4);let t=e.build();return t=(new o5).transform(t),t=(new oQ).transform(t),S.getInstance().bind(nx,t),t},o8=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return T(x(T({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},o9=(e,t=M())=>void 0===e?"":"string"==typeof e?e:t.get(e.token),le=(e,t=M())=>{var n,i;let r=o9(null==e?void 0:e.icon,t),a=null==e||null==(n=e.screenshots)?void 0:n.map((e=>o9(e,t))).filter((e=>void 0!==e));return Object.keys(i={enabled:!(!(null==e?void 0:e.name)||!r),downloads:null==e?void 0:e.downloads,icon:r,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:a}).forEach((e=>{let t=i[e];(void 0===t||""===t||Array.isArray(t)&&0===t.length)&&delete i[e]})),i},lt=(e,t,n,i=M())=>{var r,a,s,o,l,c,d,u,h,v,p,g,m,f,S,C,y;let E,_=!1,I={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return I;let w=null!=(u=null==t?void 0:t.fsc)&&u,b=null!=(h=null==t||null==(r=t.cta)?void 0:r.text)?h:"Open";Object.keys(null!=(v=null==n?void 0:n.on)?v:{}).includes("LAST_CHANCE_ENDCARD")&&(_=!0);let A=le(t.appMeta,i),O=x(T({},A),{enabled:!(!A.name||!A.icon)}),k=4e3;return(null==t||null==(a=t.cta)?void 0:a.delay)&&(k=1e3*t.cta.delay),x(T({},I),{enabled:_,fsc:{enabled:w,ctaUrl:null!=(p=null==t||null==(s=t.cta)?void 0:s.url)?p:"",target:null==t||null==(o=t.storeKit)?void 0:o.fscTarget},appMeta:O,close:(f=null==t?void 0:t.close,E=0,(null==f?void 0:f.delay)&&(E="number"==typeof f.delay?f.delay:null!=(S=f.delay.value)?S:0),{delay:E,countdown:null==(C=null==f?void 0:f.countdown)||C,style:null!=(y=null==f?void 0:f.style)?y:n0.CLOSE}),cta:{text:b,url:null!=(g=null==t||null==(l=t.cta)?void 0:l.url)?g:"",isPersistent:null!=(m=null==t||null==(c=t.cta)?void 0:c.isPersistent)&&m,delay:k,appMeta:O,target:null==t||null==(d=t.storeKit)?void 0:d.ctaTarget}})},ln=(e,t,n=M())=>{var i;return{url:null==e?void 0:e.url,text:null==e?void 0:e.text,isPersistent:null==e?void 0:e.isPersistent,delay:(null==e?void 0:e.delay)?1e3*e.delay:0,background:null==e?void 0:e.background,appMeta:(null==e?void 0:e.appMeta)?le(e.appMeta,n):void 0,target:null!=(i=null==t?void 0:t.ctaTarget)?i:ni.SKPV,position:null==e?void 0:e.position}},li=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}},lr=(e=M())=>({enabled:nP(e.get("INCENTIVIZED")),incentivizedCloseButtonDelaySeconds:e.get("INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS"),isIncentiveTiedToCloseButtonDelay:nP(e.get("IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY"))}),la=()=>{let e=S.getInstance(),t=rk.getServiceIdentifier();return e.get(t)},ls=class{get cachedConfig(){return this.closeButtonService.cachedConfig}getDefaultConfig(){return{delay:0,style:n0.CLOSE,countdown:!0}}updateTotalDelay(e){void 0!==this.closeButtonService.totalDelaySeconds&&(this.closeButtonService.totalDelaySeconds=Math.max(0,this.closeButtonService.totalDelaySeconds-e))}calculateActualDelay(e){return e?"number"==typeof e?e:"%"===e.unit?Math.floor(this.closeButtonService.totalDelaySeconds*e.value/100):Math.min(e.value,this.closeButtonService.totalDelaySeconds):0}constructor(e,t,n,i=la()){this.id=e,this.config=t,this.closeButtonService=i,void 0===this.closeButtonService.totalDelaySeconds&&void 0!==n&&(this.closeButtonService.totalDelaySeconds=n)}},lo=class extends ls{getCloseButtonConfig(e){if(this.cachedConfig.has(this.id))return this.cachedConfig.get(this.id);let t=this.config;if(!t)return this.getDefaultConfig();let n=this.calculateActualDelay(t.delay);(null==e?void 0:e.videoDuration)&&e.videoDuration<n&&(n=Math.floor(e.videoDuration));let i={delay:n,style:t.style,countdown:t.countdown};return this.cachedConfig.set(this.id,i),this.updateTotalDelay(n),i}},ll=(e,t)=>{var n;return{manifest:null==e?void 0:e.manifest,tracks:null==e?void 0:e.tracks,chunks:null==e||null==(n=e.chunks)?void 0:n.map((e=>o9(e,t))).filter((e=>""!==e)),chunk_init:o9(null==e?void 0:e.chunk_init,t)}},lc=class extends ls{getCloseButtonConfig(){if(this.cachedConfig.has(this.id))return this.cachedConfig.get(this.id);let e=this.config;if(!e)return this.getDefaultConfig();let t=this.calculateActualDelay(e.delay),n={delay:t,style:e.style,countdown:e.countdown};return this.cachedConfig.set(this.id,n),this.updateTotalDelay(t),n}},ld=class extends ls{getCloseButtonConfig(e){if(this.cachedConfig.has(this.id)){let t=this.cachedConfig.get(this.id);return void 0!==e&&(t.delay=e),t}let t=this.config;if(!t)return this.getDefaultConfig();let n=this.calculateActualDelay(t.delay),i={delay:n,style:t.style,countdown:t.countdown};return this.cachedConfig.set(this.id,i),this.updateTotalDelay(n),i}};const lu={composite:(e,t,n,i,r=M(),a=i6(),s=la(),o=Q.getValue())=>new rm({id:e.id,html:e.html,children:e.children,closeButtonConfigProvider:new lc(e.id,e.close,null==n?void 0:n.globalTimer,s),lastChanceEndcardConfig:lt(e.id,e.lastChanceEndcard,i,r),htmlDecoderService:a,adData:o}),endcard:(e,t,n,i,r=M(),a=i6(),s=la(),o=Q.getValue())=>new ri({id:e.id,endcardContent:a.decode(e.html),index:t,isFullscreen:o.placement.is.fullscreen,isAlternative:!1,storeKitOverlayAutoShowConfig:o8(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:lt(e.id,e.lastChanceEndcard,i,r),trackingEventMapConfig:li(e),callToActionConfig:ln(e.cta,e.storeKit,r),closeButtonConfigProvider:new lc(e.id,e.close,null==n?void 0:n.globalTimer,s),incentivizedConfig:lr(r)}),image:(e,t,n,i,r=M(),a=la(),s=Q.getValue())=>{var o,l;return new oz({id:e.id,url:o9(e.url,r),index:t,isFullscreen:s.placement.is.fullscreen,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:null==(o=e.cta)?void 0:o.url,target:null==(l=e.storeKit)?void 0:l.fscTarget},storeKitOverlayAutoShowConfig:o8(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:lt(e.id,e.lastChanceEndcard,i,r),trackingEventMapConfig:li(e),closeButtonConfigProvider:new lc(e.id,e.close,null==n?void 0:n.globalTimer,a),callToActionConfig:ln(e.cta,e.storeKit,r),incentivizedConfig:lr(r)})},video:(e,t,n,i,r=M(),a=la(),s=Q.getValue())=>{var o,l,c,d,u;let h=o9(e.url,r).endsWith(".m3u8")?"hls":"mp4",v={enabled:e.fsc,target:null==(o=e.storeKit)?void 0:o.fscTarget,ctaUrl:null==(l=e.cta)?void 0:l.url},p=ll(e.streamManifest,r),g=ll(x(T({},e.audioManifest),{tracks:null!=(u=null==(c=e.audioManifest)?void 0:c.tracks)?u:{},manifest:null==(d=e.streamManifest)?void 0:d.manifest}),r);return new rp({id:e.id,url:o9(e.url,r),isAlternative:!1,showDownloadButton:!1,theatreModeEnabled:!1,index:t,videoType:h,streamManifest:p,audioManifest:g,progressBarConfig:(()=>{var t,n,i;let r=null!=(i=null==e||null==(t=e.progressBar)?void 0:t.show)&&i;return{show:r,color:r&&(null==(n=e.progressBar)?void 0:n.color)?e.progressBar.color:iE}})(),fullScreenClickConfig:v,storeKitOverlayAutoShowConfig:o8(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:ln(e.cta,e.storeKit,r),lastChanceEndcardConfig:lt(e.id,e.lastChanceEndcard,i,r),closeButtonConfigProvider:new lo(e.id,e.close,null==n?void 0:n.globalTimer,a),originalVideoUrl:(e=>{if("string"==typeof e)return;let{originalUrl:t}=e;return t&&""!==t.trim()?t:void 0})(e.url),loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:li(e),isFullscreen:s.placement.is.fullscreen,incentivizedConfig:lr(r)})},modular:(e,t,n,i,r=M(),a=i6(),s=la(),o=Q.getValue())=>new oo({id:e.id,children:e.children,isFullscreen:o.placement.is.fullscreen,closeButtonConfigProvider:new ld(e.id,e.close,null==n?void 0:n.globalTimer,s),lastChanceEndcardConfig:lt(e.id,e.lastChanceEndcard,i,r)})};var lh=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=oj.getInstances();return this.scenes.unshift(...e),this.transformers.forEach((e=>{this.scenes=e.transform(this.scenes)})),this.scenes}constructor(e=new r0,t=lu){this.converters=t,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let n=e.getSceneData(),i=e.getAdMachineConfig(),r=new Map;n.forEach((e=>{r.has(e.type)||r.set(e.type,[]),r.get(e.type).push(e)})),r.forEach(((e,t)=>{let n=this.converters[t];n&&e.forEach(((e,t)=>{let r=n(e,t,null==i?void 0:i.context,i.states[e.id]);this.scenes.push(r),this.scenesMap.set(e.id,r)}))}));let a=new n8;this.scenesMap.set(a.getId(),a),this.scenes.push(a),this.scenes.forEach((e=>{let t=i.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach((n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map((e=>({name:e}))):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)}))}))}},lv=class{transform(e){return e.filter((e=>!!nk(e)&&e.getLastChanceEndcardConfig().enabled)).forEach((e=>{var t,n;e.addOrUpdateTransition({name:"NEXT",actions:[{name:"closeLastChanceEndcard"},{name:"setCloseButtonVisible"}]});let i=[{name:"closeOverlayView"},{name:"resetAutoShowOverlayService"},{name:"resetAppStoreOnDelayService"},{name:"setCloseButtonHidden"},{name:"setTheatreModeInactive"},{name:"disableTheatreMode"}];(null==(t=e.getTransitions().find((e=>"LAST_CHANCE_ENDCARD"===e.name)))?void 0:t.actions.some((e=>"showOverlayView"===e.name)))&&i.splice(i.findIndex((e=>"closeOverlayView"===e.name)),1);let r=null==(n=e.getTransitions().find((e=>"LAST_CHANCE_ENDCARD"===e.name)))?void 0:n.actions.some((e=>"showPictureInPicture"===e.name));"video"===e.getSceneType()&&(r?i.push({name:"setPictureInPictureVideoContext"}):i.push({name:"closeVideoCurrentScene"})),e.addOrUpdateTransition({name:"LAST_CHANCE_ENDCARD",actions:i})})),e}},lp=class{transform(e,t=new r0){let n=t.getAdMachineConfig();return e.forEach((t=>{var i,r,a;let s,o=t.getId(),l=(s=null==(a=n.states[o])||null==(r=a.on)||null==(i=r.NEXT)?void 0:i.target,e.find((e=>e.getId()===s)));l&&(t.next=l,l.prev=t)})),e}},lg=class{transform(e){var t;let n="video"===(null==(t=e[0])?void 0:t.getSceneType())?e[0]:null,i=null==n?void 0:n.getTransitions().find((e=>"NEXT"===e.name));return(null==i?void 0:i.actions.some((e=>"showPictureInPicture"===e.name)))&&(i.actions=i.actions.filter((e=>"closeVideo"!==e.name)).concat({name:"setPictureInPictureVideoContext"})),e}},lm=class{transform(e){return e.forEach((e=>{let t=e.prev;if(!t)return;let n=e.getTransitions().find((e=>"PREVIOUS"===e.name));n?n.scene=t:e.addTransition({name:"PREVIOUS",scene:t,actions:[]})})),e}},lf=function(e){return(e instanceof rm||e instanceof oo)&&Array.isArray(e.children)},lS=class{transform(e,t=new r0){let n=t.getSceneData(),i=[];return e.forEach((t=>{if(lf(t)){let r=n.find((e=>e.id===t.getId()));if(!r)return;let a=r.children,s=[];a.forEach((t=>{let n=e.find((e=>e.getId()===t));n&&(n.child=!0,s.push(n))})),t.addChildScenes(s),i.push(t)}})),e.forEach((e=>{!lf(e)&&(i.some((t=>!!lf(t)&&t.getChildScenes().includes(e)))||i.push(e))})),i}};const lC=[new lp,new oJ,new o0,new o1,new lv,new lg,new o2,new o4,new lm,new lS];var lE=(e=new r0,t=lC)=>{let n=new lh(e);t.forEach((e=>{n.addTransformer(e)}));let i=n.build();return S.getInstance().bind(nx,i),i};const ly=()=>({position:"bottom",dismissible:!0});var l_=(e=M())=>{let t=ly(),n=((e=M())=>{let t=e.get("SKOVERLAY_POSITION");switch(t){case"bottom":case"bottom-raised":return t;default:return}})(e);void 0!==n&&(t.position=n);let i=((e=M())=>{var t,n;switch(null==(n=e.get("SKOVERLAY_DISMISSIBLE"))||null==(t=n.trim())?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}})(e);return void 0!==i&&(t.dismissible=i),t};const lT=(e=ly(),t="appStore")=>({id:"store-kit-overlay",initial:"IDLE",context:{displayOptions:e,fallback:t},states:{IDLE:{on:{START_DELAY_SHOW:{target:"DELAY_SHOW",actions:"ASSIGN_FALLBACK"},START_IMMEDIATE_SHOW:{target:"IMMEDIATE_SHOW",actions:["ASSIGN_FALLBACK","SHOW_SKO"]},SET_DISPLAY_OPTIONS:{actions:"ASSIGN_DISPLAY_OPTIONS"}}},DELAY_SHOW:{on:{CLOSE:{target:"IDLE"},INTERRUPT:{target:"DELAY_SHOW_INTERRUPTED"},SHOW:{target:"DELAY_SHOW_IMMEDIATE",actions:"SHOW_SKO"},START_IMMEDIATE_SHOW:{target:"IMMEDIATE_SHOW",actions:["ASSIGN_FALLBACK","CANCEL_DELAY_SHOW","SHOW_SKO"]}}},DELAY_SHOW_IMMEDIATE:{on:{SET_VISIBLE:{target:"DELAY_SHOW_VISIBLE",actions:"EMIT_OBSERVABILITY_EVENT"},CLOSE:{target:"IDLE"}}},DELAY_SHOW_VISIBLE:{on:{CLOSE:{target:"CLOSING",actions:"CLOSE_SKO"},FINISH:{target:"IDLE"},INTERRUPT:{target:"DELAY_SHOW_INTERRUPTED",actions:"CLOSE_SKO"}}},DELAY_SHOW_INTERRUPTED:{on:{RESUME:{target:"DELAY_SHOW_IMMEDIATE",actions:"SHOW_SKO"},CLOSE:{target:"IDLE"}}},IMMEDIATE_SHOW:{on:{SET_VISIBLE:{target:"IMMEDIATE_SHOW_VISIBLE",actions:"EMIT_OBSERVABILITY_EVENT"},INTERRUPT:{target:"CLOSING",actions:"CLOSE_SKO"},SET_FALLBACK:{target:"FALLBACK"}}},IMMEDIATE_SHOW_VISIBLE:{on:{CLOSE:{target:"CLOSING",actions:"CLOSE_SKO"},FINISH:{target:"IDLE"},INTERRUPT:{target:"CLOSING",actions:"CLOSE_SKO"}}},FALLBACK:{on:{START_IMMEDIATE_SHOW:{actions:"SHOW_FALLBACK"}}},CLOSING:{on:{FINISH:{target:"IDLE"}}},ERROR:{},INITIAL:{},PREPARING:{}}}),lI=(e,t,n,i)=>({actions:{EMIT_OBSERVABILITY_EVENT:()=>{t.emit("store-kit-overlay")},SHOW_SKO:t=>{e.openAppStore(1,t.displayOptions)},CLOSE_SKO:()=>{e.dismissStoreOverlayView()},ASSIGN_FALLBACK:V(((e,t)=>{var n;return x(T({},e),{fallback:null!=(n=t.fallback)?n:e.fallback})})),ASSIGN_DISPLAY_OPTIONS:V(((e,t)=>{var n;return x(T({},e),{displayOptions:null!=(n=t.displayOptions)?n:e.displayOptions})})),SHOW_FALLBACK:e=>{switch(e.fallback){case"skpv":n.emit("skoFallbackToSkpv");break;case"appStore":n.emit("storeKitFallbackToMraid")}},CANCEL_DELAY_SHOW:()=>{null==i||i.reset()}}}),lw=(e=ly(),t="appStore")=>{let n=lT(e,t);return x(T({},n),{initial:"INITIAL",context:{appStoreId:void 0,displayOptions:e,fallback:t},states:x(T({},n.states),{INITIAL:{on:{READY:{target:"PREPARING",actions:["SET_APP_STORE_ID","PREPARE_OVERLAY"]}}},PREPARING:{on:{SET_PREPARED:{target:"IDLE"},SET_ERROR:{target:"ERROR",actions:"EMIT_PREPARE_ERROR"}}},DELAY_SHOW_VISIBLE:{on:{CLOSE:{target:"CLOSING",actions:"CLOSE_SKO"},FINISH:{target:"INITIAL"},INTERRUPT:{target:"DELAY_SHOW_INTERRUPTED",actions:"CLOSE_SKO"}}},IMMEDIATE_SHOW_VISIBLE:{on:{CLOSE:{target:"CLOSING",actions:"CLOSE_SKO"},FINISH:{target:"INITIAL"},INTERRUPT:{target:"CLOSING",actions:"CLOSE_SKO"}}},CLOSING:{on:{FINISH:{target:"INITIAL"}}}})})},lb=(e=tj(),t=t$(),n=rx(),i=ob())=>({actions:x(T({},lI(e,t,i,n).actions),{PREPARE_OVERLAY:t=>{t.appStoreId&&e.prepareStoreOverlayView(t.appStoreId,t.displayOptions)},SET_APP_STORE_ID:V({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),EMIT_PREPARE_ERROR:()=>{t.emit("store-kit-overlay-prepare-error")},SHOW_SKO:t=>{t.appStoreId&&e.presentStoreOverlayView(t.appStoreId,t.displayOptions)},CLOSE_SKO:t=>{t.appStoreId&&e.dismissStoreOverlayView(t.appStoreId)}})});var lA=e=>{let t="appStore";return e&&(t="skpv"),t},lO=class extends nH{init(e){this.interpreter.send(T({type:"READY"},e))}close(){super.close(),this.interpreter.send({type:"READY"})}finish(){super.finish(),this.interpreter.send({type:"READY"})}setError(){this.interpreter.send({type:"SET_ERROR"})}setPrepared(){this.interpreter.send({type:"SET_PREPARED"})}constructor(e=lw,t=lb,n=ng(),i=M(),r=tj(),a=nF()){super(e(l_(i),lA(a)),t(r),n),this.stateMachineService=n,this.tokenService=i,this.mraidService=r,this.productViewService=a}},lk=class extends nH{constructor(e=lT,t=lI,n=ng(),i=M(),r=tj(),a=t$(),s=ob(),o=rx()){super(e(l_(i),lA()),t(r,a,s,o),n)}},lD=class{withAppStoreId(e,t){return t&&e.init({appStoreId:t}),e}resolve(){if(this.adData.device.os.is.iOS)return this.adData.sdk.is.version71xOrAbove?new lk:this.withAppStoreId(new lO,this.adData.advertiser.appStoreId)}constructor(e=M(),t=Q.getValue()){this.tokenService=e,this.adData=t}};const lN={},lV=()=>{window.omidBridge&&Object.entries(lN).forEach((([e,t])=>{var n;"function"==typeof(null==(n=window.omidBridge)?void 0:n[e])&&window.omidBridge[e](...t)}))};var lL=e=>new Promise(((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))}));const lP=async(e=M(),t=Q.getValue(),n=lL,i=J(),r=lV)=>{if(nP(e.get("OM_ENABLED"))&&t.sdk.supports.omSdk)try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:"exception",data:{error:{message:"Load OMSDK files failed"}}})}};let lM=-1;const lR=e=>{addEventListener("pageshow",(t=>{t.persisted&&(lM=t.timeStamp,e(t))}),!0)},lx=(e,t,n,i)=>{let r,a;return s=>{let o;t.value>=0&&(s||i)&&((a=t.value-(null!=r?r:0))||void 0===r)&&(r=t.value,t.delta=a,o=t.value,t.rating=o>n[1]?"poor":o>n[0]?"needs-improvement":"good",e(t))}},lB=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},lU=()=>{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},lF=()=>{var e;let t=lU();return null!=(e=null==t?void 0:t.activationStart)?e:0},lH=(e,t=-1)=>{let n=lU(),i="navigate";return lM>=0?i="back-forward-cache":n&&(document.prerendering||lF()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},lW=new WeakMap;function lK(e,t){return lW.get(e)||lW.set(e,new t),lW.get(e)}const lG=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let i=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return i.observe(T({type:e,buffered:!0},n)),i}}catch(e){}},lj=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let lY=-1;const lz=new Set,lq=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,l$=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(let e of lz)e();isFinite(lY)||(lY="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",l$,!0))}},lX=()=>{if(lY<0){var e;let t=lF(),n=document.prerendering||null==(e=globalThis.performance.getEntriesByType("visibility-state").filter((e=>"hidden"===e.name&&e.startTime>t))[0])?void 0:e.startTime;lY=null!=n?n:lq(),addEventListener("visibilitychange",l$,!0),addEventListener("prerenderingchange",l$,!0),lR((()=>{setTimeout((()=>{lY=lq()}))}))}return{get firstHiddenTime(){return lY},onHidden(e){lz.add(e)}}},lQ=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},lZ=[1800,3e3],lJ=(e,t={})=>{lQ((()=>{let n,i=lX(),r=lH("FCP"),a=lG("paint",(e=>{for(let t of e)"first-contentful-paint"===t.name&&(a.disconnect(),t.startTime<i.firstHiddenTime&&(r.value=Math.max(t.startTime-lF(),0),r.entries.push(t),n(!0)))}));a&&(n=lx(e,r,lZ,t.reportAllChanges),lR((i=>{n=lx(e,r=lH("FCP"),lZ,t.reportAllChanges),lB((()=>{r.value=performance.now()-i.timeStamp,n(!0)}))})))}))};let l0=0,l1=1/0,l2=0;const l3=e=>{for(let t of e)t.interactionId&&(l1=Math.min(l1,t.interactionId),l0=(l2=Math.max(l2,t.interactionId))?(l2-l1)/7+1:0)},l4=()=>{var t;return e?l0:null!=(t=performance.interactionCount)?t:0};let l6=0;class l5{v(){l6=l4(),this.u.length=0,this.l.clear()}L(){let e=Math.min(this.u.length-1,Math.floor((l4()-l6)/50));return this.u[e]}h(e){var t,n;if(null==(t=this.m)||t.call(this,e),!e.interactionId&&"first-input"!==e.entryType)return;let i=this.u.at(-1),r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>i.P){if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((e,t)=>t.P-e.P)),this.u.length>10)for(let e of this.u.splice(10))this.l.delete(e.id);null==(n=this.p)||n.call(this,r)}}constructor(){_(this,"u",[]),_(this,"l",new Map),_(this,"m",void 0),_(this,"p",void 0)}}const l7=e=>{let t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(addEventListener("visibilitychange",e=lj(e),{once:!0,capture:!0}),t((()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})})))},l8=[200,500],l9=(t,n={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;let i=lX();lQ((()=>{var r;"interactionCount"in performance||e||(e=lG("event",l3,{type:"event",buffered:!0,durationThreshold:0}));let a,s=lH("INP"),o=lK(n,l5),l=e=>{l7((()=>{for(let t of e)o.h(t);let t=o.L();t&&t.P!==s.value&&(s.value=t.P,s.entries=t.entries,a())}))},c=lG("event",l,{durationThreshold:null!=(r=n.durationThreshold)?r:40});a=lx(t,s,l8,n.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),i.onHidden((()=>{l(c.takeRecords()),a(!0)})),lR((()=>{o.v(),a=lx(t,s=lH("INP"),l8,n.reportAllChanges)})))}))};class ce{h(e){var t;null==(t=this.m)||t.call(this,e)}constructor(){_(this,"m",void 0)}}const ct=[2500,4e3],cn=(e,t={})=>{lQ((()=>{let n,i=lX(),r=lH("LCP"),a=lK(t,ce),s=e=>{for(let s of(t.reportAllChanges||(e=e.slice(-1)),e))a.h(s),s.startTime<i.firstHiddenTime&&(r.value=Math.max(s.startTime-lF(),0),r.entries=[s],n())},o=lG("largest-contentful-paint",s);if(o){n=lx(e,r,ct,t.reportAllChanges);let i=lj((()=>{s(o.takeRecords()),o.disconnect(),n(!0)})),a=e=>{e.isTrusted&&(l7(i),removeEventListener(e.type,a,{capture:!0}))};for(let e of["keydown","click","visibilitychange"])addEventListener(e,a,{capture:!0});lR((i=>{n=lx(e,r=lH("LCP"),ct,t.reportAllChanges),lB((()=>{r.value=performance.now()-i.timeStamp,n(!0)}))}))}}))},ci=[800,1800],cr=e=>{document.prerendering?lQ((()=>cr(e))):"complete"!==document.readyState?addEventListener("load",(()=>cr(e)),!0):setTimeout(e)},ca=(e,t={})=>{let n=lH("TTFB"),i=lx(e,n,ci,t.reportAllChanges);cr((()=>{let r=lU();r&&(n.value=Math.max(r.responseStart-lF(),0),n.entries=[r],i(!0),lR((()=>{(i=lx(e,n=lH("TTFB",0),ci,t.reportAllChanges))(!0)})))}))};var cs=(e,t)=>ii(e,"observability").pipe(it((e=>{let{data:n}=e;return null!=n&&(Array.isArray(n)?n.some((e=>e.name===t)):n.name===t)}))),co=class{get(e){e.length>0&&((new Image).src=e)}post(e,t){if(!navigator.sendBeacon)return;let n="";(null==t?void 0:t.requestData)&&(n=JSON.stringify(t.requestData)),navigator.sendBeacon(e,n)}},cl=class extends C{get(e,t){this.pingUrl("Get",e,null==t?void 0:t.retry,void 0,null==t?void 0:t.headers)}post(e,t){this.pingUrl("Post",e,null==t?void 0:t.retry,null==t?void 0:t.requestData,null==t?void 0:t.headers)}pingUrl(e,t,n,i,r){let a=i?JSON.stringify(i):void 0,s=r?JSON.stringify(r):void 0;this.mraidService.pingUrl(e,t,null==n||n,a,s)}static getServiceIdentifier(){return"MraidNetworkRequestServiceInterface"}constructor(e){super(),this.mraidService=e}};const cc=(e,t)=>Object.keys(e).reduce(((n,i)=>{let r=e[i],a=t[i];return null==a||"object"!=typeof a||Array.isArray(a)?void 0!==a&&(n[i]=a):n[i]=cc(r,a),n}),T({},e)),cd=e=>{let t=tU();rg(t)&&rj(e,t.getId(),t.getTrackingEventMapConfig())},cu=e=>{let t={hlsVideoStalled:["hls-video-stalled","hls-video-stalled"],hlsLevelSwitched:["hls-level-switched","hls-level-switched"]};rY().pushEvent(T({name:t[e.event][0],metric:t[e.event][1]},e.data))},ch=()=>{r1().send({type:"VIDEO_FAILURE"})};var cv=(e,t)=>{let n=nj(e);switch(t.event){case"progress":null!=(null==t||null==(r=t.data)?void 0:r.current_time)&&null!=(null==t||null==(a=t.data)?void 0:a.duration)&&iF(t.data.current_time,t.data.duration,Math.round(t.data.current_time));break;case"mute":case"unmute":n.emit("mute"===t.event?"video.mute":"video.unmute"),cd("mute"===t.event?"mute":"unmute");break;case"close":n.emit("video.close"),cd("skip");break;case"pause":case"play":cd("pause"===t.event?"pause":"resume");break;case"error":var i,r,a,s,o;let l=rY();(null==t||null==(s=t.data)?void 0:s.error)&&l.pushError(t.data.error,{url:null==(o=t.data)?void 0:o.video_url,error_source:"resource"});break;case"hlsVideoStalled":cu(t),e.hasExistingEvent({type:"video",event:"hlsFragLoadError"})&&ch();break;case"hlsLevelSwitched":cu(t);break;case"hlsFatalError":ch();break;case"hlsFragLoadError":(null==t||null==(i=t.data)?void 0:i.is_first_segment)&&ch()}},cp=(e,t,n=tj(),i=Q.getValue())=>{((e,t)=>{switch(e){case"rewardGranted":return t.sdk.supports.rewardGranted;case"video.length":return t.sdk.supports.videoLength;default:return!0}})(t.event,i)&&n.notifyTPAT(t.event)},cg=(e,t,n=iR(),i=rB(),r=rC,a=en())=>{var s;a.isViewable()?null!=(s=r()[0])&&s.state.matches("AUTO_PLAY_FAIL")||(n.wake(),i.startAll()):(n.standby(),i.pauseAll())},cm=(e,t)=>{var n,i,r,a,s,o;let l=null!=(i=null==(n=t.data)?void 0:n.mode)?i:0;switch(t.event){case"visible":let e=nW();switch(l){case 0:(null==e?void 0:e.isOpen())&&e.close();break;case 1:null==e||e.setVisible()}break;case"finished":switch(l){case 0:null==(r=nF())||r.close();break;case 1:null==(a=nW())||a.finish()}break;case"failed":switch(l){case 0:null==(s=nF())||s.fallback();break;case 1:null==(o=nW())||o.fallback()}}},cf=(e,t,n=Q.getValue(),i=rL())=>{t.data.is_fatal&&(n.sdk.is.versionBelow7?rM():i.notifyFatalError(t))},cS=(e,t,n=nF())=>{if(n)switch(t.event){case"skpv6-success":n.setPrepared();break;case"skpv6-finished":n.close()}},cC=(e,t,n=nW())=>{if(n)switch(t.event){case"sko6-success":n.setPrepared();break;case"sko6-finished":n.finish();break;case"sko6-failed":n.getState().matches("PREPARING")?n.setError():n.fallback();break;case"sko6-visible":n.setVisible()}},cE={downloadButtonCta:"download_button_cta",endcardCta:"endcard_cta",lastChanceEndcardCta:"last_chance_endcard_cta",persistentCta:"persistent_cta",fsc:"fsc"},cy=(e,t)=>{var n;let i,r=rY();if("error-logging"!==t.type||!(null==(n=t.data)?void 0:n.error)||(i=t.data.error,e.findAll({where:{type:"error-logging",data:{error:{message:i.message,error_source:i.error_source}}}}).length>1)){if("cta"===t.type||"fsc"===t.type){let e=tB.getValue().scene,n={name:"cta",metric:cE[t.event],scene_type:null==e?void 0:e.getSceneType()};r.pushEvent(n)}}else r.pushError(t.data.error)},c_=(e,t)=>{let n=rY();"event"===t.event?n.pushEvent(t.data):"error"===t.event&&t.data.error&&n.pushError(t.data.error)},cT=(e,t,n=tj())=>{"decodingError"===t.event&&n.close()},cI=(e,t,n=tj(),i=t$(),r=op(),a=r4())=>t0((()=>a.haveAllCompleted()),t3.MAX_WAIT_TIME+100,Error("error waiting for all event streams to finish")).catch((()=>{})).finally((()=>{i.emit("ad-close","ad-close"),null==r||r.addRecord(),n.close()}));const cw=(e,t=i9())=>{let n=t.find((t=>t.getId()===e));return n||t.filter(rf).map((t=>cw(e,t.getChildScenes()))).find(Boolean)};var cb=cw;const cA={composite:"composite-scene-end",endcard:"endcard-scene-end",image:"image-scene-end",video:"video-scene-end"};var cO=(e,t,n=cb,i=r4(),r=t$())=>{let a=n(t.data.scene_id);a&&"sceneEnd"===t.event&&i.subscribeAll(a).then((e=>{var n;Object.keys(e).length>0&&r.emit({type:"observability",event:"event",data:T({name:"scene-end",metric:null!=(n=cA[t.data.scene_type])?n:"scene-end"},a.getObservabilityData(),e)})}))},ck=(e,t,n=tj(),i=nj(),r=t$())=>{"grantReward"===t.event&&(n.notifySuccessfulViewAd(),i.emit("rewardGranted"),r.emit("grant-reward","grant-reward"))},cD=(e,t,n=nz(),i=nW(),r=nF())=>{if("skpvFallbackToSko"===t.event){var a;let t=null!=(a=null==i?void 0:i.getState().matches("FALLBACK"))&&a;if(i&&!t)return void(null==i||i.open({fallback:"appStore"}));e.emit({type:"store-kit-orchestration",event:"storeKitFallbackToMraid"})}"skoFallbackToSkpv"===t.event&&(null==r||r.open()),"storeKitFallbackToMraid"===t.event&&n.invoke({url:void 0,target:ni.OFF,shouldFireMMP:!1})},cN=(e,t,n=t$())=>{if("appStoreClose"===t.event){let t=e.findAllActivityEventPairs("store-kit-product-view","appStoreOpen","appStoreClose");if(n.getEventCount("app-store-duration")<t.length){let e={name:"app-store-duration",metric:"app-store-duration",elapsed:Date.now()-t[t.length-1][0].timestamp};n.emit(e)}}},cV=(e,t,n=rV(),i=r1)=>{i().state.context.shouldRenderPictureInPicture&&(n.closeVideo(),i().send({type:"CLOSE_PICTURE_IN_PICTURE"}))},cL=(e,t,n=t$())=>{"checkpoint.0"===t.event&&n.emit("impression","impression")},cP=(e,t,n=t$(),i=tU,r=i9)=>{if("inactivity"===t.event){let e=i(),t=r().findIndex((t=>t.getId()===(null==e?void 0:e.getId())));n.emit({name:"inactivity-observed",metric:"inactivity-observed",scene_id:null==e?void 0:e.getId(),scene_type:null==e?void 0:e.getSceneType(),scene_index:t,last_chance_endcard_visible:rI.getValue().isLastChanceEndcardOverlayShowing})}},cM=(e,t,n={})=>{var i,r;let{injectedAdMachineInterpreter:a=r1,injectedIncentivizedDialogInterpreter:s=si,injectedSceneEventReportingService:o=t2,injectedCreateIncentivizedSendEvent:l=sN,adData:c=Q.getValue()}=n;if("custom-close"!==t.event||a().state.context.isPrivacyDrawerOpen||0===o().getEventCount("closeButtonShow"))return;if("SHOWING"===(null==(i=s())?void 0:i.state.value))return void(null==(r=s())||r.send({type:"HIDE"}));let d=tU();if(c.placement.is.rewarded&&rg(d))l(a().send,s(),e)({type:"NEXT"});else{if(nk(d)&&d.getLastChanceEndcardConfig().enabled){if(!0!==rI.getValue().isLastChanceEndcardOverlayShowing)return void a().send({type:"LAST_CHANCE_ENDCARD"});if(2>o().getEventCount("closeButtonShow"))return}a().send({type:"NEXT"})}};const cR=async()=>{((e=M(),t=t$(),n=tY(),i=Q.getValue())=>{let r,{gdpr:a}=i,s=((e,t,n=tY())=>{var i,r,a,s,o,l,c,d,u,h,v,p,g,m,f,S,C,y,E,_,T,I,w,b,A;let O,k=e.get("USER_AGENT");if(k)try{O=JSON.parse(t9(k))}catch(e){n.emit({type:"error-logging",event:"exception",data:{error:{message:"Failed to parse USER_AGENT token"}}})}let N=null!=(a=e.get("SDK_VERSION"))?a:"0.0.0",D=new P(N),V=null!=(s=e.get("PLATFORM"))?s:"unknown",L=null!=(o=e.get("OS_VERSION"))?o:"0.0.0",M=new P(L),R=D.isGreaterThanOrEqualTo(new P("7.4.0")),x=null!=(l=e.get("PLACEMENT_TYPE"))?l:"unknown";return{advertiser:{appStoreId:e.get("APP_STORE_ID"),creative:{format:null!=(c=e.get("CREATIVE_FORMAT"))?c:"",formatVersion:null!=(d=e.get("CREATIVE_FORMAT_VERSION"))?d:"",id:null!=(u=e.get("CREATIVE_ID"))?u:"",is:{freeForm:e.has("AD_EXPERIENCE"),adPodding:nP(e.get("AD_PODDING"))},type:null!=(h=e.get("CREATIVE_TYPE"))?h:""},domain:null!=(v=e.get("ADVERTISER_DOMAIN"))?v:"",dsp:"accelerate"===e.get("AD_SOURCE")?"accelerate":"others",headerBidding:nP(e.get("HEADER_BIDDING")),mediation:null!=(p=e.get("MEDIATION_NAME"))?p:"",disableEndcardCache:nP(e.get("DISABLE_ENDCARD_CACHE"))},device:{ado:nP(e.get("ADO_ENABLED")),countryCode:null!=(g=e.get("COUNTRY_CODE"))?g:"",model:null!=(m=null==O||null==(i=O.device)?void 0:i.model)?m:"",os:{name:V,version:L,is:{iOS:"iOS"===V,android:"android"===V.toLowerCase(),amazon:"amazon"===V.toLowerCase(),unknown:"iOS"!==V&&!["android","amazon"].includes(V.toLowerCase())}},skpv:{hasMaskIssue:"iOS"===V&&M.isGreaterThanOrEqualTo(new P("17"))&&M.isLessThan(new P("17.1.1")),hasSwipeIssue:"iOS"===V&&M.isGreaterThanOrEqualTo(new P("17.2"))&&D.isGreaterThanOrEqualTo(new P("7.0.0"))&&D.isLessThanOrEqualTo(new P("7.2.0"))},type:null!=(f=null==O||null==(r=O.device)?void 0:r.type)?f:""},gdpr:t,incentivized:{body:null!=(S=e.get("INCENTIVIZED_BODY_TEXT"))?S:"Are you sure you want to skip this ad? Finish watching to claim your reward.",close:null!=(C=e.get("INCENTIVIZED_CLOSE_TEXT"))?C:"Close Ad",continue:null!=(y=e.get("INCENTIVIZED_CONTINUE_TEXT"))?y:"Continue",title:null!=(E=e.get("INCENTIVIZED_TITLE_TEXT"))?E:"Close this ad?"},placement:{type:x,id:null!=(_=e.get("PLACEMENT_ID"))?_:"",is:{banner:"banner"===x,fullscreen:"fullscreen"===x,inLine:"in_line"===x,mrec:"mrec"===x,rewarded:nP(e.get("INCENTIVIZED"))}},platform:{accTests:e.has("ACC_TESTS")?t9(null!=(T=e.get("ACC_TESTS"))?T:""):void 0,nautilusVersion:null!=(I=e.get("NAUTILUS_VERSION"))?I:"0.0.0",observability:nP(e.get("OBSERVABILITY")),observedExperiments:null!=(w=e.get("OBSERVED_EXPERIMENTS"))?w:"",sessionId:null!=(b=e.get("SESSION_ID"))?b:""},publisher:{id:null!=(A=e.get("PUB_ID"))?A:""},sdk:{version:N,is:{version70x:D.isGreaterThanOrEqualTo(new P("7.0.0"))&&D.isLessThan(new P("7.1.0")),version740:D.isEqualTo(new P("7.4.0")),version71xOrAbove:D.isGreaterThanOrEqualTo(new P("7.1")),version741OrAbove:D.isGreaterThanOrEqualTo(new P("7.4.1")),version744OrAbove:D.isGreaterThanOrEqualTo(new P("7.4.4")),versionBelow721:D.isLessThan(new P("7.2.1")),versionBelow71x:D.isLessThan(new P("7.1.0")),versionBelow7:D.isLessThan(new P("7"))},supports:{hlsCustomPlayer:"iOS"!==V||D.isGreaterThanOrEqualTo(new P("7")),omSdk:D.isGreaterThanOrEqualTo(new P("6.9.1")),openPrivacy:"android"===V||"iOS"===V&&D.isGreaterThanOrEqualTo(new P("7.1.0")),orientationProperties:"fullscreen"===x&&("iOS"===V||D.isGreaterThanOrEqualTo(new P("6.12.1"))),pingUrl:"iOS"===V&&D.isGreaterThanOrEqualTo(new P("7.4.4"))||"android"===V&&D.isGreaterThanOrEqualTo(new P("7.4.3")),rewardGranted:"iOS"===V||D.isGreaterThanOrEqualTo(new P("6.12.0")),silent:R,sko:"iOS"===V&&M.isGreaterThanOrEqualTo(new P("14"))&&D.isGreaterThanOrEqualTo(new P("6.8.1"))&&!D.isEqualTo(new P("7.4.2"))&&!D.isEqualTo(new P("7.4.4"))&&"fullscreen"===x,skpv:"iOS"===V&&M.isGreaterThanOrEqualTo(new P("6"))&&D.isGreaterThanOrEqualTo(new P("6.4")),videoLength:"iOS"===V&&D.isGreaterThanOrEqualTo(new P("7.4.1"))||D.isGreaterThanOrEqualTo(new P("7.4.4"))}}}})(e,a,n);if(e.has("AD_DATA"))try{var o;r=JSON.parse(decodeURIComponent(null!=(o=e.get("AD_DATA"))?o:"{}")),t.emit({type:"observability",event:"event",data:{name:"ad-data-diff",equals:JSON.stringify(r)===JSON.stringify(s)}})}catch(t){let e=t instanceof Error?t:Error("Error parsing AD_DATA token");n.emit({type:"error-logging",event:"exception",data:{error:e,is_fatal:!0}})}Q.setValue(cc(U,s))})();let e=tF();e.addEventHandler("*",cy),e.addEventHandler("close",cI),e.addEventHandler("observability",c_),e.addEventHandler("storekit-mraid",cm),e.addEventHandler("storekit-mraid",cS),e.addEventHandler("storekit-mraid",cC),e.addEventHandler("tpat",cp),e.addEventHandler("tpat",cL),e.addEventHandler("video",cv),e.addEventHandler("video",sV),e.addEventHandler("viewability",cg),e.addEventHandler("error-logging",cf),e.addEventHandler("videoViewed",iH),e.addEventHandler("free-form",cT),e.addEventHandler("scene-event",cO),e.addEventHandler("incentivized-event",ck),e.addEventHandler("store-kit-product-view",cN),e.addEventHandler("store-kit-orchestration",cD),e.addEventHandler("picture-in-picture",cV),e.addEventHandler("inactivity",cP),e.addEventHandler("mraid-event",cM),((e=Q.getValue(),t=tj())=>{let n,i=S.getInstance();n=e.sdk.supports.pingUrl?new cl(t):new co,i.bind(tW.getServiceIdentifier(),n)})(),((e=rY())=>{e.init(oT)})();let t=t$();t.emit("ad-load","ad-load"),((e=rL())=>{e.init()})(),((e=M(),t=Q.getValue())=>{if(!t.sdk.supports.skpv)return;let n=new oG(e,t).resolve();n&&S.getInstance().bind(nU.getServiceIdentifier(),n)})(),((e=M(),t=Q.getValue())=>{if(!t.sdk.supports.sko)return;let n=new lD(e,t).resolve();n&&S.getInstance().bind(nH.getServiceIdentifier(),n)})(),(()=>{if(!nW())return;let e=S.getInstance(),t=nW();if(!t)return;let n=new rR(t);e.bind(rR.getServiceIdentifier(),n)})(),((e=Q.getValue(),t=iR(),n=nF(),i=nW())=>{let r=S.getInstance(),a=new rX(e,t,n,i);r.bind(rX.getServiceIdentifier(),a)})(),((e=M(),t=lE,n=o7)=>{e.has("AD_EXPERIENCE")?t():n()})(),((e=i9())=>{let t=e.filter((e=>"endcard"===e.getSceneType()));if(!t.length)return;let n=new s5;t.forEach((e=>{e.initIframeContentData(n)}))})(),((e=i9(),t=r6())=>{e.filter((e=>"image"===e.getSceneType())).forEach((e=>{let{url:n}=e;/^https?:/i.test(n)&&t.add(n,e.getId())}))})(),((e=oE(),t=tI(),n=Q.getValue())=>{t.setInitialMutedValue(e);let i=((e,t,n)=>{if(n.sdk.supports.silent){let i=((e,t)=>{let n=e.isSilent(),{device:i,sdk:r,placement:a}=t;return!!i.os.is.iOS&&void 0===n&&(!!r.is.version740&&!!a.is.inLine||!!r.is.version741OrAbove)||n})(t,n);if(void 0!==i)return i||e}return e})(e,t,n);t.setMutedSignal(i)})(),await lP(),((e=t$(),t=lJ,n=l9,i=cn,r=ca)=>{let a=t=>{e.emit({name:{FCP:"web-vitals-first-contentful-paint",INP:"web-vitals-interaction-to-next-paint",LCP:"web-vitals-largest-contentful-paint",TTFB:"web-vitals-time-to-first-byte"}[t.name],value:Math.round(t.value)})};t(a),n(a),i(a),r(a)})(),((e=Q.getValue(),t=i9(),n=M(),i=op())=>{if(nP(n.get("DYNAMIC_AD_OPTIMIZATION"))&&e.placement.is.fullscreen&&!e.placement.is.rewarded&&!n.has("AD_EXPERIENCE")&&rg(t[0])&&s9(t[1])){var r;let e=S.getInstance(),t=new i7(null!=(r=n.get("SESSION_ID"))?r:"",i);e.bind(i7.getServiceIdentifier(),t)}})();let n=S.getInstance(),i=new nY;n.bind(nY.getServiceIdentifier(),i),((e=iR(),t=tF(),n=t$(),i=1e4,r=cs)=>{r(n,"ad-start").pipe(ih((()=>ii(t,"*").pipe(function(e,t=iR()){return n=>new ie((i=>{let r,a=()=>{r&&(r.destroy(),r=void 0)},s=n.subscribe({next:n=>{a(),(r=t.getNewTimer(e,(()=>{i.next(n),r=void 0}))).start()},error:e=>{var t;a(),null==(t=i.error)||t.call(i,e)},complete:()=>{var e;a(),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{a(),s.unsubscribe()}}}))}(i,e),is(iP(ii(t,"inactivity"),r(n,"ad-close"))))))).subscribe({next:()=>{t.emit({type:"inactivity",event:"inactivity",fireOnlyOnce:!0})},error:e=>{t.emit({type:"error-logging",event:"exception",data:{error:e}})},complete:()=>{}})})(),t.emit("ad-load-complete","ad-load-complete")};S.getInstance().bind(y.getServiceIdentifier(),new y).bind(E.getServiceIdentifier(),new E).bind(L.getServiceIdentifier(),new L).bind(tD.getServiceIdentifier(),new tD).bind(tO.getServiceIdentifier(),new tO).bind(et.getServiceIdentifier(),new et).bind(tT.getServiceIdentifier(),new tT).bind(rk.getServiceIdentifier(),new rk).bind(t3.getServiceIdentifier(),new t3).bind(tb.getServiceIdentifier(),new tb).bind(iX.getServiceIdentifier(),new iX).bind(tX.getServiceIdentifier(),new tX).bind(tG.getServiceIdentifier(),new tG).bind(t8.getServiceIdentifier(),new t8).bind(np.getServiceIdentifier(),new np).bind(ne.getServiceIdentifier(),new ne).bind(nl.getServiceIdentifier(),new nl).bind(rO.getServiceIdentifier(),new rO).bind(nn.getServiceIdentifier(),new nn),window.omidBridge=new Proxy({},{get:(e,t)=>(...e)=>{lN[t]=e}}),((e=ee())=>new Promise((t=>{ii(e,"mraid-event").pipe(it((e=>"ready"===e.event))).pipe(ic(1)).subscribe({next:()=>{t(!0)}})})))().then(cR).then((()=>((e=en())=>new Promise((t=>{if(e.isViewable())t(!0);else{let n=window.setInterval((()=>{e.isViewable()&&(window.clearInterval(n),t(!0))}),100)}})))())).then((()=>{var e,t,n,i,r;oC(),((e=r1(),t=r4(),n=r7,i=r3)=>{let r=i(e.state);tB.setValue({scene:r}),t.start(r),n(r),e.start()})(),e=rN(ov,{}),(t=document.getElementById("dynamic"))==document&&(t=document.documentElement),H.__&&H.__(e,t),n=t.__k,i=[],r=[],ey(t,e=t.__k=ed(eh,null,[e]),n||er,er,t.namespaceURI,n?null:t.firstChild?F.call(t.childNodes):null,i,n?n.__e:t.firstChild,!1,r),eT(i,e,r)})),((e=tj())=>{e.notifyReadyEventForSdk6()})();</script> </body></html>